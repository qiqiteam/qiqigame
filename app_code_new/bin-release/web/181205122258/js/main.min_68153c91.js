var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function o(t){try{h(n.next(t))}catch(e){r(e)}}function a(t){try{h(n["throw"](t))}catch(e){r(e)}}function h(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,a)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,r=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){h.label=i[1];break}if(6===i[0]&&h.label<o[1]){h.label=o[1],o=i;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(i);break}o[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],r=0}finally{s=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,r,o,a,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},xlLib;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;return n.uiLayer=new egret.DisplayObjectContainer,n.topLayer=new egret.DisplayObjectContainer,n.effectLayer=new egret.DisplayObjectContainer,n.mainUILayer=new egret.DisplayObjectContainer,n.maskLayer=new egret.DisplayObjectContainer,n.tipsLayer=new egret.DisplayObjectContainer,n.gameLayer=new egret.DisplayObjectContainer,t.SceneMgr.instance.init(n),n.initBaseLayers(),n.addEventListener(egret.Event.ADDED_TO_STAGE,n.start,n),n}return __extends(i,e),i.prototype.initBaseLayers=function(){this.addChild(this.uiLayer),this.addChild(this.topLayer),this.addChild(this.effectLayer),this.addChild(this.mainUILayer),this.addChild(this.maskLayer),this.addChild(this.tipsLayer),this.awake()},i.prototype.awake=function(){},i.prototype.start=function(t){void 0===t&&(t=null)},i.prototype.resize=function(){},i.prototype.destroy=function(){},i.prototype.reConnectFail=function(){},i.prototype.addGame=function(e){this.currentGame=e,null==this._bgMask&&(this._bgMask=new egret.Sprite,this._bgMask.graphics.clear(),this._bgMask.graphics.beginFill(0,0),this._bgMask.graphics.drawRect(0,0,t.Global.screenWidth,t.Global.screenHeight),this._bgMask.graphics.endFill(),this._bgMask.width=t.Global.screenWidth,this._bgMask.height=t.Global.screenHeight,this._bgMask.touchEnabled=!0,this._bgMask.visible=!0),this.gameLayer.addChild(this._bgMask),this.gameLayer.addChild(e),this.addChildAt(this.gameLayer,1)},i.prototype.removeGame=function(e){void 0===e&&(e=null);var i=t.SceneMgr.instance.currentScene.currentGame;i&&(i.parent&&i.parent.removeChild(i),i.destroy(),i=null),t.DisplayUtils.removeFromParent(this.gameLayer),this.gameLayer.removeChildren(),this.currentGame=null},i}(egret.DisplayObjectContainer);t.LobbyScene=e,__reflect(e.prototype,"xlLib.LobbyScene",["xlLib.IScene"])}(xlLib||(xlLib={}));var Const=function(){function t(){}return t.GAME_HOST="47.52.138.199",t.GAME_PORT="9081",t.httpUrl="http://47.52.138.199:80",t.GAME_NIUNIU="niuniu",t.GAME_BAIJIALE="baijiale",t.GAME_ERBAGANG="erbagang",t.GAME_MAJIANG="majiang",t.GAME_ZHAJINHUA="zhajinhua",t.TYPE_QZNN="qznn",t.TYPE_TBNN="tbnn",t.TYPE_QRNIUNIU="qrnn",t.TYPE_JINGDIANJINHUA="jingdianjinhua",t.TYPE_JINGDIANBAIJIALE="jingdianbaijiale",t.TYPE_ERBAGANGJINDIAN="erbagangjindian",t.PLAYWAY_CHUJICHANG="chujichang",t}();__reflect(Const.prototype,"Const");var xlLib;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;return n.uiLayer=new egret.DisplayObjectContainer,n.topLayer=new egret.DisplayObjectContainer,n.effectLayer=new egret.DisplayObjectContainer,n.mainUILayer=new egret.DisplayObjectContainer,n.maskLayer=new egret.DisplayObjectContainer,n.tipsLayer=new egret.DisplayObjectContainer,n.thmLoaded=!1,n.resLoaded=!1,i&&(n._gameInfo=i),t.SceneMgr.instance.init(n),n.initBaseLayers(),n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n}return __extends(i,e),i.prototype.initBaseLayers=function(){this.addChild(this.uiLayer),this.addChild(this.topLayer),this.addChild(this.effectLayer),this.addChild(this.mainUILayer),this.addChild(this.maskLayer),this.addChild(this.tipsLayer),this.awake()},i.prototype.awake=function(){},i.prototype.onAddToStage=function(t){void 0===t&&(t=null),this._gameInfo?this.preLoadAndInit():this.start(t)},i.prototype.preLoadAndInit=function(){if(this._gameInfo.gameTheme&&""!=this._gameInfo.gameTheme){var t=new eui.Theme(this._gameInfo.gameTheme,this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.loadedthm,this)}else this.thmLoaded=!0;RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.loadedCfg,this),RES.loadConfig(this._gameInfo.gameResConfigUrl,this._gameInfo.gameResRoot)},i.prototype.loadedthm=function(t){this.thmLoaded=!0,this.cfgComplete()},i.prototype.loadedCfg=function(t){this.resLoaded=!0,RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.loadedCfg,this),this.cfgComplete()},i.prototype.start=function(t){void 0===t&&(t=null)},i.prototype.cfgComplete=function(){1==this.thmLoaded&&1==this.resLoaded&&(this._gameInfo.preLoad&&""!=this._gameInfo.preLoad?t.ResLoadMgr.instance.load(this._gameInfo.preLoad,this.onResComplete,this.onResError,this,this._gameInfo.preloadUI):(this.preLoadEnd(),this.preLoadCallBack&&this.preLoadCallBack()))},i.prototype.onResComplete=function(t){t.groupName==this._gameInfo.preLoad&&(this.preLoadEnd(),this.preLoadCallBack&&this.preLoadCallBack())},i.prototype.preLoadEnd=function(){},i.prototype.resize=function(){},i.prototype.destroy=function(){},i.prototype.onResError=function(t){console.warn("Group:"+t.groupName+" has failed to load")},i.prototype.backToLobby=function(){"LobbyScene"==egret.getQualifiedSuperclassName(t.SceneMgr.instance.currentScene)&&t.SceneMgr.instance.currentScene.removeGame()},i}(egret.DisplayObjectContainer);t.GameDoc=e,__reflect(e.prototype,"xlLib.GameDoc",["xlLib.IGameDoc"])}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.uiLayer=new egret.DisplayObjectContainer,i.topLayer=new egret.DisplayObjectContainer,i.effectLayer=new egret.DisplayObjectContainer,i.mainUILayer=new egret.DisplayObjectContainer,i.maskLayer=new egret.DisplayObjectContainer,i.tipsLayer=new egret.DisplayObjectContainer,i.initBaseLayers(),i.addEventListener(egret.Event.ADDED_TO_STAGE,i.start,i),i}return __extends(e,t),e.prototype.initBaseLayers=function(){this.addChild(this.uiLayer),this.addChild(this.effectLayer),this.addChild(this.topLayer),this.addChild(this.mainUILayer),this.addChild(this.maskLayer),this.addChild(this.tipsLayer),this.awake()},e.prototype.awake=function(){},e.prototype.start=function(t){void 0===t&&(t=null)},e.prototype.resize=function(){},e.prototype.destroy=function(){},e.prototype.reConnectFail=function(){},e}(egret.DisplayObjectContainer);t.GameScene=e,__reflect(e.prototype,"xlLib.GameScene",["xlLib.IScene"])}(xlLib||(xlLib={}));var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function s(t){e.call(n,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}var o=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},o)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var a=t.split("/");a.pop();var h=a.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(n,generateJSON.paths[t])},this):RES.getResByUrl(h,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(n,generateJSON.paths[t])},o)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var VersionController=function(){function t(){var t=this;this.resourceRoot="resource/",this.versionPath="assets/",this.versionConfigPath="resource/version.json",this.currentVersion="1.0.7",this.versionCacheWxgame=function(){var e=egret.localStorage.getItem("resVersion");if(e!=t.currentVersion){egret.localStorage.setItem("resVersion",t.currentVersion),console.log("版本更新");var i=wx.getFileSystemManager(),n=wx.env.USER_DATA_PATH+"/cache_crc32/assets";i.readdir({dirPath:n,success:function(e){for(var s=t.getRemoveList(e.files),r=s.length,o=0;r>o;++o)console.log("删除",n+"/"+s[o]),i.unlinkSync(n+"/"+s[o])},fail:function(t){}})}},this.versionCacheWeb=function(){var e=egret.localStorage.getItem("resVersion");e!=t.currentVersion&&(egret.localStorage.setItem("resVersion",t.currentVersion),console.log("Web版本更新"))}}return t.prototype.init=function(){var t=this;return new Promise(function(e,i){var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(t.versionConfigPath,egret.HttpMethod.GET),n.send(),n.addEventListener(egret.Event.COMPLETE,function(i){var n=i.currentTarget;egret.log("post data : ",n.response),t.versionConfig=JSON.parse(n.response),egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?t.versionCacheWxgame():egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&t.versionCacheWeb(),e()},t),n.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){egret.log("post error : "+event),i()},t)})},t.prototype.getRemoveList=function(t){var e=[],i="";for(var n in this.versionConfig)i+=this.versionConfig[n]+",";for(var s=t.length,r=0;s>r;++r){var o=t[r],a=o.slice(0,o.indexOf("."));-1==i.indexOf(a)&&e.push(o)}return e},t.prototype.getVirtualUrl=function(t){return this.getResUrlByVersion(t)},t.prototype.getResUrlByVersion=function(t){if(-1==t.indexOf(this.resourceRoot))return t;if(t=t.replace(this.resourceRoot,""),this.versionConfig){var e=t.indexOf("?v=");-1!=e&&(t=t.slice(0,e));var i=t.replace(this.versionPath,"");if(this.versionConfig&&this.versionConfig[i]){var n=this.versionConfig[i],s=t.slice(t.lastIndexOf("."));t=this.versionPath+n+s}}return t=this.resourceRoot+t},t}();__reflect(VersionController.prototype,"VersionController",["RES.IVersionController"]),RES.registerVersionController(new VersionController);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?n(s):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var EventConst=function(){function t(){}return t.ON_SOCKET_SUC="onSocketSuc",t.ON_SOCKET_FAIL="onSocketFail",t.ON_SOCKET_CLOSE="onSocketClose",t.niuniu_manual="niuniu_manual",t.joinroom="joinroom",t.niuniu_start="niuniu_start",t.niuniu_dohog="niuniu_dohog",t.niuniu_dobet="niuniu_dobet",t.niuniu_leave="niuniu_leave",t.BaccaratEfcsh="BaccaratEfcsh",t.baijialegamestatus="gamestatus",t.BaccaratJoinroom="BaccaratJoinroom",t.baijialebeton="baijialebeton",t.BaccaratOnleave="BaccaratOnleave",t.prepare="prepare",t.play="play",t.botpour="botpour",t.pressure="pressure",t.seecard="seecard",t.compareCard="compareCard",t.abandon="abandon",t.erbagang_start="erbagang_start",t.erbagang_hog="erbagang_hog",t.erbagang_bet="erbagang_bet",t.onUserShowOrderUpdate="onUserShowOrderUpdate",t.onGameStatusChange="onGameStatusChange",t.players="players",t.onNewUserEnterGame="onNewUserEnterGame",t.onUserBetOrderUpdate="onUserBetOrderUpdate",t.onUserHogOrderUpdate="onUserHogOrderUpdate",t.onUserLeave="onUserLeave",t.hog="hog",t.hognum="hognum",t.banker="banker",t.bet="bet",t.betnum="betnum",t.summary="summary",t.baccaratOnJoinRoom="baccaratOnJoinRoom",t.parteySuccess="parteySuccess",t.onBJLjoinroom="onBJLjoinroom",t.startBeton="startBeton",t.onCatch="onCatch",t.dealCatch="dealCatch",t.baccaratDeil="baccaratDeil",t.theNumberOfTooMuch="theNumberOfTooMuch",t.beginBteon="beginBteon",t.bsogc="bsogc",t.acquisitionGolb="acquisitionGolb",t.isStartBeton="isStartBeton",t.isStartBetonST="isStartBetonST",t.gameOverSucces="gameOverSucces",t.gamestatus="gamestatus",t.gambleType="gambleType",t.settlement="settlement",t.leave="leave",t.otherBotpour="otherBotpour",t.otherSeecard="otherSeecard",t.otherAbandon="otherAbandon",t.gameOver="gameOver",t}();__reflect(EventConst.prototype,"EventConst");var HttpAddress=function(){function t(){}return t.guestUrl=Const.httpUrl+"/api/guest",t.sendmsgUrl=Const.httpUrl+"/api/sendmsg",t.login=Const.httpUrl+"/api/login",t}();__reflect(HttpAddress.prototype,"HttpAddress");var LodingView=function(t){function e(){var e=t.call(this)||this;return e.skinName="LodingViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.resize()},e.prototype.resize=function(){this.bg_img&&(this.bg_img.width=xlLib.Global.screenWidth,this.bg_img.height=xlLib.Global.screenHeight)},e.prototype.setProgress=function(t,e,i,n,s){if(void 0===s&&(s=!1),e&&0!=e){var r=Math.floor(598*(t/e));this.load_rec.width=r,this.load_img.mask=this.load_rec}},e}(eui.Component);__reflect(LodingView.prototype,"LodingView");var xlLib;!function(t){var e=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.initPushMessage=function(){t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.onUserLeave,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.niuniu_leave,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.onUserShowOrderUpdate,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.onUserBetOrderUpdate,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.onUserHogOrderUpdate,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.onGameStatusChange,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.players,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.onNewUserEnterGame,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.hog,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.hognum,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.banker,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.bet,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.betnum,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.summary,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.play,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.onBJLjoinroom,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.baccaratDeil,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.onCatch,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.theNumberOfTooMuch,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.acquisitionGolb,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.startBeton,this.onMessage,this),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.baccaratOnJoinRoom,this.onMessage,this),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.dealCatch,this.onMessage,this),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.beginBteon,this.onMessage,this),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.bsogc,this.onMessage,this),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.gameOverSucces,this.onMessage,this),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.gambleType,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.seecard,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.pressure,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.abandon,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.otherSeecard,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.otherBotpour,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.botpour,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.compareCard,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.otherAbandon,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.settlement,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.gameOver,this.onMessage),t.WebSocketMgr.getInstance().registerMsgHandler(EventConst.leave,this.onMessage)},e.prototype.onMessage=function(t){switch(t.command){case EventConst.players:return console.log(t),UserInfo.getInstance().addPlayes(t),void EventUtil.dispatchEvent(t.command,t);case EventConst.onNewUserEnterGame:return console.log(t),UserInfo.getInstance().joinRoomPlayer(t),void EventUtil.dispatchEvent(t.command,t);default:return console.log("收到服务器推送："+t.command),void EventUtil.dispatchEvent(t.command,t)}},e}();t.ReceiveMessageMgr=e,__reflect(e.prototype,"xlLib.ReceiveMessageMgr")}(xlLib||(xlLib={}));var AlertDialog=function(t){function e(){var e=t.call(this)||this;return e.skinName="AlertDialogSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.resize(),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},e.prototype.resize=function(){this.close_rect&&(this.close_rect.width=xlLib.Global.screenWidth,this.close_rect.height=xlLib.Global.screenHeight)},e.prototype.showAlertDialog=function(t,e,i){this.des_txt.text=t,this.cb=e,this.thisArg=i},e.prototype.onTouchHandler=function(t){t.target==this.qd_btn&&(this.cb&&this.cb.call(this.thisArg),xlLib.UIMgr.instance.hideUI(this))},e.prototype.destroy=function(){this.cb=null,this.thisArg=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)},e}(eui.Component);__reflect(AlertDialog.prototype,"AlertDialog");var ComBox=function(t){function e(e){void 0===e&&(e=16777215);var i=t.call(this)||this;return i.skinName="ComBoxSkin",i.tab_txt.textColor=e,i.initEventListener(),i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isShowMenu(!1)},e.prototype.initEventListener=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchStageHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.table_list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClickHandler,this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},e.prototype.isShowMenu=function(t){this.isShow=t,this.scroller.visible=t,this.table_list.visible=t,this.bgImg.visible=t},e.prototype.onTouchStageHandler=function(t){t.target!=this.sel_btn&&t.target!=this.combox_grp&&t.target!=this.scroller&&t.target!=this.table_list&&this.isShowMenu(!1)},e.prototype.itemClickHandler=function(t){var e=t.target;e&&(this.cb&&this.cb.call(this.thisArg,e.data),e.data&&(this.tab_txt.text=e.data.name),this.isShowMenu(!1))},e.prototype.onTouchHandler=function(t){(t.target==this.sel_btn||t.target==this.combox_grp)&&this.isShowMenu(!this.isShow)},e.prototype.setComBoxData=function(t,e,i){this.cb=e,this.thisArg=i,this.arrayCollection=new eui.ArrayCollection(t),this.table_list.dataProvider=this.arrayCollection,this.table_list.itemRenderer=ComBoxItem,this.scroller.viewport=this.table_list,this.tab_txt.text=t[0].name},e.prototype.destroy=function(){this.cb=null,this.thisArg=null,this.scroller.stopAnimation(),this.table_list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClickHandler,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchStageHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)},e}(eui.Component);__reflect(ComBox.prototype,"ComBox");var ComBoxItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="ComBoxItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.des_txt.text=this.data.name},e}(eui.ItemRenderer);__reflect(ComBoxItem.prototype,"ComBoxItem");var DatePickerView=function(t){function e(){var e=t.call(this)||this;return e.skinName="DatePickerViewSkin",e.initEventListener(),e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.resize()},e.prototype.resize=function(){this.close_rect&&(this.close_rect.width=xlLib.Global.screenWidth,this.close_rect.height=xlLib.Global.screenHeight)},e.prototype.showDatePicker=function(t,e,i){this.currdate=t,this.cb=e,this.thisArg=i,this.updataDateText(),this.resize()},e.prototype.updataDateText=function(){this.time_txt.text=GlobalFunction.getDateString(this.currdate)+"/08:00:00",this.year_txt.text=this.currdate.getFullYear()+"",this.month_txt.text=this.currdate.getMonth()+1+"",this.date_txt.text=this.currdate.getDate()+""},e.prototype.initEventListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},e.prototype.onTouchHandler=function(t){t.target==this.close_rect||t.target==this.qx_btn?xlLib.PopUpMgr.removePopUp(this,1):t.target==this.qd_btn?(this.cb&&this.cb.call(this.thisArg,this.currdate),xlLib.PopUpMgr.removePopUp(this,1)):t.target==this.addyear_btn?(this.currdate.setFullYear(this.currdate.getFullYear()+1),this.updataDateText()):t.target==this.addmonth_btn?(this.currdate.setMonth(this.currdate.getMonth()+1),this.updataDateText()):t.target==this.adddate_btn?(this.currdate.setDate(this.currdate.getDate()+1),this.updataDateText()):t.target==this.reyear_btn?(this.currdate.setFullYear(this.currdate.getFullYear()-1),this.updataDateText()):t.target==this.remonth_btn?(this.currdate.setMonth(this.currdate.getMonth()-1),this.updataDateText()):t.target==this.redate_btn&&(this.currdate.setDate(this.currdate.getDate()-1),this.updataDateText())},e.prototype.destroy=function(){this.cb=null,this.thisArg=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)},e}(eui.Component);__reflect(DatePickerView.prototype,"DatePickerView");var EToggleSwitch=function(t){function e(e,i,n,s,r,o){void 0===i&&(i=""),void 0===n&&(n=""),void 0===s&&(s=""),void 0===r&&(r=null),void 0===o&&(o="assets");var a=t.call(this)||this;return a.isPlayCartoon=!1,a.isSelected=!1,a.switchOffName="",a.switchOnName="",a.switchBarName="",a.param={context:null,data:null},a.param.context=e,a.switchOffName=i,a.switchOnName=n,a.switchBarName=s,a.init(r,o),a}return __extends(e,t),e.prototype.init=function(t,e){void 0===t&&(t=null),void 0===e&&(e="assets"),this.backFun=t,this.switchOffImg=new egret.Bitmap,this.switchOnImg=new egret.Bitmap,this.switchBarImg=new egret.Bitmap,this.switchOffImg.texture=RES.getRes(this.switchOffName),this.addChild(this.switchOffImg),this.switchOnImg.texture=RES.getRes(this.switchOnName),this.addChild(this.switchOnImg),this.switchOnImg.alpha=0,this.switchBarImg.texture=RES.getRes(this.switchBarName),this.switchBarImg.x=5,this.switchBarImg.y=this.switchOffImg.height/2-this.switchBarImg.height/2+4,this.addChild(this.switchBarImg),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onbuttonTouchTap,this)},e.prototype.onbuttonTouchTap=function(t){if(!this.isPlayCartoon){this.isPlayCartoon=!0;var e=function(){this.isPlayCartoon=!1,this.isSelected=!this.isSelected,null!=this.backFun&&this.backFun.apply(this.param.context,[this.param.data])};this.isSelected?(egret.Tween.get(this.switchBarImg).to({x:5},400).call(e,this),egret.Tween.get(this.switchOffImg).to({alpha:1},400),egret.Tween.get(this.switchOnImg).to({alpha:0},400)):(egret.Tween.get(this.switchBarImg).to({x:this.switchOffImg.width-this.switchBarImg.width-6},400).call(e,this),egret.Tween.get(this.switchOffImg).to({alpha:0},400),egret.Tween.get(this.switchOnImg).to({alpha:1},400))}},e.prototype.setBindData=function(t){this.param.data=t},e.prototype.getBindData=function(){return this.param.data},e.prototype.getSelected=function(){return this.isSelected},e}(egret.DisplayObjectContainer);__reflect(EToggleSwitch.prototype,"EToggleSwitch");var Hint=function(t){function e(){var e=t.call(this)||this;return e.skinName="HintSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this._qding.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.onClick=function(t){xlLib.PopUpMgr.removePopUp(e,1)},e}(eui.Component);__reflect(Hint.prototype,"Hint",["eui.UIComponent","egret.DisplayObject"]);var Inthematch=function(t){function e(){var e=t.call(this)||this;return e.skinName="InthematchSkin",e}return __extends(e,t),e.prototype.partAdded=function(e,i){this.clearTime(),t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.initData(),this._quxiao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),EventUtil.addEventListener(EventConst.onUserLeave,this.onleave,this)},e.prototype.onleave=function(t){if(200==t._obj.code){xlLib.PopUpMgr.removePopUp(e,1);var i=["hall_bg_mp3"];xlLib.SoundMgr.instance.playBgMusic(i),xlLib.SceneMgr.instance.changeScene(Lobby)}},e.prototype.onClick=function(t){this.quxiaopipei()},e.prototype.quxiaopipei=function(){var t=UserInfo.getInstance().getGameDataByindex(Const.GAME_NIUNIU),e=t.getTypeDataByindex(Const.TYPE_QZNN),i=e.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),n={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:i.id};xlLib.WebSocketMgr.getInstance().send(EventConst.niuniu_leave,n,function(t){},this)},e.prototype.initData=function(){this.str=this._waitfor.text,this.startCountDown(0)},e.prototype.startCountDown=function(t){this.time=t,null==this.timer&&(this.timer=new egret.Timer(300),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.start())},e.prototype.timerFunc=function(t){for(var e=0;e<=this.time%4;e++)switch(e){case 0:this._waitfor.text=this.str+"";break;case 1:this._waitfor.text=this.str+".";break;case 2:this._waitfor.text=this.str+"..";break;case 3:this._waitfor.text=this.str+"..."}this.time++},e.prototype.clearTime=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer=null)},e}(eui.Component);__reflect(Inthematch.prototype,"Inthematch");var TipsLoading=function(t){function e(){var e=t.call(this)||this;return e.init(),e.once(egret.Event.ADDED_TO_STAGE,e.onAddHandler,e),e.once(egret.Event.REMOVED_FROM_STAGE,e.destroy,e),e}return __extends(e,t),e.prototype.init=function(){var t=xlLib.DisplayUtils.createMask(.5,xlLib.Global.screenWidth,xlLib.Global.screenHeight);t.touchEnabled=!0,this.addChild(t),this._tips_bg=xlLib.DisplayUtils.createBitmapByName("spinner"),this._tips_bg.x=xlLib.Global.screenWidth>>1,this._tips_bg.y=xlLib.Global.screenHeight>>1,this._tips_bg.anchorOffsetX=this._tips_bg.width/2,this._tips_bg.anchorOffsetY=this._tips_bg.height/2,this._tips_bg.scaleX=this._tips_bg.scaleY=.4,this.addChild(this._tips_bg)},e.prototype.onAddHandler=function(t){this.starRotation()},e.prototype.starRotation=function(){egret.Tween.get(this._tips_bg).to({rotation:this._tips_bg.rotation+20},100).call(this.starRotation,this)},e.prototype.destroy=function(){egret.Tween.removeTweens(this._tips_bg),this._tips_bg=null},e}(egret.DisplayObjectContainer);__reflect(TipsLoading.prototype,"TipsLoading");var ComBoxData=function(){function t(t){this.id=t.id,this.name=t.name,this.data=t.data}return t}();__reflect(ComBoxData.prototype,"ComBoxData");var gameData=function(){function t(){this.types=[]}return t.prototype.initData=function(t){this.id=t.id,this.code=t.code,this.name=t.name,this.indexStr=t.indexStr;for(var e,i=0;i<t.types.length;i++)e=new typeData,e.initData(t.types[i]),this.types.push(e)},t.prototype.getTypeDataByindex=function(t){for(var e,i=0;i<this.types.length;i++)if(this.types[i].indexStr==t){e=this.types[i];break}return e},t}();__reflect(gameData.prototype,"gameData");var GameIconData=function(){function t(){}return t.prototype.initData=function(t){return this.url=t.url,this.isOpen=t.isOpen,this.game=t.game,this.type=t.type,this.ishot=t.ishot,this},t}();__reflect(GameIconData.prototype,"GameIconData");var GlobalData=function(){function t(){}return t.clearData=function(t){void 0===t&&(t=!1)},t.md5PassWord="",t.isReConnect=!1,t.gameVersion="2018050905",t.isOutLogin=!1,t.hasNetwork=!0,t.recNum=0,t}();__reflect(GlobalData.prototype,"GlobalData");var InfoBoxData=function(){function t(t){this.id=t.id,this.name=t.name,this.data=t.data}return t}();__reflect(InfoBoxData.prototype,"InfoBoxData");var PlayerData=function(){function t(){}return t.prototype.initData=function(t){this.integral=t.id,this.lastlogintime=t.lastlogintime,this.login=t.login,this.message=t.message,this.online=t.online,this.opendeal=t.opendeal,this.orgi=t.orgi,this.passupdatetime=t.passupdatetime,this.playerindex=t.playerindex,this.playertype=t.playertype,this.province=t.province,this.roomid=t.roomid,this.roomready=t.roomready,this.token=t.token,this.updatetime=t.updatetime,this.username=t.username,this.goldcoins=t.goldcoins,this.id=t.id,this.index=t.index},t}();__reflect(PlayerData.prototype,"PlayerData");var playWayData=function(){function t(){}return t.prototype.initData=function(t){this.changecard=t.changecard,this.code=t.code,this.extpro=t.extpro,this.free=t.free,this.groups=t.groups,this.id=t.id,this.items=t.items,this.level=t.level,this.maxcoins=t.maxcoins,this.memo=t.memo,this.mincoins=t.mincoins,this.name=t.name,this.onlineusers=t.onlineusers,this.roomtitle=t.roomtitle,this.score=t.score,this.shuffle=t.shuffle,this.indexStr=t.indexStr},t}();__reflect(playWayData.prototype,"playWayData");var typeData=function(){function t(){this.playways=[]}return t.prototype.initData=function(t){this.id=t.id,this.code=t.code,this.name=t.name,this.indexStr=t.indexStr;for(var e,i=0;i<t.playways.length;i++)e=new playWayData,e.initData(t.playways[i]),this.playways.push(e)},t.prototype.getPlayWayByindex=function(t){for(var e,i=0;i<this.playways.length;i++)if(this.playways[i].indexStr==t){e=this.playways[i];break}return e},t}();__reflect(typeData.prototype,"typeData");var UserInfo=function(){function t(){this.gamelist=[],this.playes=[]}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.getGameDataByindex=function(t){for(var e,i=0;i<this.gamelist.length;i++)if(this.gamelist[i].indexStr==t){e=this.gamelist[i];break}return e},t.prototype.addPlayes=function(t){for(var e=0;e<t.player.length;e++){t.player[e].id==this.uid&&(this.myPlayer=new PlayerData,this.myPlayer.initData(t.player[e]));
var i=new PlayerData;i.initData(t.player[e]),this.playes.push(i)}},t.prototype.joinRoomPlayer=function(t){t.player.id==this.myPlayer.id||this.playes.push(t.player)},t.prototype.initUserInfo=function(t){var e=t.data;this.uid=e.id,this.username=e.username,this.goldcoins=e.goldcoins,this.token=e.token;for(var i,n=0;n<t.games.length;n++)i=new gameData,i.initData(t.games[n]),this.gamelist.push(i)},t.prototype.findUserInfo=function(t){for(var e=0;e<this.playes.length;e++)if(this.playes[e].id==t)return this.playes[e]},t.prototype.findSeatNumber=function(t){var e=0;return t==this.playes[0].index?0:e=t<this.playes[0].index?this.playes.length-(this.playes[0].index-t):t-this.playes[0].index},t}();__reflect(UserInfo.prototype,"UserInfo");var BJLHead=function(t){function e(){var e=t.call(this)||this;return e.skinName="QZNNHeadSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this);var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawCircle(46,46,46),e.graphics.endFill(),e.x=this.imghead.x+3,e.y=this.imghead.y+3,this.addChild(e),this.imghead.mask=e},e.prototype.setUserInfo=function(t,e,i){this.imghead.source=i,this.labelName.text=t,this.labelGold.text=e},e.prototype.setZhuang=function(t){this.img_zhuang.visible=t},e.prototype.destroy=function(){},e}(eui.Component);__reflect(BJLHead.prototype,"BJLHead");var BJLroomView=function(t){function e(){var e=t.call(this)||this;return e.skinName="BJLroomViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this._coin_label.text=""+UserInfo.getInstance().goldcoins,this._btn_enter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this),EventUtil.addEventListener(EventConst.baccaratOnJoinRoom,this.OnbaccaratOnJoinRoom,this)},e.prototype.OnbaccaratOnJoinRoom=function(t){200==t._obj.code?(xlLib.SceneMgr.instance.changeScene(BJLScene),xlLib.TipsUtils.showFloatWordTips("加入房间成功！")):xlLib.TipsUtils.showFloatWordTips("加入房间失败！")},e.prototype.onEnterGame=function(){if(this.gameIconData){var t=UserInfo.getInstance().getGameDataByindex(this.gameIconData.game),e=t.getTypeDataByindex(this.gameIconData.type),i=e.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),n={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:i.id};xlLib.WebSocketMgr.getInstance().send(EventConst.BaccaratJoinroom,n,function(t){},this)}},e.prototype.setGameIconData=function(t){this.gameIconData=t},e.prototype.dispose=function(){xlLib.PopUpMgr.removePopUp(this,1)},e.prototype.destroy=function(){this.gameIconData=null,this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this)},e}(eui.Component);__reflect(BJLroomView.prototype,"BJLroomView",["eui.UIComponent","egret.DisplayObject"]);var BJLScene=function(t){function e(){var e=t.call(this)||this;return e.BJLView=new BJLView,e.uiLayer.addChild(e.BJLView),e}return __extends(e,t),e.prototype.destroy=function(){this.BJLView.destroy(),t.prototype.destroy.call(this)},e.prototype.resize=function(){this.BJLView&&this.BJLView.resize()},e}(xlLib.GameScene);__reflect(BJLScene.prototype,"BJLScene");var BJLTypeItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="BJLTypeItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){},e}(eui.ItemRenderer);__reflect(BJLTypeItem.prototype,"BJLTypeItem");var BJLUtil=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getBetNumber=function(t){switch(t){case 0:return Math.pow(10,4);case 1:return Math.pow(10,5);case 2:return 5*Math.pow(10,6);case 3:return Math.pow(10,7);case 4:return 1*Math.pow(10,8);case 5:return 5*Math.pow(10,8)}},t.prototype.getMsgSource=function(t){var e="";switch(t){case 2:e="d2";break;case 3:e="d3";break;case 4:e="d4";break;case 5:e="d5"}return e},t.prototype.getSoundEffect=function(t){switch(t){case 0:return"bgm";case 1:return"jh.jackpot";case 2:return"jh.start";case 3:return"jh.end";case 4:return"jh.ts";case 5:return"jh.tp";case 6:return"jh.dealCard";case 7:return"jh.openCard";case 8:return"jh.stake"}},t.prototype.getCoinsPos=function(t){var e=new egret.Point;switch(t){case 1:e.x=1090,e.y=270;break;case 2:e.x=330,e.y=270;break;case 3:e.x=630,e.y=310;break;case 4:e.x=805,e.y=310;break;case 5:e.x=670,e.y=510;break;case 6:e.x=1190,e.y=510;break;case 7:e.x=210,e.y=510;break;case 8:e.x=400,e.y=510;break;case 9:e.x=1e3,e.y=510}return e},t.prototype.getCardType=function(t){switch(t){case 1:return"豹子";case 2:return"同花顺";case 3:return"金花";case 4:return"顺子";case 5:return"对子";case 6:return"单张"}},t.prototype.coinsType=function(t,e){var i=[],n=0,s="";e=Math.round(e/1e4),e>0&&10>e?(n=e,s="b1a"):e>9&&100>e?(n=e/10,s="b2a"):e>99&&1e3>e?(n=e/100,s="b3a"):e>999&&1e4>e?(n=e/1e3,s="b4a"):e>9999&&1e5>e?(n=e/1e4,s="b5a"):(n=e/5e4,s="b6a");for(var r=0;r<Math.round(n);r++){var o=new eui.Image(s);o.x=t.x,o.y=t.y,i.push(o)}return i},t.prototype.coinPos=function(){var t=new egret.Point,e=Math.floor(4*Math.random());switch(e){case 0:t.x=-100,t.y=400;break;case 1:t.x=-100,t.y=800;break;case 2:t.x=650,t.y=400;break;case 3:t.x=650,t.y=800}return t},t.instance=null,t}();__reflect(BJLUtil.prototype,"BJLUtil");var BJLView=function(t){function e(){var e=t.call(this)||this;return e.r=null,e.num=0,e.arrCoin=[],e.interval=-1,e.selfbetsNum={},e.betsPostion=-1,e.betsNum=0,e.cardResult=null,e.isChangeBanker=!1,e.changeBankerObj={},e.isCanBets=!0,e.poolBetArray={},e.limitGold=0,e.limitVip=0,e.curBankerRanking=-1,e.isApplyBanker=!1,e.lastGameBankerNum=0,e.isSysBanker=!1,e.orginBankerCardPos=[],e.orginPlayerCardPos=[],e.isBanker=!1,e.isBets=!1,e.maxUserData=null,e.banker_total_gold=0,e.isBoomBanker=!1,e.resultCaijin=0,e.totalCaijin=0,e.cdNum=10,e.lastTouchBetIndex=-1,e.coinsNumArr={},e.isCoinsReturn=!0,e.curRate=0,e.lastTouchBetTime=0,e.isCardEffectShow=!1,e.flyIntval=0,e.flyBankerIndex=0,e.flyIndex0=0,e.flyIndex1=0,e.effectPlayerIndex=0,e.skinName="BJLViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.getOrginCardPos(),this.addEvent(),this.initData(),this.labelHead0.text=UserInfo.getInstance().username,this.labelGold0.text=""+UserInfo.getInstance().goldcoins},e.prototype.initData=function(){this.labBankerRank.text="",this.labBankerLastNum.text="",this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this.grpBankerList.visible=!1,this.grpCoins.touchEnabled=!1,this.grpTips.touchEnabled=!1,this.grpTips.touchChildren=!1,this.grpSecondPanel.visible=!1,this.btnUpBanker.visible=!0,this.btnDownBanker.visible=!1,this.grpTips.visible=!1,this.grpResult.visible=!1,this.imgBaoZhuang.visible=!1,this.grpCardType.touchChildren=!1,this.grpCardType.touchEnabled=!1,this.grpCaijin.visible=!1,this.grpCard.visible=!0,this._wanjia.visible=!1,this._btn_switch.visible=!1;var t=[{name:"10",down_url:"img_10zhu_png",up_url:"img_10zhu_png"},{name:"20",down_url:"img_20zhu_png",up_url:"img_20zhu_png"},{name:"50",down_url:"img_50zhu_png",up_url:"img_50zhu_png"},{name:"100",down_url:"img_100zhu_png",up_url:"img_100zhu_png"},{name:"500",down_url:"img_500zhu_png",up_url:"img_500zhu_png"}];this._Set_meun.dataProvider=new eui.ArrayCollection(t),this._Set_meun.useVirtualLayout=!0,this._Set_meun.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._Set_meun.visible=!1,this.arrCoin=[]},e.prototype.onBarItemTap=function(t){switch(console.log(t.itemIndex),t.itemIndex){case 0:console.log("10");break;case 1:console.log("20");break;case 2:console.log("50");break;case 3:console.log("100");break;case 4:console.log("500")}},e.prototype.getOrginCardPos=function(){for(var t=0;2>t;t++){for(var e=[],i=0;3>i;i++){var n=this["grpCard_"+t+"_"+i];n.source="",n.anchorOffsetX=n.width/2,n.x+=n.width/2;var s=new egret.Point;s.x=n.x,s.y=n.y,e[i]=s}this.orginPlayerCardPos[t]=e}},e.prototype.resize=function(){},e.prototype.onClick=function(t){t.target==this._image_10zhu?(console.log("_image_10zhu"),this.sendamessage(EventConst.baijialebeton,10,1),this.num=10):t.target==this._image_20zhu?(console.log("_image_20zhu"),this.sendamessage(EventConst.baijialebeton,20,1),this.num=20):t.target==this._image_50zhu?(console.log("_image_50zhu"),this.sendamessage(EventConst.baijialebeton,50,1),this.num=50):t.target==this._image_100zhu?(console.log("_image_100zhu"),this.sendamessage(EventConst.baijialebeton,100,1),this.num=100):t.target==this._image_500zhu&&(console.log("_image_500zhu"),this.sendamessage(EventConst.baijialebeton,500,1),this.num=500)},e.prototype.sendamessage=function(t,e,i){var n={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:Const.PLAYWAY_CHUJICHANG,extparams:{moneys:e,types:i}};xlLib.WebSocketMgr.getInstance().send(t,n,function(t){},this)},e.prototype.addEvent=function(){this._image_10zhu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._image_20zhu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._image_50zhu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._image_100zhu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._image_500zhu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Onquit,this),EventUtil.addEventListener(EventConst.players,this.addPlayers,this),EventUtil.addEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.addEventListener(EventConst.onBJLjoinroom,this.ononBJLjoinroomBack,this),EventUtil.addEventListener(EventConst.startBeton,this.onStartBetonBack,this),EventUtil.addEventListener(EventConst.onCatch,this.onbaijialebetonBack,this),EventUtil.addEventListener(EventConst.dealCatch,this.ondealCatchBack,this),EventUtil.addEventListener(EventConst.baccaratDeil,this.onBaccaratDeilBack,this),EventUtil.addEventListener(EventConst.theNumberOfTooMuch,this.onTheNumberOfTooMuchBack,this),EventUtil.addEventListener(EventConst.bsogc,this.onbsogcBack,this),EventUtil.addEventListener(EventConst.acquisitionGolb,this.onAcquisitionGolbBack,this),EventUtil.addEventListener(EventConst.beginBteon,this.onBeginBteonBack,this),EventUtil.addEventListener(EventConst.gameOverSucces,this.ongameOverSuccesBack,this)},e.prototype.ononBJLjoinroomBack=function(t){console.log("赔率")},e.prototype.onStartBetonBack=function(t){console.log("可以开始下注  倒计时"),this.showGameTips(2),this.startCountDown(t._obj.seconds),this._btn_switch.visible=!0},e.prototype.onbaijialebetonBack=function(t){200==t._obj.code?UserInfo.getInstance().uid==t._obj.userid&&(xlLib.TipsUtils.showFloatWordTips("押注"+this.num),this.labelGold0.text=""+t._obj.golbcontis,this.onGenZhuClick(1)):xlLib.TipsUtils.showFloatWordTips(t._obj.reminder)},e.prototype.ondealCatchBack=function(t){200==t._obj.code&&UserInfo.getInstance().uid!=t._obj.userid&&this.onPlayerGenZhu(t._obj.base)},e.prototype.onBaccaratDeilBack=function(t){this.startCountDown(t._obj.seconds),this._btn_switch.visible=!1;var e={pokes:[{value:[t._obj.playerCard[0],t._obj.playerCard[1],t._obj.playerCard[2]]},{value:[t._obj.bankerCard[0],t._obj.bankerCard[1],t._obj.bankerCard[2]]}]};this.cdNum=5,this.cardResult=e,this.cardEffect()},e.prototype.onTheNumberOfTooMuchBack=function(t){console.log("参数异常")},e.prototype.onAcquisitionGolbBack=function(t){console.log("金币变为**"),this.startCountDown(t._obj.seconds),200==t._obj.code&&UserInfo.getInstance().uid==t._obj.userid&&(UserInfo.getInstance().goldcoins=t._obj.goldcoins,this.labelGold0.text=""+t._obj.goldcoins)},e.prototype.onbsogcBack=function(t){console.log("金币不足**")},e.prototype.onBeginBteonBack=function(t){var e=this;this.startCountDown(t._obj.seconds),setTimeout(function(){e.resetGame()},3e3)},e.prototype.over=function(t){for(var e={pokes:[],result:[1,0,0,0],bankerWin:0,rate:"0.05",bomb:"0"},i=0;i<t._obj.players.length;i++){var n={num:t._obj.players[i].pai.ratio,type:t._obj.players[i].pai.niu,value:t._obj.players[i].cardsList};e.pokes.push(n)}this.cardResult=e,this.cardEffect()},e.prototype.ongameOverSuccesBack=function(t){200==t._obj.code?(xlLib.SceneMgr.instance.changeScene(Lobby),xlLib.TipsUtils.showFloatWordTips(t._obj.reminder+"!")):xlLib.TipsUtils.showFloatWordTips(t._obj.reminder+"!")},e.prototype.addPlayers=function(t){var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawCircle(62,62,62),e.graphics.endFill(),e.x=this.imghead0.x+6,e.y=this.imghead0.y+5,this.grpHead0.addChild(e),this.imghead0.mask=e,t._obj.player[0].id==UserInfo.getInstance().myPlayer.id&&(this.labelHead0.text=UserInfo.getInstance().myPlayer.username,this.labelGold0.text=UserInfo.getInstance().myPlayer.goldcoins+"",this.imghead0.source="F1_03_png");for(var i=1;7>i;i++)null!=t._obj.player[i]?this["grpHead"+i].setUserInfo(UserInfo.getInstance().playes[i].username,UserInfo.getInstance().playes[i].goldcoins,"F4_03_png"):this["grpHead"+i].setUserInfo("","","")},e.prototype.playerJoinRoom=function(t){console.log(t._obj.player.id),console.log(UserInfo.getInstance().myPlayer.id),t._obj.player.id==UserInfo.getInstance().myPlayer.id||this["grpHead"+t._obj.player.index].setUserInfo(t._obj.player.username,t._obj.player.goldcoins,"F4_03_png")},e.prototype.onGenZhuClick=function(t){var e=new egret.Point;e.x=268,e.y=792,this.showCoins(e,1e4,t)},e.prototype.onPlayerGenZhu=function(t){var e=new egret.Point;e.x=80,e.y=400+80*Math.random(),this.showCoins(e,1e4,t)},e.prototype.startCountDown=function(t){this.timeTxt.text=t+"",this.timeTxt.visible=!0,this.time=t,null==this.timer&&(this.timer=new egret.Timer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.start())},e.prototype.timerFunc=function(t){this.time>=0?(this.timeTxt.text=this.time+"",this.time--):(this.timeTxt.text="0",this.clearTime())},e.prototype.clearTime=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer=null)},e.prototype.setCountdown=function(){this.cdTimer=new egret.Timer(1e3),this.cdTimer.addEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e.prototype.clacTimer=function(){this.cdNum>0?this.cdNum--:(this.cdTimer.stop(),this.cdNum=0,this.resetGame(),this.cdNum=5,this.cardEffect()),this.cdNum<10?(this.labCountdown0.text="0",this.labCountdown1.text=this.cdNum+""):(this.labCountdown0.text=(this.cdNum+"").split("")[0],this.labCountdown1.text=(this.cdNum+"").split("")[1])},e.prototype.joinCallback=function(t){if(200==t.code){this.curRate=t.data.rate;for(var e=t.data,i=t.data.seats,n=0;n<i.length;n++)this["imghead"+i[n].seat].source=i[n].headurl,this["labelHead"+i[n].seat].text=i[n].name,this["imghead"+i[n].seat].height=this["imghead"+i[n].seat].width=70;this.limitGold=e.limitGold,this.limitVip=e.limitVip,this.cdNum=e.time,this.cdTimer.start(),1==t.state?this.isCanBets=!1:2==t.state?this.isCanBets=!0:3==t.state&&(this.isCanBets=!1),console.log("join_game: "+e.state)}},e.prototype.onMsgListen=function(t){var e=t.msg;switch(console.log("onMsgListen: "+e.type,"_niuniuMsgListen_"),e.type){case 0:this.cdNum=parseInt(e.time)+3,this.cdTimer.start();break;case 1:this.isCanBets=!1,this.showGameTips(3);break;case 2:this.setGameResult(e.data);break;case 3:this.changeBankerObj=e.zhuang,this.isChangeBanker=!0;break;case 4:this.updataSeat(1,e.data);break;case 5:this.updataSeat(2,e.seat);break;case 6:this.updateHandsel(e);break;case 7:}},e.prototype.setGameResult=function(t){this.cardResult=t},e.prototype.updataSeat=function(t,e){1==t?(this["imghead"+e.seat].source=e.headurl,this["imghead"+e.seat].height=this["imghead"+e.seat].width=70,this["labelHead"+e.seat].text=e.nick):(this["imghead"+e].source="",this["labelHead"+e].text="")},e.prototype.updateHandsel=function(t){if(null!=this.cardResult){this.maxUserData=t.data.max,this.banker_total_gold=t.data.bankerTotalGold;for(var e=0;4>e;e++)this["labTipsClick"+e].visible=!1;this.cardEffect()}},e.prototype.getBetsCallback=function(t){if(200==t.code)for(var e=t.list,i=1;5>i;i++)if(0!=e[i].score){if(e[i].score==this.poolBetArray[i])continue;this.isCanBets,parseInt(this["labBetsPool"+(i-1)].text)<e[i].score/1e4&&(this.poolBetArray[i]=e[i].score)}},e.prototype.onTouchCharge=function(){},e.prototype.showGameTips=function(t){this.grpTipsInfo.source=BJLUtil.getInstance().getMsgSource(t),this.grpTips.visible=!0,this.grpTipsbg.alpha=0,this.grpTipsInfo.x=640,this.playClickSound(BJLUtil.getInstance().getSoundEffect(t)),egret.Tween.get(this.grpTipsbg).to({alpha:1},400).wait(400).call(function(){egret.Tween.get(this).to({alpha:0},400)},this.grpTipsbg),egret.Tween.get(this.grpTipsInfo).to({x:0},400).wait(400).call(function(){egret.Tween.get(this).to({x:-640},400)},this.grpTipsInfo)},e.prototype.showCoins=function(t,e,i){this.playClickSound(BJLUtil.getInstance().getSoundEffect(8));for(var n=BJLUtil.getInstance().getCoinsPos(i),s=BJLUtil.getInstance().coinsType(t,e),r=0;r<s.length;r++){var o=n.x+80*Math.random(),a=n.y+80*Math.random();this.grpCoins.addChild(s[r]),egret.Tween.get(s[r]).to({x:o,y:a},200).call(function(t){},this,[s[r]]),this.arrCoin.push(s[r])}},e.prototype.cardEffect=function(){this._btn_switch.visible=!1,this.flyIndex0=0,this.flyIndex1=0,this.playCardFly()},e.prototype.playCardFly=function(){var t=this["grpCard_"+this.flyIndex0+"_"+this.flyIndex1];t.x=713.5,t.y=100,t.source="nn.card_100",t.anchorOffsetX=t.width/2,t.x+=t.width/2;var e=this.orginPlayerCardPos[this.flyIndex0][this.flyIndex1];this.playClickSound(BJLUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},400).call(this.playerCardRotation,this)},e.prototype.playerCardRotation=function(){this.playClickSound(BJLUtil.getInstance().getSoundEffect(7));var t=this.cardResult.pokes,e=this["grpCard_"+this.flyIndex0+"_"+this.flyIndex1];e.source="nn.card_100",egret.Tween.get(e).to({scaleX:0},300).call(function(){this[0].source="nn.card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[e,t[this.flyIndex0].value[this.flyIndex1]]).call(this.cycleCallback,this)},e.prototype.cycleCallback=function(){return 1==this.flyIndex0?(this.flyIndex0=0,this.flyIndex1++):this.flyIndex0++,-1==this.cardResult.pokes[this.flyIndex0].value[this.flyIndex1]?void this.cycleCallback():this.flyIndex1>2?(this.flyIndex0=0,this.flyIndex1=0,void(0!=this.flyIntval&&clearInterval(this.flyIntval))):void this.playCardFly()},e.prototype.bankerCardFly=function(){if(5==this.flyBankerIndex)return this.flyBankerIndex=0,clearInterval(this.flyIntval),void(this.interval=setInterval(this.playerCardRotation.bind(this),800));var t=this["bankerCard_"+this.flyBankerIndex];t.x=713.5,t.y=300,t.source="nn.card_100",t.anchorOffsetX=t.width/2,t.x+=t.width/2,this.orginBankerCardPos;var e=this.orginBankerCardPos[this.flyBankerIndex];this.playClickSound(BJLUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},400),this.flyBankerIndex++},e.prototype.bankerCardRotation=function(){this.playClickSound(BJLUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes[0],e=0;5>e;e++){var i=this["bankerCard_"+e];i.source="nn.card_100",egret.Tween.get(i).to({scaleX:0},300).call(function(){this[0].source="nn.card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[i,t.value[e]])}if(this.labCardTypeBanker.source=BJLUtil.getInstance().getCardType(t.type),this.labCardTypeBanker.visible=!0,this.labCardTypeBanker.width=98,this.labCardTypeBanker.height=44,0!=t.type)for(var e=0;5>e;e++){var i=this["bankerCard_"+e];3>e?egret.Tween.get(i).wait(700).to({x:i.x-10},100):egret.Tween.get(i).wait(700).to({x:i.x+10},100)}this.interval=setInterval(this.blinkEffect.bind(this),500)},e.prototype.blinkEffect=function(){clearInterval(this.interval);for(var t=this.cardResult.result,e=0;4>e;e++)1==t[e];this.interval=setInterval(this.cardEffectEnd.bind(this),2e3)},e.prototype.cardEffectEnd=function(){clearInterval(this.interval);var t=this.cardResult,e=!1;1==t.result[0]&&1==t.result[1]&&1==t.result[2]&&1==t.result[3]&&(this.showGameTips(5),e=!0),0==t.result[0]&&0==t.result[1]&&0==t.result[2]&&0==t.result[3]&&(this.showGameTips(4),e=!0)},e.prototype.setStartBet=function(){this.resetGame(),this.grpResult.visible=!1,clearInterval(this.interval),this.showGameTips(2),this.grpCountdown.visible=!0,this.isSysBanker||this.isChangeBanker||(this.lastGameBankerNum--,this.labBankerLastNum.text="剩余"+Math.round(this.lastGameBankerNum)+"次"),this.isChangeBanker&&(this.isChangeBanker=!1,this.grpBankerList.visible=!1)},e.prototype.resetGame=function(){for(var t=0;2>t;t++)for(var e=0;3>e;e++){var i=this["grpCard_"+t+"_"+e];i.source="",egret.Tween.removeTweens(i)}for(;this.grpCoins.numChildren>0;)this.grpCoins.removeChildAt(0);for(var n=0;n<this.arrCoin.length;n++)null!=this.arrCoin[n].parent&&this.arrCoin[n].parent.removeChild(this.arrCoin[n]);this.arrCoin=[]},e.prototype.getHistoryCallback=function(t){for(var e=t.data,i=0;10>i;i++)if(i<e.length){this["grpHistroy"+i].visible=!0;for(var n=e[i],s=0;4>s;s++)this["grpHistroy"+s+"_"+i].source=1==n[s]?"nn.a8":"nn.a7"}else this["grpHistroy"+i].visible=!1;this.grpSecondPanel.visible=!0,this.grpCardType.visible=!1,this.grpHistory.visible=!0},e.prototype.updateDataGold=function(){},e.prototype.playClickSound=function(t){xlLib.SoundMgr.instance.playSound(t+"_mp3")},e.prototype.Onquit=function(){var t={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token};xlLib.WebSocketMgr.getInstance().send(EventConst.BaccaratOnleave,t,function(t){},this)},e.prototype.destroy=function(){this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this._image_10zhu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._image_20zhu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._image_50zhu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._image_100zhu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._image_500zhu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.Onquit,this),EventUtil.removeEventListener(EventConst.players,this.addPlayers,this),EventUtil.removeEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.removeEventListener(EventConst.onBJLjoinroom,this.ononBJLjoinroomBack,this),EventUtil.removeEventListener(EventConst.startBeton,this.onStartBetonBack,this),EventUtil.removeEventListener(EventConst.onCatch,this.onbaijialebetonBack,this),EventUtil.removeEventListener(EventConst.dealCatch,this.ondealCatchBack,this),EventUtil.removeEventListener(EventConst.baccaratDeil,this.onBaccaratDeilBack,this),EventUtil.removeEventListener(EventConst.theNumberOfTooMuch,this.onTheNumberOfTooMuchBack,this),EventUtil.removeEventListener(EventConst.bsogc,this.onbsogcBack,this),EventUtil.removeEventListener(EventConst.acquisitionGolb,this.onAcquisitionGolbBack,this),EventUtil.removeEventListener(EventConst.beginBteon,this.onBeginBteonBack,this),null!=this.cdTimer&&this.cdTimer.removeEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e}(eui.Component);__reflect(BJLView.prototype,"BJLView");var BRNNHead=function(t){function e(){var e=t.call(this)||this;return e.skinName="BRNNHeadSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this);var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawCircle(46,46,46),e.graphics.endFill(),e.x=this.imghead.x+3,e.y=this.imghead.y+3,this.addChild(e),this.imghead.mask=e},e.prototype.setUserInfo=function(t,e,i){this.imghead.source=i,this.labelName.text=t,this.labelGold.text=e},e.prototype.setGold=function(t){this.labelGold.text=t+""},e.prototype.destroy=function(){},e}(eui.Component);__reflect(BRNNHead.prototype,"BRNNHead");var BrnnMainView=function(t){function e(){var e=t.call(this)||this;return e.skinName="BrnnMainViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btn_brnn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickCloBtn,this)},e.prototype.OnClickCloBtn=function(t){xlLib.SoundMgr.instance.playSound("Special_menu_mp3"),xlLib.PopUpMgr.removePopUp(e,1)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.destroy=function(){this.btn_brnn_return.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickCloBtn,this)},e}(eui.Component);__reflect(BrnnMainView.prototype,"BrnnMainView");var BRNNroomView=function(t){function e(){var e=t.call(this)||this;return e.skinName="BRNNroomViewSkin",e}return __extends(e,t),e.prototype.partRemoved=function(e,i){this.effectIcon&&this.effectIcon.stop(),t.prototype.partRemoved.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this.effectIcon=xlLib.DisplayUtils.createAsyncMovieClicp("brnn_hall_effect_hg","brnn_hall_effect_hg"),this.effectIcon.play(-1),this.effectIcon.x=400,this.effectIcon.y=205,this.effectIcon.frameRate=20,this.addChild(this.effectIcon),this._coin_label.text=""+UserInfo.getInstance().goldcoins,this._btn_cjc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this)},e.prototype.onEnterGame=function(){if(this.gameIconData){var t=UserInfo.getInstance().getGameDataByindex(this.gameIconData.game),e=t.getTypeDataByindex(this.gameIconData.type),i=e.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),n={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:i.id};xlLib.WebSocketMgr.getInstance().send(EventConst.joinroom,n,function(t){xlLib.SceneMgr.instance.changeScene(BRNNScene),xlLib.TipsUtils.showFloatWordTips("加入房间成功！")},this)}},e.prototype.setGameIconData=function(t){this.gameIconData=t},e.prototype.dispose=function(){xlLib.PopUpMgr.removePopUp(this,1)},e.prototype.destroy=function(){this.gameIconData=null,this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this)},e}(eui.Component);__reflect(BRNNroomView.prototype,"BRNNroomView",["eui.UIComponent","egret.DisplayObject"]);var BRNNScene=function(t){function e(){var e=t.call(this)||this;return e.BRNNView=new BRNNView,e.uiLayer.addChild(e.BRNNView),e}return __extends(e,t),e.prototype.destroy=function(){this.BRNNView.destroy(),t.prototype.destroy.call(this)},e.prototype.resize=function(){this.BRNNView&&this.BRNNView.resize()},e}(xlLib.GameScene);__reflect(BRNNScene.prototype,"BRNNScene");var BRNNUtil=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getBetNumber=function(t){switch(t){case 0:return Math.pow(10,4);case 1:return Math.pow(10,5);case 2:return Math.pow(10,6);case 3:return Math.pow(10,7);case 4:return 5*Math.pow(10,7);case 5:return Math.pow(10,8)}},t.prototype.getMsgSource=function(t){var e="";switch(t){case 2:e="nn.d2";break;case 3:e="nn.d3";break;case 4:e="nn.d4";break;case 5:e="nn.d5"}return e},t.prototype.getCoinsPos=function(t){var e=new egret.Point;switch(t){case 1:e.x=340,e.y=300;break;case 2:e.x=570,e.y=300;break;case 3:e.x=810,e.y=300;break;case 4:e.x=1050,e.y=300}return e},t.prototype.getCardType2=function(t){switch(t){case 0:return"无牛";case 1:return"牛一";case 2:return"牛二";case 3:return"牛三";case 4:return"牛四";case 5:return"牛五";case 6:return"牛六";case 7:return"牛七";case 8:return"牛八";case 9:return"牛九";case 10:return"牛牛";case 11:return"四炸";case 12:return"五花牛";case 13:return"五小牛"}},t.prototype.getCardType=function(t){switch(t){case 0:return"nn.n1";case 1:return"nn.n2";case 2:return"nn.n3";case 3:return"nn.n4";case 4:return"nn.n5";case 5:return"nn.n6";case 6:return"nn.n7";case 7:return"nn.n8";case 8:return"nn.n9";case 9:return"nn.n10";case 10:return"nn.n11";case 11:return"nn.n13";case 12:return"nn.n14";case 13:return"nn.n12"}},t.prototype.getCardMusicType=function(t){switch(t){case 0:return"nn.niu0";case 1:return"nn.niu1";case 2:return"nn.niu2";case 3:return"nn.niu3";case 4:return"nn.niu4";case 5:return"nn.niu5";case 6:return"nn.niu6";case 7:return"nn.niu7";case 8:return"nn.niu8";case 9:return"nn.niu9";case 10:return"nn.niuniu";case 11:return"nn.playNiuZhadan";case 12:return"nn.playNiu5hua";case 13:return"nn.playNiuXiao5"}},t.prototype.coinsType=function(t){var e=[],i=0,n="";t=Math.round(t/1e4),t>0&&10>t?(i=t,n="nn.b1a"):t>9&&100>t?(i=t/10,n="nn.b2a"):t>99&&1e3>t?(i=t/100,n="nn.b3a"):t>999&&5e3>t?(i=t/1e3,n="nn.b4a"):t>4999&&1e4>t?(i=t/5e3,n="nn.b5a"):(i=t/1e4,n="nn.b6a");for(var s=0;s<Math.round(i);s++){var r=new eui.Image(n),o=this.coinPos();r.x=o.x,r.y=o.y,e.push(r)}return e},t.prototype.coinPos=function(){var t=new egret.Point,e=Math.floor(4*Math.random());switch(e){case 0:t.x=-100,t.y=400;break;case 1:t.x=-100,t.y=800;break;case 2:t.x=650,t.y=400;break;case 3:t.x=650,t.y=800}return t},t.prototype.getSoundEffect=function(t){switch(t){case 0:return"bgm";case 1:return"nn.jackpot";case 2:return"nn.start";case 3:return"nn.end";case 4:return"nn.ts";case 5:return"nn.tp";case 6:return"nn.dealCard";case 7:return"nn.openCard";case 8:return"nn.stake"}},t.instance=null,t}();__reflect(BRNNUtil.prototype,"BRNNUtil");var BRNNView=function(t){function e(){var e=t.call(this)||this;return e.interval=-1,e.selfbetsNum={},e.betsPostion=-1,e.betsNum=0,e.cardResult=null,e.isChangeBanker=!1,e.changeBankerObj={},e.isCanBets=!0,e.poolBetArray={},e.limitGold=0,e.limitVip=0,e.curBankerRanking=-1,e.isApplyBanker=!1,e.lastGameBankerNum=0,e.isSysBanker=!1,e.orginBankerCardPos=[],e.orginPlayerCardPos=[],e.isBanker=!1,e.isBets=!1,e.maxUserData=null,e.banker_total_gold=0,e.isBoomBanker=!1,e.resultCaijin=0,e.totalCaijin=0,e.cdNum=10,e.lastTouchBetIndex=-1,e.coinsNumArr={},e.isCoinsReturn=!0,e.curRate=0,e.lastTouchBetTime=0,e.isCardEffectShow=!1,e.flyIntval=0,e.flyIndex0=0,e.flyIndex1=0,e.flyBankerIndex=0,e.effectPlayerIndex=0,e.skinName="BRNNViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.getOrginCardPos(),this.addEvent(),this.initData()},e.prototype.initData=function(){this.labBankerRank.text="",this.labBankerLastNum.text="",this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this.grpBankerList.visible=!1,this.grpCoins.touchEnabled=!1,this.grpTips.touchEnabled=!1,this.grpTips.touchChildren=!1,this.grpSecondPanel.visible=!1,this.btnUpBanker.visible=!0,this.btnDownBanker.visible=!1,this.grpTips.visible=!1,this.grpResult.visible=!1,this.imgBaoZhuang.visible=!1,this.grpCardType.touchChildren=!1,this.grpCardType.touchEnabled=!1,this.grpCaijin.visible=!1,this.grpCard.visible=!0},e.prototype.getOrginCardPos=function(){for(var t=0;5>t;t++){var e=this["bankerCard_"+t];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,this.orginBankerCardPos[t]=i}this.labCardTypeBanker.visible=!1;for(var n=0;4>n;n++){this["labCardResult"+n].text="",this["labCardType"+n].visible=!1;for(var s=[],r=0;5>r;r++){var e=this["grpCard_"+n+"_"+r];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,s[r]=i}this.orginPlayerCardPos[n]=s}},e.prototype.addEvent=function(){this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buttonClose,this),this._btn_double_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.effectTouch0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.effectTouch1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.effectTouch2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.effectTouch3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);
for(var t=0;4>t;t++)this["labBetsPool"+t].text="",this["labBetsSelf"+t].text="";this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buttonClose,this),EventUtil.addEventListener(EventConst.players,this.addPlayers,this),EventUtil.addEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.addEventListener(EventConst.bet,this.onHogBack1,this),EventUtil.addEventListener(EventConst.summary,this.over,this);var e={pokes:[{num:3,type:10,value:[406,202,301,408,303]},{num:3,type:10,value:[201,307,412,308,104]},{num:1,type:0,value:[313,208,409,304,105]},{num:1,type:4,value:[402,305,203,213,404]},{num:2,type:9,value:[112,211,212,204,205]}],result:[1,0,0,0],bankerWin:0,rate:"0.05",bomb:"0"};this.cdNum=0,this.cardResult=e,this.setCountdown(),this.addPlayers(e),this.setStartBet()},e.prototype.onClick=function(t){t.target==this._btn_double_1?(console.log("_btn_double_1"),this.onTouchBet(1)):t.target==this._btn_double_2?(console.log("_btn_double_2"),this.onTouchBet(2)):t.target==this._btn_double_3?(console.log("_btn_double_3"),this.onTouchBet(3)):t.target==this._btn_double_4?(console.log("_btn_double_4"),this.onTouchBet(4)):t.target==this._btn_double_5?(console.log("_btn_double_5"),this.onTouchBet(5)):t.target==this.effectTouch0?(console.log("effectTouch0"),this.onTouchSelectIndex(0)):t.target==this.effectTouch1?(console.log("effectTouch1"),this.onTouchSelectIndex(1)):t.target==this.effectTouch2?(console.log("effectTouch2"),this.onTouchSelectIndex(2)):t.target==this.effectTouch3&&(console.log("effectTouch3"),this.onTouchSelectIndex(3))},e.prototype.addPlayers=function(t){var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawCircle(62,62,62),e.graphics.endFill(),e.x=this.imghead0.x+6,e.y=this.imghead0.y+5,this.grpHead0.addChild(e),this.imghead0.mask=e,this.labelHead0.text="中国第一赌神",this.labelGold0.text="8888888",this.imghead0.source="F1_03_png"},e.prototype.over=function(t){for(var e={pokes:[],result:[1,0,0,0],bankerWin:0,rate:"0.05",bomb:"0"},i=0;i<t._obj.players.length;i++){var n={num:t._obj.players[i].pai.ratio,type:t._obj.players[i].pai.niu,value:t._obj.players[i].cardsList,win:t._obj.players[i].win,score:t._obj.players[i].score};e.pokes.push(n)}this.cardResult=e,this.cardEffect(),UserInfo.getInstance().isGameStart=!1},e.prototype.onHogBack1=function(t){},e.prototype.playerJoinRoom=function(t){console.log(t._obj.player.id),console.log(UserInfo.getInstance().myPlayer.id),t._obj.player.id==UserInfo.getInstance().myPlayer.id||this["grpHead"+t._obj.player.index].setUserInfo(t._obj.player.username,t._obj.player.goldcoins,"F4_03_png")},e.prototype.buttonClose=function(){xlLib.SceneMgr.instance.changeScene(Lobby)},e.prototype.resize=function(){},e.prototype.setSelfInfo=function(){var t=new egret.Shape;t.graphics.beginFill(16711680),t.graphics.drawCircle(55,52,40),t.graphics.endFill(),this.addChild(t),this.titleHead.mask=t},e.prototype.setCountdown=function(){this.cdTimer=new egret.Timer(1e3),this.cdTimer.addEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e.prototype.clacTimer=function(){this.cdNum%7==0,this.cdNum>0?this.cdNum--:(this.cdTimer.stop(),this.cdNum=0,this.cardEffect()),this.cdNum<10?(this.labCountdown0.text="0",this.labCountdown1.text=this.cdNum+""):(this.labCountdown0.text=(this.cdNum+"").split("")[0],this.labCountdown1.text=(this.cdNum+"").split("")[1])},e.prototype.onTouchBet=function(t){this.lastTouchBetIndex!=t&&(-1!=this.lastTouchBetIndex&&(this["_btn_double_"+this.lastTouchBetIndex].scaleX=this["_btn_double_"+this.lastTouchBetIndex].scaleY=1),this.lastTouchBetIndex=t,this["_btn_double_"+t].scaleX=this["_btn_double_"+t].scaleY=1.1,this.betsNum=this.getBetNumber(t))},e.prototype.getBetNumber=function(t){switch(t){case 0:return Math.pow(10,4);case 1:return Math.pow(10,5);case 2:return Math.pow(10,6);case 3:return Math.pow(10,7);case 4:return 5*Math.pow(10,7);case 5:return Math.pow(10,8)}},e.prototype.onTouchSelectIndex=function(t){if(!this.isCardEffectShow){var e=(new Date).getTime();e-this.lastTouchBetTime<400||(this.lastTouchBetTime=e,this.betsPostion=t+1,this.isCoinsReturn=!1,this.betGlodCallback())}},e.prototype.betGlodCallback=function(){this.isCoinsReturn=!0,this.isBets=!0,this.selfbetsNum[this.betsPostion]=parseInt(this.selfbetsNum[this.betsPostion])+this.betsNum,this.poolBetArray[this.betsPostion]=parseInt(this.poolBetArray[this.betsPostion])+this.betsNum,this["labBetsPool"+(this.betsPostion-1)].text=this.moneyStr(this.poolBetArray[this.betsPostion]),this.showCoins(this.betsNum,this.betsPostion);for(var t=0;4>t;t++)this["labBetsSelf"+t].text=this.moneyStr(this.selfbetsNum[t+1])},e.prototype.moneyStr=function(t){return t>=1e4&&1e8>t?this.get2Num(t/1e4)+"万":t>=1e8?this.get2Num(t/1e8)+"亿":t+""},e.prototype.get2Num=function(t){var e=t.toFixed(3);e=e.substr(0,e.length-1);var i=e.split(".");return i[1]+""=="00"?i[0]+"":e+""},e.prototype.showGameTips=function(t){this.grpTipsInfo.source=BRNNUtil.getInstance().getMsgSource(t),this.grpTips.visible=!0,this.grpTipsbg.alpha=0,this.grpTipsInfo.x=640,this.playClickSound(BRNNUtil.getInstance().getSoundEffect(t)),egret.Tween.get(this.grpTipsbg).to({alpha:1},400).wait(400).call(function(){egret.Tween.get(this).to({alpha:0},400)},this.grpTipsbg),egret.Tween.get(this.grpTipsInfo).to({x:0},400).wait(400).call(function(){egret.Tween.get(this).to({x:-1640},400)},this.grpTipsInfo)},e.prototype.showCoins=function(t,e){var i=!1;this.playClickSound(BRNNUtil.getInstance().getSoundEffect(8));var n=BRNNUtil.getInstance().getCoinsPos(e),s=BRNNUtil.getInstance().coinsType(t);this.coinsNumArr[e]<50?(this.coinsNumArr[e]=parseInt(this.coinsNumArr[e])+s.length,i=!1):i=!0;for(var r=0;r<s.length;r++){var o=n.x+50*Math.random(),a=n.y+50*Math.random();this.grpCoins.addChild(s[r]),egret.Tween.get(s[r]).to({x:o,y:a},200).call(function(){},[i,s[r]])}},e.prototype.cardEffect=function(){this.isCardEffectShow=!0,this.flyIntval=setInterval(this.playCardFly.bind(this),200)},e.prototype.playCardFly=function(){var t=this["grpCard_"+this.flyIndex0+"_"+this.flyIndex1];t.source="nn.card_100",t.x=713.5,t.y=250,t.anchorOffsetX=t.width/2,t.x+=t.width/2;var e=this.orginPlayerCardPos[this.flyIndex0][this.flyIndex1];this.playClickSound(BRNNUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},300),4==this.flyIndex1?3==this.flyIndex0?(this.flyIndex0=0,this.flyIndex1=0,clearInterval(this.flyIntval),this.flyBankerIndex=0,this.flyIntval=setInterval(this.bankerCardFly.bind(this),200)):(this.flyIndex1=0,this.flyIndex0++):this.flyIndex1++},e.prototype.bankerCardFly=function(){if(5==this.flyBankerIndex)return this.flyBankerIndex=0,clearInterval(this.flyIntval),void(this.interval=setInterval(this.playerCardRotation.bind(this),800));var t=this["bankerCard_"+this.flyBankerIndex];t.x=713.5,t.y=250,t.source="nn.card_100",t.anchorOffsetX=t.width/2,t.x+=t.width/2,this.orginBankerCardPos;var e=this.orginBankerCardPos[this.flyBankerIndex];this.playClickSound(BRNNUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},400),this.flyBankerIndex++},e.prototype.playerCardRotation=function(){if(4==this.effectPlayerIndex)return clearInterval(this.interval),this.effectPlayerIndex=0,void this.bankerCardRotation();this.playClickSound(BRNNUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes,e=this.effectPlayerIndex,i=0;5>i;i++){var n=this["grpCard_"+e+"_"+i];n.source="nn.card_100",egret.Tween.get(n).to({scaleX:0},300).call(function(){this[0].source="nn.card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[n,t[e+1].value[i]])}if(this["labCardType"+e].source=BRNNUtil.getInstance().getCardType(t[e+1].type),this.playClickSound(BRNNUtil.getInstance().getCardMusicType(t[e+1].type)),this["labCardType"+e].visible=!0,this["labCardType"+e].width=98,this["labCardType"+e].height=44,this["labCardResult"+e].text="",0!=t[e+1].type)for(var i=0;5>i;i++){var n=this["grpCard_"+e+"_"+i];3>i?egret.Tween.get(n).wait(700).to({x:n.x-10},100):egret.Tween.get(n).wait(700).to({x:n.x+10},100)}this.effectPlayerIndex++},e.prototype.bankerCardRotation=function(){this.playClickSound(BRNNUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes[0],e=0;5>e;e++){var i=this["bankerCard_"+e];i.source="nn.card_100",egret.Tween.get(i).to({scaleX:0},300).call(function(){this[0].source="nn.card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[i,t.value[e]])}if(this.labCardTypeBanker.source=BRNNUtil.getInstance().getCardType(t.type),this.playClickSound(BRNNUtil.getInstance().getCardMusicType(t.type)),this.labCardTypeBanker.visible=!0,this.labCardTypeBanker.width=98,this.labCardTypeBanker.height=44,0!=t.type)for(var e=0;5>e;e++){var i=this["bankerCard_"+e];3>e?egret.Tween.get(i).wait(700).to({x:i.x-10},100):egret.Tween.get(i).wait(700).to({x:i.x+10},100)}this.interval=setInterval(this.blinkEffect.bind(this),500)},e.prototype.blinkEffect=function(){clearInterval(this.interval);for(var t=this.cardResult.result,e=0;4>e;e++)1==t[e]&&(this["effectSelect"+e].visible=!0,EffectUtils.blinkEffect(this["effectSelect"+e],200));this.interval=setInterval(this.cardEffectEnd.bind(this),2e3)},e.prototype.cardEffectEnd=function(){clearInterval(this.interval);var t=this.cardResult,e=!1;1==t.result[0]&&1==t.result[1]&&1==t.result[2]&&1==t.result[3]&&(this.showGameTips(5),e=!0),0==t.result[0]&&0==t.result[1]&&0==t.result[2]&&0==t.result[3]&&(this.showGameTips(4),e=!0),e?this.interval=setInterval(this.showGameResult.bind(this),1e3):this.showGameResult()},e.prototype.showGameResult=function(){clearInterval(this.interval);var t=this.cardResult;this.grpResult.visible=!0,null!=this.maxUserData?(this.grpMax.visible=!0,this.grpMaxHead.source=this.maxUserData.headurl,this.grpMaxHead.width=this.grpMaxHead.height=70,this.grpMaxName.text=this.maxUserData.name):this.grpMax.visible=!1,this.grpBankerHead.source=this.bankerHead.source,this.grpBankerName.text=this.bankerName.text,this.grpBankerBeishu.text=t.pokes[0].num+"倍",this.grpBankerType.source="",this.labelBankerType.text=BRNNUtil.getInstance().getCardType2(t.pokes[0].type),parseInt(t.bankerWin)<0||0!=t.bankerWin;for(var e=0,i=0;4>i;i++){var n=parseInt(t.pokes[i+1].num);this["resultType"+i].text=BRNNUtil.getInstance().getCardType2(t.pokes[i+1].type),this["labResult0_"+i].text=n+"倍",this["labResult1_"+i].text=this.moneyStr(this.selfbetsNum[i+1]);var s=this.selfbetsNum[i+1];if(0!=s)if(this["labResult2_"+i].text="",1==t.result[i]){var r=0;r=this.isBanker?parseInt(t.pokes[0].num):parseInt(t.pokes[i+1].num),e+=parseInt(s)*(r+1)}else{var o=0;o=this.isBanker?parseInt(t.pokes[i+1].num):parseInt(t.pokes[0].num),1==o||(e-=parseInt(s)*(o-1))}else this["labResult2_"+i].text=0}for(var a=0,i=1;5>i;i++)a+=this.selfbetsNum[i];(e>0||0==e)&&(e*=1-this.curRate),e-=a,!this.isSysBanker,e>0&&this.resultCaijin>0||(0==this.cardResult.bomb?this.interval=setInterval(this.setStartBet.bind(this),4e3):this.interval=setInterval(this.boomShow.bind(this),3e3))},e.prototype.boomShow=function(){this.grpCaijin.visible=!1,this.imgBaoZhuang.visible=!0,clearInterval(this.interval),this.interval=setInterval(this.setStartBet.bind(this),4e3)},e.prototype.setStartBet=function(){this.resetGame(),this.grpResult.visible=!1,clearInterval(this.interval),this.showGameTips(2),this.grpCountdown.visible=!0,this.isSysBanker||this.isChangeBanker||(this.lastGameBankerNum--,this.labBankerLastNum.text="剩余"+Math.round(this.lastGameBankerNum)+"次"),this.isChangeBanker&&(this.isChangeBanker=!1,this.grpBankerList.visible=!1)},e.prototype.resetGame=function(){for(var t=0;4>t;t++)this["labBetsPool"+t].text="",this["labBetsSelf"+t].text="",egret.Tween.removeTweens(this["effectSelect"+t]);for(var t=0;5>t;t++){var e=this["bankerCard_"+t];e.source="",egret.Tween.removeTweens(e)}for(var i=0;4>i;i++){this["labCardResult"+i].text="",this["labCardType"+i].visible=!1,this.labCardTypeBanker.visible=!1;for(var n=0;5>n;n++){var e=this["grpCard_"+i+"_"+n];e.source="",egret.Tween.removeTweens(e)}}for(this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0};this.grpCoins.numChildren>0;)this.grpCoins.removeChildAt(0);for(var t=0;4>t;t++)this["effectSelect"+t].visible=!1;for(var s=0;4>s;s++)this["labTipsClick"+s].visible=!0;this.isCanBets=!0,this.isBets=!1,this.imgBaoZhuang.visible=!1,this.resultCaijin=0,this.grpCaijin.visible=!1,this.isCoinsReturn=!0,this.isCardEffectShow=!1,this.cdNum=10,this.cdTimer.start()},e.prototype.onTouchCardType=function(){this.grpSecondPanel.visible=!0,this.grpCardType.visible=!0,this.grpHistory.visible=!1},e.prototype.onTouchCardHistory=function(){},e.prototype.getHistoryCallback=function(t){for(var e=t.data,i=0;10>i;i++)if(i<e.length){this["grpHistroy"+i].visible=!0;for(var n=e[i],s=0;4>s;s++)this["grpHistroy"+s+"_"+i].source=1==n[s]?"nn.a8":"nn.a7"}else this["grpHistroy"+i].visible=!1;this.grpSecondPanel.visible=!0,this.grpCardType.visible=!1,this.grpHistory.visible=!0},e.prototype.onTouchCloseSecondPanel=function(){this.grpSecondPanel.visible=!1},e.prototype.onTouchRedBox=function(){},e.prototype.operateBoxComplete=function(){},e.prototype.updateDataGold=function(){},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this)},e.prototype.setTouchEnabled=function(){},e.prototype.playClickSound=function(t){xlLib.SoundMgr.instance.playSound(t+"_mp3")},e.prototype.Onquit=function(){if(UserInfo.getInstance().isGameStart)return void xlLib.TipsUtils.showFloatWordTips("游戏中！");var t={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token};xlLib.WebSocketMgr.getInstance().send(EventConst.niuniu_leave,t,function(t){xlLib.SceneMgr.instance.changeScene(Lobby)},this)},e.prototype.destroy=function(){this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buttonClose,this),this._btn_double_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_5.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.effectTouch0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.effectTouch1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.effectTouch2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.effectTouch3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buttonClose,this),EventUtil.removeEventListener(EventConst.players,this.addPlayers,this),EventUtil.removeEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.removeEventListener(EventConst.bet,this.onHogBack1,this),EventUtil.removeEventListener(EventConst.summary,this.over,this),null!=this.cdTimer&&this.cdTimer.removeEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e}(eui.Component);__reflect(BRNNView.prototype,"BRNNView");var ErBaGangView=function(t){function e(){var e=t.call(this)||this;return e.skinName="ErBaGangViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btn_erba_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickCloReBtn,this)},e.prototype.OnClickCloReBtn=function(t){xlLib.SoundMgr.instance.playSound("Special_menu_mp3"),xlLib.PopUpMgr.removePopUp(SafeBoxView,1)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.destroy=function(){this.btn_erba_return.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickCloReBtn,this)},e}(eui.Component);__reflect(ErBaGangView.prototype,"ErBaGangView");var SystemMsgItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SystemMsgItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.getMsgContent=function(t){this._label_content.text=t},e.prototype.getSelectedState=function(){return this._checkBox.selected},e.prototype.setSelectedState=function(t){this._checkBox.selected=t},e}(eui.Component);__reflect(SystemMsgItem.prototype,"SystemMsgItem");var SystemMsgTypeItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SystemMsgTypeItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){},e}(eui.ItemRenderer);__reflect(SystemMsgTypeItem.prototype,"SystemMsgTypeItem");var SystemMsgView=function(t){function e(){var e=t.call(this)||this;return e.skinName="SystemMsgViewSkin",e._group_msg=null,e._arr_msg=[],e._ver_item=[],e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this._btn_select_all.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelectAll,this),this._btn_delete.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDelete,this);var e=[{name:"系统通知",down_url:"btn_notice_0_png",up_url:"btn_notice_1_png"},{name:"推送消息",down_url:"btn_push_0_png",up_url:"btn_push_1_png"}];this._tabBar_meun.dataProvider=new eui.ArrayCollection(e),this._tabBar_meun.useVirtualLayout=!0,this._tabBar_meun.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.arr_msg_1=["菲斯塔中控台呈现“中间饱满，两边锋利”的造型，相比原先车型软绵绵的风格，不要硬朗太多。最为显眼就是正中央的10.25英寸中控彩色大屏，辨识度很高。但传统的物理按键都偏向了驾驶一侧","菲斯塔中控台呈现“中间饱满，两边锋利”的造型，相比原先车型软绵绵的风格，不要硬朗太多。最为显眼就是正中央的10.25英寸中控彩色大屏，辨识度很高。但传统的物理按键都偏向了驾驶一侧，菲斯塔中控台呈现“中间饱满，两边锋利”的造型，相比原先车型软绵绵的风格，不要硬朗太多。最为显眼就是正中央的10.25英寸中控彩色大屏，辨识度很高。但传统的物理按键都偏向了驾驶一侧","菲斯塔中控台呈现“中间饱满，两边锋利”的造型，相比原先车型软绵绵的风格，不要硬朗太多。最为显眼就是正中央的10.25英寸中控彩色大屏，辨识度很高。但传统的物理按键都偏向了驾驶一侧，最为显眼就是正中央的10.25英寸中控彩色大屏，辨识度很高。但传统的物理按键都偏向了驾驶一侧"],this.arr_msg_2=["最为显眼就是正中央的10.25英寸中控彩色大屏，辨识度很高。但传统的物理按键都偏向了驾驶一侧","菲斯塔中控台呈现“中间饱满，两边锋利”的造型，不要硬朗太多。最为显眼就是正中央的10.25英寸中控彩色大屏，辨识度很高。但传统的物理按键都偏向了驾驶一侧","菲斯塔中控台呈现“中间饱满，两边锋利”的造型"],this._arr_msg=this.arr_msg_1,this._group_msg=this._group_msg_notice,this.onAcceptMessage()},e.prototype.onBarItemTap=function(t){this._btn_viewStack.selectedIndex=t.itemIndex,0==t.itemIndex?(this._arr_msg=this.arr_msg_1,this._group_msg=this._group_msg_notice,this.onAcceptMessage()):(this._arr_msg=this.arr_msg_2,this._group_msg=this._group_msg_push,this.onAcceptMessage())},e.prototype.onAcceptMessage=function(){this._ver_item=[],this._group_msg.removeChildren();for(var t=10,e=0;e<this._arr_msg.length;e++)if(null!=this._arr_msg[e]){var i=new SystemMsgItem;i.getMsgContent(this._arr_msg[e]),i.x=0,i.y=i.height*e+40*e+10,i.y=t,t=i.y+i.height+40,this._group_msg.addChild(i),this._ver_item.push(i)}},e.prototype.onSelectAll=function(){for(var t=0;t<this._ver_item.length;t++)this._ver_item[t].setSelectedState(!0)},e.prototype.onDelete=function(){for(var t=[],e=0;e<this._ver_item.length;e++)1==this._ver_item[e].getSelectedState()||t.push(this._arr_msg[e]);this._arr_msg=t,this.onAcceptMessage()},e.prototype.dispose=function(){xlLib.PopUpMgr.removePopUp(this,1)},e.prototype.destroy=function(){this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this._btn_select_all.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this._btn_delete.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this._tabBar_meun.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this._group_msg=null,this._arr_msg=[],this._ver_item=[]},e}(eui.Component);__reflect(SystemMsgView.prototype,"SystemMsgView");var InfoBox=function(t){function e(e){void 0===e&&(e=16777215);var i=t.call(this)||this;return i.skinName="InfoBoxSkin",i.tab_txt.textColor=e,i.initEventListener(),i}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isShowMenu(!1)},e.prototype.initEventListener=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchStageHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.table_list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClickHandler,this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},e.prototype.isShowMenu=function(t){this.isShow=t,this.scroller.visible=t,this.table_list.visible=t,this.bgImg.visible=t},e.prototype.onTouchStageHandler=function(t){t.target!=this.sel_btn&&t.target!=this.combox_grp&&t.target!=this.scroller&&t.target!=this.table_list&&this.isShowMenu(!1)},e.prototype.itemClickHandler=function(t){var e=t.target;e&&(this.cb&&this.cb.call(this.thisArg,e.data),e.data&&(this.tab_txt.text=e.data.name),this.isShowMenu(!1))},e.prototype.onTouchHandler=function(t){(t.target==this.sel_btn||t.target==this.combox_grp)&&this.isShowMenu(!this.isShow)},e.prototype.setInfoBoxData=function(t,e,i){this.cb=e,this.thisArg=i,this.arrayCollection=new eui.ArrayCollection(t),this.table_list.dataProvider=this.arrayCollection,this.table_list.itemRenderer=InfoBoxItem,this.scroller.viewport=this.table_list,this.tab_txt.text=t[0].name},e.prototype.destroy=function(){this.cb=null,this.thisArg=null,this.scroller.stopAnimation(),this.table_list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClickHandler,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchStageHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)},e}(eui.Component);__reflect(InfoBox.prototype,"InfoBox");var InfoBoxItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="InfoBoxItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){this.des_txt.text=this.data.name},e}(eui.ItemRenderer);__reflect(InfoBoxItem.prototype,"InfoBoxItem");var PlayerInfoTypeItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="PlayerInfoTypeItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){},e}(eui.ItemRenderer);__reflect(PlayerInfoTypeItem.prototype,"PlayerInfoTypeItem");var PlayerInfoView=function(t){function e(){var e=t.call(this)||this;return e.skinName="PlayerInfoViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickRetuBtn,this),this.btn_bind_number.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickBindPhoneNum,this),this.btn_myhead.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickMyHead,this),this.btn_vip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickVipBtn,this),this.btn_bindzfb.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickBindzfbBtn,this),this.btn_bindcard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickBindBanCard,this),this.select_sex.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickSelectSex,this),this.btn_changezfb.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickChangezfb,this),this.btn_changebancard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickChangeBankCard,this),this.btn_wxti_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickWxtsRetu,this),this.btn_xiugai_name.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnclickCangeName,this);var e=[{name:"基本资料",down_url:"btn_info_down_png",up_url:"btn_info_up_png"},{name:"我的钱包",down_url:"btn_mywallet_down_png",up_url:"btn_mywallet_up_png"},{name:"我的背包",down_url:"btn_pack_down_png",up_url:"btn_pack_up_png"}];this._playerInfo_meun.dataProvider=new eui.ArrayCollection(e),this._playerInfo_meun.useVirtualLayout=!0,this._playerInfo_meun.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this)},e.prototype.onBarItemTap=function(t){this._viewstack_viewInerface.selectedIndex=t.itemIndex,xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.OnClickRetuBtn=function(t){xlLib.SoundMgr.instance.playSound("Special_menu_mp3"),xlLib.PopUpMgr.removePopUp(e,1)},e.prototype.OnClickMyHead=function(t){this._MaxBtnHid(),this._MinBtnHid(),this.group_chang_head.visible=!0,xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.OnClickVipBtn=function(t){this._MaxBtnHid(),this._MinBtnHid(),this.group_Vip.visible=!0,xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.OnClickSelectSex=function(t){xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.OnclickCangeName=function(t){this._MaxBtnHid(),this._MinBtnHid(),this.group_changename.visible=!0,xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.OnClickBindPhoneNum=function(t){this._MaxBtnHid(),this._MinBtnHid(),this.group_bind_number.visible=!0,xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.OnClickBindzfbBtn=function(t){this._MaxBtnHid(),this._MinBtnHid(),this.group_bindzfb.visible=!0,xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.OnClickBindBanCard=function(t){this._MaxBtnHid(),this._MinBtnHid(),this.group_bind_bankCard.visible=!0,xlLib.SoundMgr.instance.playSound("Special_menu_mp3");var e=new InfoBox;e.x=420,e.y=410;var i=[new InfoBoxData({id:1,name:"建设银行",data:null}),new InfoBoxData({id:2,name:"招商银行",data:null}),new InfoBoxData({id:3,name:"中国银行",data:null}),new InfoBoxData({id:4,name:"平安银行",data:null}),new InfoBoxData({id:5,name:"工商银行",data:null}),new InfoBoxData({id:6,name:"农业银行",data:null}),new InfoBoxData({id:7,name:"渤海银行",data:null}),new InfoBoxData({id:8,name:"汉口银行",data:null})];e.setInfoBoxData(i,this.selectIndexFunction,this),this.group_bind_bankCard.addChild(e)},e.prototype.selectIndexFunction=function(){},e.prototype.OnClickChangezfb=function(t){this._MaxBtnHid(),this._MinBtnHid(),this.group_wxti.visible=!0,xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.OnClickChangeBankCard=function(t){this._MaxBtnHid(),this._MinBtnHid(),this.group_wxti.visible=!0,xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.OnClickWxtsRetu=function(t){xlLib.SoundMgr.instance.playSound("Special_menu_mp3"),xlLib.TipsUtils.showFloatWordTips("温馨提示")},e.prototype._MaxBtnHid=function(){this.group_Info.visible=!1,this.group_wallet.visible=!1,this.group_pack.visible=!1,this.group_bind_number.visible=!1,this.group_chang_head.visible=!1,this.group_Vip.visible=!1,this.group_bindzfb.visible=!1,this.group_bind_bankCard.visible=!1,this.group_changename.visible=!1},e.prototype._MinBtnHid=function(){this.group_tittle.visible=!1,this.group_rechang_btn.visible=!1},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.destroy=function(){this.btn_return.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickRetuBtn,this),this.btn_bind_number.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickBindPhoneNum,this),this.btn_myhead.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickMyHead,this),this.btn_vip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickVipBtn,this),this.select_sex.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickSelectSex,this),this.btn_bindzfb.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickBindzfbBtn,this),this.btn_bindcard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickBindBanCard,this),this.btn_changezfb.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickChangezfb,this),this.btn_changebancard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickChangeBankCard,this),this.btn_wxti_return.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickWxtsRetu,this),this.btn_xiugai_name.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnclickCangeName,this)},e}(eui.Component);__reflect(PlayerInfoView.prototype,"PlayerInfoView");var NiuJiao=function(t){function e(){var e=t.call(this)||this;return e.skinName="NiuJiaoSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.niujiao.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.niujiao.play(0)},e.prototype.play=function(){this.niujiao.play(0)},e.prototype.stop=function(){this.niujiao.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(NiuJiao.prototype,"NiuJiao",["INiuNiuBetEffect"]);var NiuNBei=function(t){function e(){var e=t.call(this)||this;return e.skinName="NiuNBeiSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.niuniuanmin.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.niuniuanmin.stop()},e.prototype.play=function(t){this.image0.source=t,this.niuniuanmin.play(0)},e.prototype.stop=function(){this.niuniuanmin.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(NiuNBei.prototype,"NiuNBei");var NiuZhang0=function(t){function e(){var e=t.call(this)||this;return e.skinName="DZHEffSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.qiangzhuang1.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.visible=!1,this.qiangzhuang1.stop()},e.prototype.play=function(){this.visible=!0,this.qiangzhuang1.play(0)},e.prototype.stop=function(){this.visible=!1,this.qiangzhuang1.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(NiuZhang0.prototype,"NiuZhang0");var NiuZhang1=function(t){function e(){var e=t.call(this)||this;return e.skinName="DZVEffSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.qiangzhuang2.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.visible=!1,this.qiangzhuang2.stop()},e.prototype.play=function(){this.visible=!0,this.qiangzhuang2.play(0)},e.prototype.stop=function(){this.visible=!1,this.qiangzhuang2.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(NiuZhang1.prototype,"NiuZhang1");var QZNNGameStart=function(t){function e(){var e=t.call(this)||this;return e.skinName="QZNNGameStartSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.kaishiyouxi.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.kaishiyouxi.stop(),this.parent&&this.parent.removeChild(this)},e.prototype.play=function(){this.playClickSound(QZNNUtil.getInstance().getSoundEffect(14)),this.kaishiyouxi.play(0)},e.prototype.playClickSound=function(t){xlLib.SoundMgr.instance.playSound(t+"_mp3")},e.prototype.stop=function(){this.kaishiyouxi.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(QZNNGameStart.prototype,"QZNNGameStart");var QZNNGoldFly=function(t){function e(){var e=t.call(this)||this;return e.skinName="QZNNGoldFlySkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.win.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.win.stop()},e.prototype.play=function(){this.win.play(0)},e.prototype.stop=function(){this.win.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(QZNNGoldFly.prototype,"QZNNGoldFly");var QZNNHead=function(t){function e(){var e=t.call(this)||this;return e.skinName="QZNNHeadSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this);var e=new egret.Shape,i=[13627658,16777215,6881224,8218879],n=0,s=0,r=0;r=n%4,e.graphics.beginFill(i[r]),e.graphics.drawRect(0,30*n+15,500,20),e.graphics.beginFill(i[r]),e.graphics.drawRoundRect(100*s+n%2*50,n%2==0?n/2*60:(n-1)/2*60+30,50,50,13,13),e.graphics.endFill(),e.graphics.beginFill(i[3!=r?r+1:0]),e.graphics.drawRoundRect(100*s+n%2*50+10,n%2==0?n/2*60+10:(n-1)/2*60+30+10,30,30,10,10),e.graphics.endFill(),e.graphics.lineStyle(4,13382451,1),e.graphics.drawRoundRect(50,30,200,300,20,20),e.graphics.endFill(),this.addChild(e)
},e.prototype.setUserInfo=function(t,e,i,n){this["imghead"+t].source=n,this["imghead"+t].source=n,this["labelName"+t].text=e,this["labelGold"+t].text=i},e.prototype.setZhuang=function(t){t&&this.addNNbankerEff()},e.prototype.removeNNbankerEff=function(){this.nnbankerEff&&(this.nnbankerEff.stop(),this.nnbankerEff.parent&&this.nnbankerEff.parent.removeChild(this.nnbankerEff))},e.prototype.addNNbankerEff=function(){this.nnbankerEff||(this.nnbankerEff=xlLib.DisplayUtils.createMovieClicp("nn_banker","nn_banker"),this.nnbankerEff.x=90,this.nnbankerEff.y=70,this.nnbankerEff.frameRate=10,this.nnbankerEff.touchEnabled=!1),this.addChild(this.nnbankerEff),this.nnbankerEff.gotoAndPlay(0,1)},e.prototype.setGold=function(t){this.labelGold.text=t+""},e.prototype.destroy=function(){this.removeNNbankerEff()},e}(eui.Component);__reflect(QZNNHead.prototype,"QZNNHead");var QZNNHEff=function(t){function e(){var e=t.call(this)||this;return e.skinName="QZNNHEffSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.win.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.win.stop()},e.prototype.play=function(){this.win.play(0)},e.prototype.stop=function(){this.win.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(QZNNHEff.prototype,"QZNNHEff");var QZNNHHeadEff=function(t){function e(){var e=t.call(this)||this;return e.skinName="QZNNHHeadEffSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.qznnwin.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.qznnwin.play(0)},e.prototype.play=function(){this.qznnwin.play(0)},e.prototype.stop=function(){this.qznnwin.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(QZNNHHeadEff.prototype,"QZNNHHeadEff");var QZNNroomView=function(t){function e(){var e=t.call(this)||this;e.skinName="QZNNroomViewSkin",xlLib.SoundMgr.instance.stopBgMusic();var i=["qznn_bg_mp3"];return xlLib.SoundMgr.instance.playBgMusic(i),e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this._coin_label.text=GlobalFunction.Formatconversion(UserInfo.getInstance().goldcoins),this._btn_cjc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this),EventUtil.addEventListener(EventConst.onGameStatusChange,this.GameStatus,this)},e.prototype.GameStatus=function(t){200==t._obj.code&&xlLib.SceneMgr.instance.changeScene(QZNNScene)},e.prototype.onEnterGame=function(){if(this.playClickSound(),this.gameIconData){var t=UserInfo.getInstance().getGameDataByindex(this.gameIconData.game),e=t.getTypeDataByindex(this.gameIconData.type),i=e.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),n={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:i.id};xlLib.WebSocketMgr.getInstance().send(EventConst.joinroom,n,function(t){},this)}},e.prototype.setGameIconData=function(t){this.gameIconData=t},e.prototype.dispose=function(){xlLib.SoundMgr.instance.stopBgMusic();var t=["hall_bg_mp3"];xlLib.SoundMgr.instance.playBgMusic(t),xlLib.PopUpMgr.removePopUp(this,1)},e.prototype.playClickSound=function(){xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.destroy=function(){this.gameIconData=null,this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),EventUtil.removeEventListener(EventConst.onGameStatusChange,this.GameStatus,this)},e}(eui.Component);__reflect(QZNNroomView.prototype,"QZNNroomView",["eui.UIComponent","egret.DisplayObject"]);var QZNNScene=function(t){function e(){var e=t.call(this)||this;return e.QZNNView=new QZNNView,e.uiLayer.addChild(e.QZNNView),e}return __extends(e,t),e.prototype.destroy=function(){this.QZNNView.destroy(),t.prototype.destroy.call(this)},e.prototype.resize=function(){this.QZNNView&&this.QZNNView.resize()},e}(xlLib.GameScene);__reflect(QZNNScene.prototype,"QZNNScene");var QZNNTongpei=function(t){function e(){var e=t.call(this)||this;return e.skinName="QZNNTongpeiSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.shibai.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.shibai.stop(),this.parent&&this.parent.removeChild(this)},e.prototype.play=function(){this.visible=!0,this.playClickSound(QZNNUtil.getInstance().getSoundEffect(17)),this.shibai.play(0)},e.prototype.playClickSound=function(t){xlLib.SoundMgr.instance.playSound(t+"_mp3")},e.prototype.stop=function(){this.visible=!1,this.shibai.stop()},e.prototype.destroy=function(){this.shibai.removeEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e}(eui.Component);__reflect(QZNNTongpei.prototype,"QZNNTongpei");var QZNNTongsha=function(t){function e(){var e=t.call(this)||this;return e.skinName="QZNNTongshaSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.tongsha.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.tongsha.stop(),this.parent&&this.parent.removeChild(this)},e.prototype.play=function(){this.visible=!0,this.playClickSound(QZNNUtil.getInstance().getSoundEffect(16)),this.tongsha.play(0)},e.prototype.playClickSound=function(t){xlLib.SoundMgr.instance.playSound(t+"_mp3")},e.prototype.stop=function(){this.visible=!1,this.tongsha.stop()},e.prototype.destroy=function(){this.tongsha.removeEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e}(eui.Component);__reflect(QZNNTongsha.prototype,"QZNNTongsha");var QZNNUtil=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getBetNumber=function(t){switch(t){case 0:return Math.pow(10,4);case 1:return Math.pow(10,5);case 2:return Math.pow(10,6);case 3:return Math.pow(10,7);case 4:return 5*Math.pow(10,7);case 5:return Math.pow(10,8)}},t.prototype.getMsgSource=function(t){var e="";switch(t){case 2:e="nn.d2";break;case 3:e="nn.d3";break;case 4:e="nn.d4";break;case 5:e="nn.d5"}return e},t.prototype.getCoinsPos=function(t){var e=new egret.Point;switch(t){case 1:e.x=195,e.y=523;break;case 2:e.x=383,e.y=523;break;case 3:e.x=195,e.y=633;break;case 4:e.x=383,e.y=633}return e},t.prototype.getCardType2=function(t){switch(t){case 0:return"无牛";case 1:return"牛一";case 2:return"牛二";case 3:return"牛三";case 4:return"牛四";case 5:return"牛五";case 6:return"牛六";case 7:return"牛七";case 8:return"牛八";case 9:return"牛九";case 10:return"牛牛";case 11:return"四炸";case 12:return"五花牛";case 13:return"五小牛"}},t.prototype.getCardBmpUrl=function(t){switch(t){case 0:case 1:case 2:case 3:case 4:case 5:case 6:return"qznntype1_tex"+t+"_png";case 7:return"qznntype2_tex1_png";case 8:return"qznntype2_tex2_png";case 9:return"qznntype2_tex3_png";case 10:return"qznntype3_tex1_png";case 11:return"qznntype6_tex1_png";case 12:return"qznntype4_tex1_png";case 13:return"qznntype5_tex1_png";case 14:return"qznntype7_tex1_png"}},t.prototype.getCardType=function(t){switch(t){case 0:return"nn.n1";case 1:return"nn.n2";case 2:return"nn.n3";case 3:return"nn.n4";case 4:return"nn.n5";case 5:return"nn.n6";case 6:return"nn.n7";case 7:return"nn.n8";case 8:return"nn.n9";case 9:return"nn.n10";case 10:return"nn.n11";case 11:return"nn.n13";case 12:return"nn.n14";case 13:return"nn.n12"}},t.prototype.getCardMusicType=function(t){switch(t){case 0:return"nn.niu0";case 1:return"nn.niu1";case 2:return"nn.niu2";case 3:return"nn.niu3";case 4:return"nn.niu4";case 5:return"nn.niu5";case 6:return"nn.niu6";case 7:return"nn.niu7";case 8:return"nn.niu8";case 9:return"nn.niu9";case 10:return"nn.niuniu";case 11:return"nn.playNiuZhadan";case 12:return"nn.playNiu5hua";case 13:return"nn.playNiuXiao5"}},t.prototype.coinsType=function(t){var e=[],i=0,n="";t=Math.round(t/1e4),t>0&&10>t?(i=t,n="nn.b1a"):t>9&&100>t?(i=t/10,n="nn.b2a"):t>99&&1e3>t?(i=t/100,n="nn.b3a"):t>999&&5e3>t?(i=t/1e3,n="nn.b4a"):t>4999&&1e4>t?(i=t/5e3,n="nn.b5a"):(i=t/1e4,n="nn.b6a");for(var s=0;s<Math.round(i);s++){var r=new eui.Image(n),o=this.coinPos();r.x=o.x,r.y=o.y,e.push(r)}return e},t.prototype.coinPos=function(){var t=new egret.Point,e=Math.floor(4*Math.random());switch(e){case 0:t.x=-100,t.y=400;break;case 1:t.x=-100,t.y=800;break;case 2:t.x=650,t.y=400;break;case 3:t.x=650,t.y=800}return t},t.prototype.getSoundEffect=function(t){switch(t){case 0:return"qznn_bg";case 1:return"nn.jackpot";case 2:return"nn.start";case 3:return"nn.end";case 4:return"nn.ts";case 5:return"nn.tp";case 6:return"nn.dealCard";case 7:return"nn.openCard";case 8:return"nn.stake";case 9:return"gold_diaoluo";case 10:return"Special_menu";case 11:return"nn_LampEnd";case 12:return"nn_montageerror";case 13:return"nn_LampRun";case 14:return"nn_gamestart";case 15:return"nn_wingold";case 16:return"qznn_win_all";case 17:return"qznn_tongpei"}},t.instance=null,t}();__reflect(QZNNUtil.prototype,"QZNNUtil");var QZNNVEff=function(t){function e(){var e=t.call(this)||this;return e.skinName="QZNNVEffSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.win.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.win.stop()},e.prototype.play=function(){this.win.play(0)},e.prototype.stop=function(){this.win.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(QZNNVEff.prototype,"QZNNVEff");var QZNNVHeadEff=function(t){function e(){var e=t.call(this)||this;return e.skinName="QZNNVHeadEffSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.qznnwin.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.qznnwin.play(0)},e.prototype.play=function(){this.qznnwin.play(0)},e.prototype.stop=function(){this.qznnwin.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(QZNNVHeadEff.prototype,"QZNNVHeadEff");var QZNNVictory=function(t){function e(){var e=t.call(this)||this;return e.skinName="QZNNVictorySkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.youxishengli.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.youxishengli.stop(),this.parent&&this.parent.removeChild(this)},e.prototype.play=function(){this.playClickSound(QZNNUtil.getInstance().getSoundEffect(15)),this.youxishengli.play(0)},e.prototype.playClickSound=function(t){xlLib.SoundMgr.instance.playSound(t+"_mp3")},e.prototype.stop=function(){this.youxishengli.stop()},e.prototype.destroy=function(){this.youxishengli.removeEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e}(eui.Component);__reflect(QZNNVictory.prototype,"QZNNVictory");var QZNNView=function(t){function e(){var e=t.call(this)||this;return e.r=null,e.arr=[null,null,null],e.score=[0,0,0,0,0],e.score1=[0,0,0,0,0],e.arr_fen=[0,0,0],e.arr_fen1=[0,0,0,0,0],e.multipleList=[0,0,0,0,0],e.game_result=0,e.niu=0,e.zijipokes=[0,0,0,0,0],e.turn_score_arr=[],e.win_eff_err=[],e.goldFlyAnimatorarr=[],e.intnum=[0,0,0,0],e.num01=0,e.startCardRotation=!1,e.interval=-1,e.selfbetsNum={},e.betsPostion=-1,e.betsNum=0,e.cardResult=null,e.isChangeBanker=!1,e.changeBankerObj={},e.isCanBets=!0,e.poolBetArray={},e.limitGold=0,e.limitVip=0,e.curBankerRanking=-1,e.isApplyBanker=!1,e.lastGameBankerNum=0,e.isSysBanker=!1,e.orginBankerCardPos=[],e.orginPinCardPos=[],e.orginPlayerCardPos=[],e.orginZhanCardPos=[],e.orginPlayerHeadPos=[],e.isBanker=!1,e.isBets=!1,e.maxUserData=null,e.banker_total_gold=0,e.isBoomBanker=!1,e.resultCaijin=0,e.totalCaijin=0,e.cdNum=10,e.lastTouchBetIndex=-1,e.coinsNumArr={},e.isCoinsReturn=!0,e.curRate=0,e.lastTouchBetTime=0,e.isCardEffectShow=!1,e.zhaungIndex=0,e.turn0=0,e.timeNum=0,e.betNum=[],e.cur_Num=0,e.bet_data=[],e.flyIntval=0,e.flyBankerIndex=0,e.flyIntval_1=0,e.flyIntval_2=0,e.flyIntval_3=0,e.flyIntval_4=0,e.flyIndex_1=0,e.flyIndex_2=4,e.flyIndex_3=4,e.flyIndex_4=0,e.flyPaiTime=500,e.faPaiTime=200,e.effectPlayerIndex=0,e.skinName="QZNNViewSkin",e}return __extends(e,t),e.prototype.addNNEff=function(){var t=this;this.nnEff||(this.nnEff=xlLib.DisplayUtils.createAsyncMovieClicp("nn_myCardType10","nn_myCardType10",!1),this.nnEff.x=xlLib.Global.screenWidth/2,this.nnEff.y=xlLib.Global.screenHeight/2,this.nnEff.frameRate=10,this.nnEff.touchEnabled=!1),this.nnEff.gotoAndPlay(0,1),this.addChild(this.nnEff),this.nnEff.addEventListener(egret.Event.COMPLETE,function(e){t.nnEff.parent&&t.nnEff.parent.removeChild(t.nnEff)},this)},e.prototype.addWhnEff=function(){var t=this;this.whnEff||(this.whnEff=xlLib.DisplayUtils.createAsyncMovieClicp("nn_myCardType14","nn_myCardType14",!1),this.whnEff.x=xlLib.Global.screenWidth/2,this.whnEff.y=xlLib.Global.screenHeight/2,this.whnEff.frameRate=10,this.whnEff.touchEnabled=!1),this.whnEff.gotoAndPlay(0,1),this.addChild(this.whnEff),this.whnEff.addEventListener(egret.Event.COMPLETE,function(e){t.whnEff.parent&&t.whnEff.parent.removeChild(t.whnEff)},this)},e.prototype.childrenCreated=function(){this.getOrginCardPos(),this.addEvent(),this.initData(),this.labelHead0.text=UserInfo.getInstance().username,this.labelGold0.text=""+GlobalFunction.Formatconversion(UserInfo.getInstance().goldcoins),xlLib.PopUpMgr.addPopUp(Inthematch,this,!0,!0,null,1),UserInfo.getInstance().isGameStart=!0,this.texiao=new NiuJiao,this.texiao.x=-180,this.texiao.y=-150,this._niujia.addChild(this.texiao)},e.prototype.initData=function(){this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this.grpCard.visible=!0,this._btn_switch.visible=!1,this._group_qiang.visible=!1,this.grpCountdown.visible=!1,this._whether_.visible=!0,this._whether_0.visible=!1,this._whether_1.visible=!1,this._whether_2.visible=!1,this._whether_3.visible=!1,this._img_0.visible=!1,this._img_1.visible=!1,this._img_2.visible=!1,this._img_3.visible=!1,this._xiabei.visible=!0,this._xiabei_0_0_0.visible=!1,this._xiabei_0_0_1.visible=!1,this._xiabei_0_0_2.visible=!1,this._xiabei_0_0_3.visible=!1,this._xiabei_0_0.visible=!1,this._xiabei_0.visible=!1,this._xiabei_0_1.visible=!1,this._xiabei_1.visible=!1,this._xiabei_0_2.visible=!1,this._xiabei_2.visible=!1,this._xiabei_0_3.visible=!1,this._xiabei_3.visible=!1,this._jixu.visible=!1,this._pingpai.visible=!1,this._my_pai.visible=!1,this.arr=[],this._zhi_0.text="",this._zhi_1.text="",this._zhi_2.text="",this._zhi_3.text="",this._btn_switch.visible=!1,this._btn_double_1.visible=!1,this._btn_double_2.visible=!1,this._btn_double_3.visible=!1,this._btn_double_4.visible=!1,this._btn_double_5.visible=!1,this.beishu_0.visible=!1,this.beishu_1.visible=!1,this.beishu_2.visible=!1,this.beishu_3.visible=!1,this.beishu_4.visible=!1,this.beishu_0_0.visible=!1,this.beishu_0_1.visible=!1,this.beishu_0_2.visible=!1,this.beishu_0_3.visible=!1,this.beishu_0_4.visible=!1,this.bs_img_0.visible=!1,this.bs_img_1.visible=!1,this.bs_img_2.visible=!1,this.bs_img_3.visible=!1,this.bs_img_4.visible=!1,this.pinpaiType.visible=!1,this.pinpaiType0.visible=!1,this.pinpaiType1.visible=!1,this.pinpaiType2.visible=!1,this._xiabei_0.x=295.61,this._xiabei_1.x=368.16,this._xiabei_2.x=530.48,this._xiabei_3.x=1146.78,this.grpHead0.visible=!1,this.grpHead1.visible=!1,this.grpHead2.visible=!1,this.grpHead3.visible=!1,this._tishi.visible=!1,this._zhuang_img0.visible=!1,this._zhuang_img1.visible=!1,this._zhuang_img2.visible=!1,this._zhuang_img3.visible=!1,this.zhaungIndex=0;for(var t=0;5>t;t++){var e=this["grpCard_0_"+t];this.grpCard.setChildIndex(e,5-t)}},e.prototype.getOrginCardPos=function(){for(var t=0;5>t;t++){var e=this["bankerCard_"+t];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,this.orginBankerCardPos[t]=i;var e=this["_puke_"+t];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,this.orginPinCardPos[t]=i}this.labCardTypeBanker.visible=!1;for(var n=0;3>n;n++){this["labCardType"+n].visible=!1;for(var s=[],r=0;5>r;r++){var e=this["grpCard_"+n+"_"+r];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,s[r]=i}this.orginPlayerCardPos[n]=s}for(var o=0;4>o;o++){0!=o&&this.setUserInfo(o,"","","");var e=this["grpCard_z_"+o];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,this.orginZhanCardPos[o]=i}for(var a=0;4>a;a++){var i=new egret.Point;0==a||2==a?(i.x=this["grpHead"+a].x+15,i.y=this["grpHead"+a].y+15):(i.x=this["grpHead"+a].x+25,i.y=this["grpHead"+a].y+40),this.orginPlayerHeadPos[a]=i}},e.prototype.resize=function(){},e.prototype.onRestartGame=function(){xlLib.PopUpMgr.addPopUp(Inthematch,this,!0,!0,null,1);var t=UserInfo.getInstance().getGameDataByindex(Const.GAME_NIUNIU),e=t.getTypeDataByindex(Const.TYPE_QZNN),i=e.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),n={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:i.id};xlLib.WebSocketMgr.getInstance().send(EventConst.joinroom,n,function(t){},this),UserInfo.getInstance().isGameStart=!0,this.resetGame()},e.prototype.onClick=function(t){if(this.playClickSound(QZNNUtil.getInstance().getSoundEffect(10)),t.target==this._btn_begin)this.onRestartGame();else if(t.target==this._btn_meun);else if(t.target==this._btn_buqiang)this.sendamessage(EventConst.niuniu_dohog,0);else if(t.target==this._btn_qiang_1)this.sendamessage(EventConst.niuniu_dohog,1);else if(t.target==this._btn_qiang_2)this.sendamessage(EventConst.niuniu_dohog,2);else if(t.target==this._btn_qiang_3)this.sendamessage(EventConst.niuniu_dohog,3);else if(t.target==this._btn_qiang_4)this.sendamessage(EventConst.niuniu_dohog,4);else if(t.target==this._btn_double_1)this.sendamessage1(EventConst.niuniu_dobet,this.multipleList[0]);else if(t.target==this._btn_double_2)this.sendamessage1(EventConst.niuniu_dobet,this.multipleList[1]);else if(t.target==this._btn_double_3)this.sendamessage1(EventConst.niuniu_dobet,this.multipleList[2]);else if(t.target==this._btn_double_4)this.sendamessage1(EventConst.niuniu_dobet,this.multipleList[3]);else if(t.target==this._btn_double_5)this.sendamessage1(EventConst.niuniu_dobet,this.multipleList[4]);else if(t.target==this._youniu){var e=this.arr_fen[0]+this.arr_fen[1]+this.arr_fen[2];0!=this.arr_fen[0]&&0!=this.arr_fen[1]&&0!=this.arr_fen[2]?e%10==0?(this._pingpai.visible=!1,this.texiao.stop(),this._my_pai.visible=!0,this.returnpinpai(1)):(this.playClickSound(QZNNUtil.getInstance().getSoundEffect(12)),this.ppcuowu()):this.ppcuowu()}else t.target==this._meiniu&&(0!=this.niu?(this.playClickSound(QZNNUtil.getInstance().getSoundEffect(12)),this.ppcuowu()):(this._pingpai.visible=!1,this.texiao.stop(),this._my_pai.visible=!0,this.returnpinpai(0)))},e.prototype.returnpinpai=function(t){if(0==t){var e=UserInfo.getInstance().getGameDataByindex(Const.GAME_NIUNIU),i=e.getTypeDataByindex(Const.TYPE_QZNN),n=i.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),s={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:n.id,centerCard:[this.score1[0],this.score1[1],this.score1[2],this.score1[3],this.score1[4]]};xlLib.WebSocketMgr.getInstance().send(EventConst.niuniu_manual,s,function(t){},this)}else if(1==t){for(var r=3,o=0;o<this.arr_fen1.length;o++)for(var a=0;a<this.score1.length;a++)this.arr_fen1[o]!=this.score1[a]||(this.score1[a]=null);for(var h=0;h<this.score1.length;h++)null!==this.score1[h]&&(this.arr_fen1[r]=this.score1[h],r++);var l=UserInfo.getInstance().getGameDataByindex(Const.GAME_NIUNIU),c=l.getTypeDataByindex(Const.TYPE_QZNN),n=c.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),s={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:n.id,centerCard:[this.arr_fen1[0],this.arr_fen1[1],this.arr_fen1[2],this.arr_fen1[3],this.arr_fen1[4]]};xlLib.WebSocketMgr.getInstance().send(EventConst.niuniu_manual,s,function(t){},this)}},e.prototype.ppcuowu=function(){var t=this;this.pinpaicuowu||(this.pinpaicuowu=xlLib.DisplayUtils.createMovieClicp("pinpaicuowu","pinpaicuowu"),this.pinpaicuowu.x=1200,this.pinpaicuowu.y=580,this.pinpaicuowu.frameRate=10,this.pinpaicuowu.touchEnabled=!1),this.pinpaicuowu.gotoAndPlay(0,1),this.addChild(this.pinpaicuowu),this.pinpaicuowu.addEventListener(egret.Event.COMPLETE,function(e){t.pinpaicuowu.parent&&t.pinpaicuowu.parent.removeChild(t.pinpaicuowu)},this)},e.prototype.sendamessage=function(t,e){var i={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,data:e};xlLib.WebSocketMgr.getInstance().send(t,i,function(t){},this),this._group_qiang.visible=!1},e.prototype.sendamessage1=function(t,e){var i={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,data:e};xlLib.WebSocketMgr.getInstance().send(t,i,function(t){},this)},e.prototype.addEvent=function(){this._btn_meun.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_begin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_buqiang.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._youniu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._meiniu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Onquit,this),EventUtil.addEventListener(EventConst.onUserShowOrderUpdate,this.onShowOrder,this),EventUtil.addEventListener(EventConst.players,this.addPlayers,this),EventUtil.addEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.addEventListener(EventConst.onGameStatusChange,this.GameStatus,this),EventUtil.addEventListener(EventConst.onUserBetOrderUpdate,this.OnBetUpdate,this),EventUtil.addEventListener(EventConst.onUserHogOrderUpdate,this.OnHogUpdate,this),this._puke_0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Suapai,this),this._puke_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Suapai,this),this._puke_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Suapai,this),this._puke_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Suapai,this),this._puke_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Suapai,this)},e.prototype.onShowOrder=function(t){t._obj.index>0?this["pinpaiType"+(t._obj.index-1)].visible=!0:(this.pinpaiType.visible=!0,this._tishi.visible=!0,this._tishi_text.text="请等待其他玩家拼牌...")},e.prototype.GameStatus=function(t){switch(t._obj.roomStatus){case 0:break;case 1:break;case 2:break;case 3:this.onHogBack(t);break;case 4:this.onbetBack(t);break;case 5:break;case 6:this.onThecardtype(t);break;case 7:this.oncloseanaccount(t);break;case 8:}},e.prototype.onHogBack=function(t){xlLib.PopUpMgr.removePopUp(Inthematch,1),this.grpCountdown.visible=!0,this.startCountDown(t._obj.seconds),this._group_qiang.visible=!0,this.gamestarEff||(this.gamestarEff=new QZNNGameStart,this.gamestarEff.anchorOffsetX=this.gamestarEff.width/2,this.gamestarEff.anchorOffsetY=this.gamestarEff.height/2,this.gamestarEff.x=xlLib.Global.screenWidth/2,this.gamestarEff.y=xlLib.Global.screenHeight/2),this.gamestarEff.play(),this.addChild(this.gamestarEff)},e.prototype.addNNVictoryEffect=function(){this.nnvictoryEffect||(this.nnvictoryEffect=new QZNNVictory,this.nnvictoryEffect.anchorOffsetX=this.nnvictoryEffect.width/2,this.nnvictoryEffect.anchorOffsetY=this.nnvictoryEffect.height/2,this.nnvictoryEffect.x=xlLib.Global.screenWidth/2,this.nnvictoryEffect.y=xlLib.Global.screenHeight/2),this.nnvictoryEffect.play(),this.addChild(this.nnvictoryEffect)},e.prototype.addTongsha=function(){this.tongsha||(this.tongsha=new QZNNTongsha,this.tongsha.anchorOffsetX=this.tongsha.width/2,this.tongsha.anchorOffsetY=this.tongsha.height/2,this.tongsha.x=xlLib.Global.screenWidth/2,this.tongsha.y=xlLib.Global.screenHeight/2),this.tongsha.play(),this.addChild(this.tongsha)},e.prototype.addTongpei=function(){this.tongpei||(this.tongpei=new QZNNTongpei,this.tongpei.anchorOffsetX=this.tongpei.width/2,this.tongpei.anchorOffsetY=this.tongpei.height/2,this.tongpei.x=xlLib.Global.screenWidth/2,this.tongpei.y=xlLib.Global.screenHeight/2),this.tongpei.play(),this.addChild(this.tongpei)},e.prototype.onbetBack=function(t){this._tishi.visible=!1,this.time=0,this.startCountDown(t._obj.seconds),this._group_qiang.visible=!1,this._btn_switch.visible=!0,4==t._obj.roomStatus&&this.acceptbanker(t);for(var e=0;e<t._obj.hogList.length;e++)this["_btn_double_"+(e+1)].visible=!0,t._obj.hogList[e].hogOrBet>=10?(this["beishu_"+e].visible=!0,this["beishu_"+e].source="img_XB_1_png",this["beishu_0_"+e].visible=!0,this["beishu_0_"+e].source="img_XB_"+t._obj.hogList[e].hogOrBet%10+"_png",this["bs_img_"+e].visible=!0):t._obj.hogList[e].hogOrBet<10&&(this["beishu_"+e].visible=!1,this["beishu_"+e].source="",this["beishu_0_"+e].visible=!0,this["beishu_0_"+e].source="img_XB_"+t._obj.hogList[e].hogOrBet+"_png",this["bs_img_"+e].visible=!0),this.multipleList[e]=t._obj.hogList[e].hogOrBet},e.prototype.onThecardtype=function(t){this._tishi.visible=!1,this.zijipokes=t._obj.showList,this.score1=t._obj.showList,this.niu=t._obj.niu,this.time=0,this.startCountDown(t._obj.seconds),this.cardEffect()},e.prototype.oncloseanaccount=function(t){this.pinpaiType.visible=!0,this.pinpaiType0.visible=!0,this.pinpaiType1.visible=!0,this.pinpaiType2.visible=!0,this.game_result=t._obj.result,this.time=0,this.grpCountdown.visible=!1;for(var e={pokes:[],result:[1,0,0,0],bankerWin:0,rate:"0.05",bomb:"0"},i=0;i<t._obj.players.length;i++){var n={num:t._obj.players[i].pai.ratio,type:t._obj.players[i].pai.niu,value:t._obj.players[i].cardsList,win:t._obj.players[i].win,score:t._obj.players[i].score};e.pokes.push(n)}this.zijipokes=t._obj.players[0].cardsList,this.cardResult=e,this._pingpai.visible=!1,this.texiao.stop(),this._my_pai.visible=!0,this.interval=setInterval(this.playerCardRotation.bind(this),800)},e.prototype.OnBetUpdate=function(t){this._whether_.visible=!1,UserInfo.getInstance().uid==t._obj.userid&&(this._btn_switch.visible=!1,this._tishi.visible=!0,this._tishi_text.text="请等待其他闲家下注..."),200==t._obj.code&&this.jiazhu(t._obj.hogOrBet,t._obj.index)},e.prototype.OnHogUpdate=function(t){this.intnum[t._obj.index]=t._obj.hogOrBet,UserInfo.getInstance().uid==t._obj.userid&&(this._group_qiang.visible=!1,this._tishi.visible=!0,this._tishi_text.text="请等待其他玩家抢庄..."),200==t._obj.code&&this.qiangzhuang(t._obj.hogOrBet,t._obj.index)},e.prototype.qiangzhuang=function(t,e){0==t?(this["_whether_"+e].visible=!0,this["_whether_"+e].source="img_BQ_png",this["_img_"+e].visible=!1,this["_img_"+e].source=""):(this["_whether_"+e].visible=!0,this["_whether_"+e].source="img_BQ_0_png",this["_img_"+e].visible=!0,this["_img_"+e].source="img_BQ_0_"+t+"_png")},e.prototype.jiazhu=function(t,e){t>=10?(this["_xiabei_0_"+e].visible=!0,this["_xiabei_0_"+e].source="img_XB_png",this["_xiabei_"+e].visible=!0,this["_xiabei_0_0_"+e].visible=!0,this["_xiabei_"+e].source="img_XB_"+t%10+"_png",this["_xiabei_0_0_"+e].source="img_XB_1_png"):10>t&&(this["_xiabei_0_"+e].visible=!0,this["_xiabei_0_"+e].source="img_XB1_png",this["_xiabei_"+e].visible=!0,this["_xiabei_"+e].x-=20,this["_xiabei_0_0_"+e].visible=!1,this["_xiabei_"+e].source="img_XB_"+t+"_png")},e.prototype.turnBankerShow=function(){for(var t=0;4>t;t++)this["_zhuang_img"+t].visible=!1;if(12==this.timeNum)return this.timeNum=0,clearInterval(this.turn0),void this.setbanker(this.bet_data);if(0!=this.cur_Num){var e=0;do if(e=parseInt(Math.random()*this.betNum.length+""),this.cur_Num!=e)break;while(0);this.cur_Num=parseInt(Math.random()*this.betNum.length+"")}else this.cur_Num=parseInt(Math.random()*this.betNum.length+"");var i=this.betNum[this.cur_Num];this["_zhuang_img"+i].visible=!0,this.playClickSound(QZNNUtil.getInstance().getSoundEffect(13)),this.timeNum++},e.prototype.acceptbanker=function(t){this.bet_data=[],this.bet_data=t;var e=-1;this.betNum=[];for(var i=0;i<this.intnum.length;i++)e<this.intnum[i]?(e=this.intnum[i],this.betNum=[],this.betNum.push(i)):e==this.intnum[i]&&this.betNum.push(i);return this.betNum.length>1?(this.turn0=0,this.cur_Num=0,void(this.turn0=setInterval(this.turnBankerShow.bind(this),100))):(this.setbanker(t),void(this.bet_data=[]))},e.prototype.setbanker=function(t){var e=UserInfo.getInstance().findSeatNumber(t._obj.banker.index);this["_zhuang_img"+e].visible=!0,e%2==0?(this.niuniukuang||(this.niuniukuang=new NiuZhang0,this.niuniukuang.x=-72,this.niuniukuang.y=-88,this.niuniukuang.play()),this["grpHead"+e].addChild(this.niuniukuang)):(this.niuniukuang1||(this.niuniukuang1=new NiuZhang1,this.niuniukuang1.x=-125,this.niuniukuang1.y=-42,this.niuniukuang1.play()),this["grpHead"+e].addChild(this.niuniukuang1)),this.niuniuTX||(this.niuniuTX=new ZhuangIconTX,this.niuniuTX.x=-180,this.niuniuTX.y=-140,this.niuniuTX.play()),this["grpHead"+e].addChild(this.niuniuTX),this.playClickSound(QZNNUtil.getInstance().getSoundEffect(11)),0==e&&(this._tishi.visible=!0,this._tishi_text.text="请等待闲家下注..."),this.zhaungIndex=e},e.prototype.randomZhuan=function(t){0==t?this.addNNbankerEff():this["grpHead"+t].setZhuang(!0)},e.prototype.addNNbankerEff=function(){this.nnbankerEff||(this.nnbankerEff=xlLib.DisplayUtils.createMovieClicp("nn_banker","nn_banker"),this.nnbankerEff.x=90,this.nnbankerEff.y=80,this.nnbankerEff.frameRate=10,this.nnbankerEff.touchEnabled=!1),this.grpHead0.addChild(this.nnbankerEff),this.nnbankerEff.gotoAndPlay(0,1)},e.prototype.addPlayers=function(t){this.grpHead0.visible=!0;var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawRect(0,0,117,115),e.graphics.endFill(),e.x=this.imghead0.x+6,e.y=this.imghead0.y+5,this.grpHead0.addChild(e),this.imghead0.mask=e,t._obj.player[0].id==UserInfo.getInstance().myPlayer.id&&(this.labelHead0.text=UserInfo.getInstance().myPlayer.username,this.labelGold0.text=GlobalFunction.Formatconversion(UserInfo.getInstance().myPlayer.goldcoins),this.imghead0.source="women7_png");for(var i=1;i<t._obj.player.length;i++)null!=t._obj.player[i]?this.setUserInfo(i,UserInfo.getInstance().playes[i].username,UserInfo.getInstance().playes[i].goldcoins,"women7_png"):this.setUserInfo(i,"","","")},e.prototype.playerJoinRoom=function(t){t._obj.player.id==UserInfo.getInstance().myPlayer.id||(this["grpHead"+t._obj.player.index].visible=!0,this["grpHead"+t._obj.player.index],this.setUserInfo(t._obj.player.index,t._obj.player.username,t._obj.player.goldcoins,"women7_png"))},e.prototype.setUserInfo=function(t,e,i,n){this["imghead"+t].source=n,this["labelHead"+t].text=e,this["labelGold"+t].text=GlobalFunction.Formatconversion(i)},e.prototype.Suapai=function(t){this.playClickSound(QZNNUtil.getInstance().getSoundEffect(10));for(var e=0;3>e;e++)if(this.arr[e]==t.target)return this.arr[e].y+=40,this.arr[e]=null,this["_zhi_"+e].text="",this.arr_fen[e]=0,this.arr_fen1[e]=0,void this.calculatescore();for(var e=0;3>e;e++)if(null==this.arr[e])for(var i=0;5>i;i++)if(t.target==this["_puke_"+i])return this.arr[e]=this["_puke_"+i],this["_puke_"+i].y-=40,this["_zhi_"+e].text=this.score[i],this.arr_fen[e]=this.score[i],this.arr_fen1[e]=this.score1[i],void this.calculatescore()
},e.prototype.calculatescore=function(){var t=this.arr_fen[0]+this.arr_fen[1]+this.arr_fen[2];0==t?this._zhi_3.text="":this._zhi_3.text=t+""},e.prototype.startCountDown=function(t){10>t?this.timeTxt.text="0"+t:this.timeTxt.text=""+t,this.timeTxt.visible=!0,this.time=t,null==this.timer&&(this.timer=new egret.Timer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.start())},e.prototype.timerFunc=function(t){this.time>=0?(this.time>=10?this.timeTxt.text=""+this.time:this.timeTxt.text="0"+this.time,this.time--):(this.timeTxt.text="00",this.clearTime())},e.prototype.clearTime=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer=null)},e.prototype.clearTimer=function(){this.cdNum>0?this.cdNum--:(this.cdTimer.stop(),this.cdNum=0,this.resetGame())},e.prototype.joinCallback=function(t){if(200==t.code){this.curRate=t.data.rate;for(var e=t.data,i=t.data.seats,n=0;n<i.length;n++)this["imghead"+i[n].seat].source=i[n].headurl,this["labelHead"+i[n].seat].text=i[n].name,this["imghead"+i[n].seat].height=this["imghead"+i[n].seat].width=70;this.limitGold=e.limitGold,this.limitVip=e.limitVip,this.cdNum=e.time,this.cdTimer.start(),1==t.state?this.isCanBets=!1:2==t.state?this.isCanBets=!0:3==t.state&&(this.isCanBets=!1)}},e.prototype.onMsgListen=function(t){var e=t.msg;switch(e.type){case 0:this.cdNum=parseInt(e.time)+3,this.cdTimer.start();break;case 1:this.isCanBets=!1;break;case 2:this.setGameResult(e.data);break;case 3:this.changeBankerObj=e.zhuang,this.isChangeBanker=!0;break;case 4:this.updataSeat(1,e.data);break;case 5:this.updataSeat(2,e.seat);break;case 6:break;case 7:}},e.prototype.setGameResult=function(t){this.cardResult=t},e.prototype.updataSeat=function(t,e){1==t?(this["imghead"+e.seat].source=e.headurl,this["imghead"+e.seat].height=this["imghead"+e.seat].width=70,this["labelHead"+e.seat].text=e.nick):(this["imghead"+e].source="",this["labelHead"+e].text="")},e.prototype.getBetsCallback=function(t){if(200==t.code)for(var e=t.list,i=1;5>i;i++)if(0!=e[i].score){if(e[i].score==this.poolBetArray[i])continue;this.isCanBets&&this.showCoins(e[i].score-this.poolBetArray[i],i),parseInt(this["labBetsPool"+(i-1)].text)<e[i].score/1e4&&(this.poolBetArray[i]=e[i].score)}},e.prototype.showCoins=function(t,e){var i=!1;this.playClickSound(QZNNUtil.getInstance().getSoundEffect(8));var n=QZNNUtil.getInstance().getCoinsPos(e),s=QZNNUtil.getInstance().coinsType(t);this.coinsNumArr[e]<50?(this.coinsNumArr[e]=parseInt(this.coinsNumArr[e])+s.length,i=!1):i=!0;for(var r=0;r<s.length;r++){var o=n.x+50*Math.random(),a=n.y+50*Math.random();egret.Tween.get(s[r]).to({x:o,y:a},200).call(function(){this[0]&&this[1].parent.removeChild(this[1])},[i,s[r]])}},e.prototype.cardEffect=function(){this._btn_switch.visible=!1,this._group_qiang.visible=!1,this.isCardEffectShow=!0,this.flyIntval_1=setInterval(this.playCardFly_1.bind(this),this.faPaiTime),this.flyIntval_2=setInterval(this.playCardFly_2.bind(this),this.faPaiTime),this.flyIntval_3=setInterval(this.playCardFly_3.bind(this),this.faPaiTime),this.flyBankerIndex=0,this.flyIntval_4=setInterval(this.playCardFly_4.bind(this),this.faPaiTime)},e.prototype.playCardFly_1=function(){var t=this["grpCard_0_"+this.flyIndex_1];t.source="qznn_card_100",t.x=xlLib.Global.screenWidth/2,t.y=xlLib.Global.screenHeight/2,t.anchorOffsetX=t.width/2,t.x+=t.width/2,t.alpha=0,t.scaleX=.2,t.scaleY=.2;var e=this.orginPlayerCardPos[0][this.flyIndex_1],i=this.orginZhanCardPos[1];this.playClickSound(QZNNUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:i.x,y:i.y,alpha:.6,scaleX:1,scaleY:1},this.flyPaiTime,egret.Ease.sineIn).to({x:e.x,y:e.y,alpha:1},this.flyPaiTime,egret.Ease.sineOut),4==this.flyIndex_1?(this.flyIndex_1=0,clearInterval(this.flyIntval_1)):this.flyIndex_1++},e.prototype.playCardFly_2=function(){var t=this["grpCard_1_"+this.flyIndex_2];t.source="qznn_card_100",t.x=xlLib.Global.screenWidth/2,t.y=xlLib.Global.screenHeight/2,t.anchorOffsetX=t.width/2,t.x+=t.width/2,t.alpha=0,t.scaleX=.2,t.scaleY=.2;var e=this.orginPlayerCardPos[1][this.flyIndex_2];this.playClickSound(QZNNUtil.getInstance().getSoundEffect(6));var i=this.orginZhanCardPos[2];egret.Tween.get(t).to({x:i.x,y:i.y,alpha:.6,scaleX:1,scaleY:1},this.flyPaiTime,egret.Ease.sineIn).to({x:e.x,y:e.y,alpha:1},this.flyPaiTime,egret.Ease.sineOut),0==this.flyIndex_2?(this.flyIndex_2=4,clearInterval(this.flyIntval_2)):this.flyIndex_2--},e.prototype.playCardFly_3=function(){var t=this["grpCard_2_"+this.flyIndex_3];t.source="qznn_card_100",t.x=xlLib.Global.screenWidth/2,t.y=xlLib.Global.screenHeight/2,t.anchorOffsetX=t.width/2,t.x+=t.width/2,t.alpha=0,t.scaleX=.2,t.scaleY=.2;var e=this.orginPlayerCardPos[2][this.flyIndex_3];this.playClickSound(QZNNUtil.getInstance().getSoundEffect(6));var i=this.orginZhanCardPos[3];egret.Tween.get(t).to({x:i.x,y:i.y,alpha:.6,scaleX:1,scaleY:1},this.flyPaiTime,egret.Ease.sineIn).to({x:e.x,y:e.y,alpha:1},this.flyPaiTime,egret.Ease.sineOut),0==this.flyIndex_3?(this.flyIndex_3=4,clearInterval(this.flyIntval_3)):this.flyIndex_3--},e.prototype.playCardFly_4=function(){if(5==this.flyBankerIndex){this.flyBankerIndex=0,clearInterval(this.flyIntval_4),this.playClickSound(QZNNUtil.getInstance().getSoundEffect(7));for(var t=this.zijipokes,e=0;5>e;e++){var i=this["_puke_"+e];i.source="qznn_card_100",egret.Tween.get(i).to({scaleX:0},400).call(function(){this[0].source="qznn_card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},400)},[i,t[e]]);var n=t[e].toString();n=n.slice(1);var s=parseInt(n);s>10&&(s=10),this.score[e]=s;var r=this["bankerCard_"+e];r.source="qznn_card_100"}return void(this.startCardRotation=!0)}this._pingpai.visible=!0,this.texiao.play();var o=this["_puke_"+this.flyBankerIndex];o.x=xlLib.Global.screenWidth/2,o.y=xlLib.Global.screenHeight/2,o.source="qznn_card_100",o.anchorOffsetX=o.width/2,o.x+=o.width/2,this.orginPinCardPos,o.alpha=0,o.scaleX=.2,o.scaleY=.2;var a=this.orginPinCardPos[this.flyBankerIndex];this.playClickSound(QZNNUtil.getInstance().getSoundEffect(6));var h=this.orginZhanCardPos[0];egret.Tween.get(o).to({x:h.x,y:h.y,alpha:.6,scaleX:1,scaleY:1},this.flyPaiTime,egret.Ease.sineIn).to({x:a.x,y:a.y,alpha:1},this.flyPaiTime,egret.Ease.sineOut),this.flyBankerIndex++},e.prototype.playerCardRotation=function(){this._tishi.visible=!1,this.pinpaiType.visible=!1;for(var t=0;t>3;t++)this["pinpaiType"+t].visible=!1;if(this.effectPlayerIndex==this.cardResult.pokes.length-1)return clearInterval(this.interval),this.effectPlayerIndex=0,void this.bankerCardRotation();this.playClickSound(QZNNUtil.getInstance().getSoundEffect(7));for(var e=this.cardResult.pokes,i=this.effectPlayerIndex,n=0;5>n;n++){var s=this["grpCard_"+i+"_"+n];0==i&&this.grpCard.setChildIndex(s,n),s.source="qznn_card_100",egret.Tween.get(s).to({scaleX:0},300).call(function(){this[0].source="qznn_card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[s,e[i+1].value[n]])}if(this.addNiuniuBei(this["labCardType"+i],e[i+1].type),this.playClickSound(QZNNUtil.getInstance().getCardMusicType(e[i+1].type)),this["labCardType"+i].visible=!0,this["labCardType"+i].width=98,this["labCardType"+i].height=44,0!=e[i+1].type)for(var n=0;5>n;n++){var s=this["grpCard_"+i+"_"+n];3>n?egret.Tween.get(s).wait(700).to({x:s.x-10},100):egret.Tween.get(s).wait(700).to({x:s.x+10},100)}this.effectPlayerIndex++},e.prototype.addNiuniuBei=function(t,e){var i=QZNNUtil.getInstance().getCardBmpUrl(e);t.removeChildren();var n;0==e?(n=new WuNiuNBei,n.x=80,n.y-=80):10>e?(n=new NiuNBei,n.x=80,n.y-=80):(10==e?this.addNNEff():13==e&&this.addWhnEff(),n=new TenshuNiuBei,n.x=80,n.y=30),n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,t.addChild(n);var s=i;n.play(s)},e.prototype.bankerCardRotation=function(){this.pinpaiType.visible=!1,this.playClickSound(QZNNUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes[0],e=0;5>e;e++){var i=this["bankerCard_"+e];i.source="qznn_card_100",egret.Tween.get(i).to({scaleX:0},300).call(function(){this[0].source="qznn_card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[i,t.value[e]])}if(this.addNiuniuBei(this.labCardTypeBanker,t.type),this.playClickSound(QZNNUtil.getInstance().getCardMusicType(t.type)),this.labCardTypeBanker.visible=!0,this.labCardTypeBanker.width=98,this.labCardTypeBanker.height=44,0!=t.type)for(var e=0;5>e;e++){var i=this["bankerCard_"+e];3>e?egret.Tween.get(i).wait(700).to({x:i.x-10},100):egret.Tween.get(i).wait(700).to({x:i.x+10},100)}this.interval=setInterval(this.blinkEffect.bind(this),500)},e.prototype.blinkEffect=function(){clearInterval(this.interval);for(var t=this.cardResult.result,e=0;4>e;e++)1==t[e];this.interval=setInterval(this.cardEffectEnd.bind(this),2e3)},e.prototype.cardEffectEnd=function(){clearInterval(this.interval);var t=this.cardResult,e=!1;1==t.result[0]&&1==t.result[1]&&1==t.result[2]&&1==t.result[3]&&(e=!0),0==t.result[0]&&0==t.result[1]&&0==t.result[2]&&0==t.result[3]&&(e=!0),this.playClickSound(QZNNUtil.getInstance().getSoundEffect(9));for(var i={x:this.orginPlayerHeadPos[this.zhaungIndex].x,y:this.orginPlayerHeadPos[this.zhaungIndex].y},n={x:0,y:0},s=0;s<this.cardResult.pokes.length;s++)n.x=this.orginPlayerHeadPos[s].x,n.y=this.orginPlayerHeadPos[s].y,1==this.cardResult.pokes[s].win?this.updatePlayerGold(s,this.cardResult.pokes[s].score,!0):this.updatePlayerGold(s,this.cardResult.pokes[s].score,!1),this.zhaungIndex!=s&&(1==this.cardResult.pokes[s].win?EffectUtils.coinsFly(this,i.x,i.y,n.x,n.y):EffectUtils.coinsFly(this,n.x,n.y,i.x,i.y));for(var s=0;s<this.cardResult.pokes.length;s++)this.suiCoreGameEndScoreResultEffect(s,this["grpHead"+s],this.cardResult.pokes[s].win,this.cardResult.pokes[s].score);this.interval=setInterval(this.victoryEffect.bind(this),2e3)},e.prototype.updatePlayerGold=function(t,e,i){var n=UserInfo.getInstance().playes[t].goldcoins;1==i?n+=e:n-=e,UserInfo.getInstance().playes[t].goldcoins=n,0==t?this.labelGold0.text=GlobalFunction.Formatconversion(n):(this["grpHead"+t],this.setGold(t,n))},e.prototype.setGold=function(t,e){this["labelGold"+t].text=GlobalFunction.Formatconversion(e)},e.prototype.suiCoreGameEndScoreResultEffect=function(t,e,i,n){if(this._zhuang_img0.visible=!1,this._zhuang_img1.visible=!1,this._zhuang_img2.visible=!1,this._zhuang_img3.visible=!1,i)if(t%2==0){var s=new QZNNHEff;s.x=-84,s.y=-72,s.play();var r=new QZNNHHeadEff;r.x=-84,r.y=-72,r.play(),e.addChild(s),e.addChild(r),this.win_eff_err.push(s),this.win_eff_err.push(r)}else{var o=new QZNNVEff;o.x=-70,o.y=-70,o.play();var a=new QZNNVHeadEff;a.x=-70,a.y=-70,a.play(),e.addChild(o),e.addChild(a),this.win_eff_err.push(o),this.win_eff_err.push(a)}var h=new eui.BitmapLabel;h.textAlign=egret.HorizontalAlign.CENTER;var l="";1==i?(h.font="qznn_win_fnt",h.text="0",l="+"):(h.font="qznn_lose_fnt",h.text="0",l="-"),0==t?(h.x=0,h.y=-40,h.textAlign=egret.HorizontalAlign.RIGHT):1==t?(h.x=30,h.y=-40):2==t?(h.x=90,h.y=-40):3==t&&(h.x=30,h.y=-40),h.scaleX=1,h.scaleY=1,e.addChild(h),this.turn_score_arr.push(h),uiCore.LabelEffect.instance.playEffect(h,{time:3e3,initNum:1,num:n/100,regulator:50},l)},e.prototype.victoryEffect=function(){clearInterval(this.interval),this.interval=0,1==this.game_result?(this.addNNVictoryEffect(),this.game_result=0):2==this.game_result?(this.addTongsha(),this.game_result=0):3==this.game_result&&(this.addTongpei(),this.game_result=0),this._jixu.visible=!0,UserInfo.getInstance().isGameStart=!1},e.prototype.resetGame=function(){this.initData();for(var t=0;5>t;t++){var e=this["bankerCard_"+t];e.source="",egret.Tween.removeTweens(e),e.x=this.orginBankerCardPos[t].x,e.y=this.orginBankerCardPos[t].y;var i=this["_puke_"+t];i.source="",egret.Tween.removeTweens(i)}this._pingpai.visible=!1,this.texiao.stop(),this._my_pai.visible=!1,this.labCardTypeBanker.visible=!1;for(var n=0;n<this.cardResult.pokes.length-1;n++){this["labCardType"+n].visible=!1;for(var s=0;5>s;s++){var r=this["grpCard_"+n+"_"+s];r.source="",egret.Tween.removeTweens(r)}this["_xiabei_"+n].visible=!1,this["_xiabei_0_"+n].visible=!1,this["_whether_"+n].visible=!1,this["_img_"+n].visible=!1}this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this._btn_begin.visible=!0,this.isCanBets=!0,this.isBets=!1,this.resultCaijin=0,this.isCoinsReturn=!0,this.isCardEffectShow=!1,this.removeEff(this.nnbankerEff),this.arr=[null,null,null],this.score=[0,0,0,0,0],this.score1=[0,0,0,0,0],this.arr_fen=[0,0,0],this.arr_fen1=[0,0,0],this.game_result=0,this.niu=0,this.time=0,this._jixu.visible=!1,this.startCardRotation=!1,this.zhaungIndex=0,this.zijipokes=[0,0,0,0,0],this.multipleList=[0,0,0,0,0],this._btn_switch.visible=!1,this._btn_double_1.visible=!1,this._btn_double_2.visible=!1,this._btn_double_3.visible=!1,this._btn_double_4.visible=!1,this._btn_double_5.visible=!1,this.beishu_0.visible=!1,this.beishu_1.visible=!1,this.beishu_2.visible=!1,this.beishu_3.visible=!1,this.beishu_4.visible=!1,this.beishu_0_0.visible=!1,this.beishu_0_1.visible=!1,this.beishu_0_2.visible=!1,this.beishu_0_3.visible=!1,this.beishu_0_4.visible=!1,this.pinpaiType.visible=!1,this.pinpaiType0.visible=!1,this.pinpaiType1.visible=!1,this.pinpaiType2.visible=!1,this.grpCountdown.visible=!0,this._xiabei_0.x=295.61,this._xiabei_1.x=368.16,this._xiabei_2.x=530.48,this._xiabei_3.x=1146.78,this.grpHead0.visible=!1,this.grpHead1.visible=!1,this.grpHead2.visible=!1,this.grpHead3.visible=!1,this._zhuang_img0.visible=!1,this._zhuang_img1.visible=!1,this._zhuang_img2.visible=!1,this._zhuang_img3.visible=!1,this._tishi.visible=!1;for(var o=0;o<this.turn_score_arr.length;o++)this.turn_score_arr[o].parent.removeChild(this.turn_score_arr[o]);this.turn_score_arr=[];for(var a=0;a<this.win_eff_err.length;a++)this.win_eff_err[a].stop(),this.win_eff_err[a].parent.removeChild(this.win_eff_err[a]);this.win_eff_err=[];for(var h=0;h<this.goldFlyAnimatorarr.length;h++)this.goldFlyAnimatorarr[h].stop(),this.goldFlyAnimatorarr[h].parent.removeChild(this.goldFlyAnimatorarr[h]);this.goldFlyAnimatorarr=[],this.tongsha&&this.tongsha.stop(),this.niuniuTX&&(this.niuniuTX.stop(),this.niuniuTX.parent.removeChild(this.niuniuTX)),this.tongpei&&this.tongpei.stop(),this.niuniukuang&&(this.niuniukuang.stop(),this.niuniukuang.parent.removeChild(this.niuniukuang),this.niuniukuang=null),this.niuniukuang1&&(this.niuniukuang1.stop(),this.niuniukuang1.parent.removeChild(this.niuniukuang1),this.niuniukuang1=null)},e.prototype.removeEff=function(t){t&&(t.stop(),t.parent&&t.parent.removeChild(t))},e.prototype.removeNNbankerEff=function(){this.nnbankerEff&&(this.nnbankerEff.stop(),this.nnbankerEff.parent&&this.nnbankerEff.parent.removeChild(this.nnbankerEff))},e.prototype.getHistoryCallback=function(t){for(var e=t.data,i=0;10>i;i++)if(i<e.length){this["grpHistroy"+i].visible=!0;for(var n=e[i],s=0;4>s;s++)this["grpHistroy"+s+"_"+i].source=1==n[s]?"qznn_a8":"qznn_a7"}else this["grpHistroy"+i].visible=!1},e.prototype.playClickSound=function(t){xlLib.SoundMgr.instance.playSound(t+"_mp3")},e.prototype.Onquit=function(){if(this.playClickSound(QZNNUtil.getInstance().getSoundEffect(10)),UserInfo.getInstance().isGameStart)return void xlLib.PopUpMgr.addPopUp(Hint,this,!0,!0,null,1);xlLib.SoundMgr.instance.stopBgMusic();var t=["hall_bg_mp3"];xlLib.SoundMgr.instance.playBgMusic(t),xlLib.SceneMgr.instance.changeScene(Lobby)},e.prototype.destroy=function(){this._btn_begin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_5.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_buqiang.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._youniu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._meiniu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.Onquit,this),EventUtil.removeEventListener(EventConst.players,this.addPlayers,this),EventUtil.removeEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.removeEventListener(EventConst.onGameStatusChange,this.GameStatus,this),EventUtil.removeEventListener(EventConst.onUserBetOrderUpdate,this.OnBetUpdate,this),EventUtil.removeEventListener(EventConst.onUserHogOrderUpdate,this.OnHogUpdate,this),null!=this.cdTimer&&this.cdTimer.removeEventListener(egret.TimerEvent.TIMER,this.clearTimer,this),this.removeEff(this.nnbankerEff)},e}(eui.Component);__reflect(QZNNView.prototype,"QZNNView");var TenshuNiuBei=function(t){function e(){var e=t.call(this)||this;return e.skinName="TenshuNiuBeiSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.teshuniu.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.teshuniu.stop()},e.prototype.play=function(t){void 0===t&&(t=""),this.image0.source=t,this.teshuniu.play(0)},e.prototype.stop=function(){this.teshuniu.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(TenshuNiuBei.prototype,"TenshuNiuBei",["INiuNiuBetEffect"]);var WuNiuNBei=function(t){function e(){var e=t.call(this)||this;return e.skinName="WuNiuNBeiSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.niuniuanmin.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.niuniuanmin.stop()},e.prototype.play=function(t){void 0===t&&(t=""),this.niuniuanmin.play(0)},e.prototype.stop=function(){this.niuniuanmin.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(WuNiuNBei.prototype,"WuNiuNBei",["INiuNiuBetEffect"]);var ZhuangIconTX=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZhuangIconSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.zhuangjia.addEventListener(egret.Event.COMPLETE,this.onTweenComplete,this)},e.prototype.onTweenComplete=function(t){this.zhuangjia.stop()},e.prototype.play=function(){this.zhuangjia.play(0)},e.prototype.stop=function(){this.zhuangjia.stop()},e.prototype.destroy=function(){},e}(eui.Component);__reflect(ZhuangIconTX.prototype,"ZhuangIconTX");var ErBaGangroomView=function(t){function e(){var e=t.call(this)||this;e.skinName="ErBaGangroomViewSkin",xlLib.SoundMgr.instance.stopBgMusic();var i=["qznn_bg_mp3"];return xlLib.SoundMgr.instance.playBgMusic(i),e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this._coin_label.text=""+UserInfo.getInstance().goldcoins,this._btn_cjc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this),EventUtil.addEventListener(EventConst.onGameStatusChange,this.GameStatus,this)},e.prototype.GameStatus=function(t){200==t._obj.code&&(xlLib.SceneMgr.instance.changeScene(RBGScene),xlLib.TipsUtils.showFloatWordTips("加入房间成功！"))},e.prototype.onEnterGame=function(){if(this.gameIconData){var t=UserInfo.getInstance().getGameDataByindex(this.gameIconData.game),e=t.getTypeDataByindex(this.gameIconData.type),i=e.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),n={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:i.id};xlLib.WebSocketMgr.getInstance().send(EventConst.joinroom,n,function(t){},this)}},e.prototype.setGameIconData=function(t){this.gameIconData=t},e.prototype.dispose=function(){xlLib.SoundMgr.instance.stopBgMusic();var t=["hall_bg_mp3"];xlLib.SoundMgr.instance.playBgMusic(t),xlLib.PopUpMgr.removePopUp(this,1)},e.prototype.destroy=function(){this.gameIconData=null,this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),EventUtil.removeEventListener(EventConst.onGameStatusChange,this.GameStatus,this)},e}(eui.Component);__reflect(ErBaGangroomView.prototype,"ErBaGangroomView",["eui.UIComponent","egret.DisplayObject"]);var RBGHead=function(t){function e(){var e=t.call(this)||this;return e.skinName="RBGHeadSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},e.prototype.setUserInfo=function(t,e,i){this.imghead.source=i,this.labelName.text=t,this.labelGold.text=e},e.prototype.setZhuang=function(t){this.img_zhuang.visible=t},e.prototype.setGold=function(t){this.labelGold.text=t+""},e.prototype.destroy=function(){},e}(eui.Component);__reflect(RBGHead.prototype,"RBGHead");var RBGMahjong=function(t){function e(){var e=t.call(this)||this;return e.skinName="RBGMahjongSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},e.prototype.setPai=function(t){null!=t?this._mahjong_card.source="mahjong_"+t+"_png":this._mahjong_card.source=""},e.prototype.setAnPai=function(t){1==t?this._mahjong_cover.visible=!0:this._mahjong_cover.visible=!1},e.prototype.destroy=function(){},e}(eui.Component);__reflect(RBGMahjong.prototype,"RBGMahjong");var RBGScene=function(t){function e(){var e=t.call(this)||this;return e.RBGView=new RBGView,e.uiLayer.addChild(e.RBGView),e}return __extends(e,t),e.prototype.destroy=function(){this.RBGView.destroy(),t.prototype.destroy.call(this)},e.prototype.resize=function(){this.RBGView&&this.RBGView.resize()},e}(xlLib.GameScene);__reflect(RBGScene.prototype,"RBGScene");var RBGUtil=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getBetNumber=function(t){switch(t){case 0:return Math.pow(10,4);case 1:return Math.pow(10,5);case 2:return Math.pow(10,6);case 3:return Math.pow(10,7);case 4:return 5*Math.pow(10,7);case 5:return Math.pow(10,8)}},t.prototype.getMsgSource=function(t){var e="";switch(t){case 2:e="nn.d2";break;case 3:e="nn.d3";break;case 4:e="nn.d4";break;case 5:e="nn.d5"}return e},t.prototype.getCoinsPos=function(t){var e=new egret.Point;switch(t){case 1:e.x=195,e.y=523;break;case 2:e.x=383,e.y=523;break;case 3:e.x=195,e.y=633;break;case 4:e.x=383,e.y=633}return e},t.prototype.getCardType2=function(t){switch(t){case 0:return"无牛";case 1:return"牛一";case 2:return"牛二";case 3:return"牛三";case 4:return"牛四";case 5:return"牛五";case 6:return"牛六";case 7:return"牛七";case 8:return"牛八";case 9:return"牛九";case 10:return"牛牛";case 11:return"四炸";case 12:return"五花牛";case 13:return"五小牛"}},t.prototype.getCardType=function(t){switch(t){case 0:return"nn.n1";case 1:return"nn.n2";case 2:return"nn.n3";case 3:return"nn.n4";case 4:return"nn.n5";case 5:return"nn.n6";case 6:return"nn.n7";case 7:return"nn.n8";case 8:return"nn.n9";case 9:return"nn.n10";case 10:return"nn.n11";case 11:return"nn.n13";case 12:return"nn.n14";case 13:return"nn.n12"}},t.prototype.getCardMusicType=function(t){switch(t){case 0:return"nn.niu0";case 1:return"nn.niu1";case 2:return"nn.niu2";case 3:return"nn.niu3";case 4:return"nn.niu4";case 5:return"nn.niu5";case 6:return"nn.niu6";case 7:return"nn.niu7";case 8:return"nn.niu8";case 9:return"nn.niu9";case 10:return"nn.niuniu";case 11:return"nn.playNiuZhadan";case 12:return"nn.playNiu5hua";case 13:return"nn.playNiuXiao5"}},t.prototype.coinsType=function(t){var e=[],i=0,n="";t=Math.round(t/1e4),t>0&&10>t?(i=t,n="nn.b1a"):t>9&&100>t?(i=t/10,n="nn.b2a"):t>99&&1e3>t?(i=t/100,n="nn.b3a"):t>999&&5e3>t?(i=t/1e3,n="nn.b4a"):t>4999&&1e4>t?(i=t/5e3,n="nn.b5a"):(i=t/1e4,n="nn.b6a");for(var s=0;s<Math.round(i);s++){var r=new eui.Image(n),o=this.coinPos();r.x=o.x,r.y=o.y,e.push(r)}return e},t.prototype.coinPos=function(){var t=new egret.Point,e=Math.floor(4*Math.random());switch(e){case 0:t.x=-100,t.y=400;break;case 1:t.x=-100,t.y=800;break;case 2:t.x=650,t.y=400;break;case 3:t.x=650,t.y=800}return t},t.prototype.getSoundEffect=function(t){switch(t){case 0:return"bgm";case 1:return"nn.jackpot";case 2:return"nn.start";case 3:return"nn.end";case 4:return"nn.ts";case 5:return"nn.tp";case 6:return"nn.dealCard";case 7:return"nn.openCard";case 8:return"nn.stake";case 9:return"gold_diaoluo"}},t.instance=null,t}();__reflect(RBGUtil.prototype,"RBGUtil");var RBGView=function(t){function e(){var e=t.call(this)||this;return e.r=null,e.interval=-1,e.selfbetsNum={},e.betsPostion=-1,e.betsNum=0,e.cardResult=null,e.isChangeBanker=!1,e.changeBankerObj={},e.isCanBets=!0,e.poolBetArray={},e.limitGold=0,e.limitVip=0,e.curBankerRanking=-1,e.isApplyBanker=!1,e.lastGameBankerNum=0,e.isSysBanker=!1,e.orginBankerCardPos=[],e.orginPlayerCardPos=[],e.isBanker=!1,e.isBets=!1,e.maxUserData=null,e.banker_total_gold=0,e.isBoomBanker=!1,e.resultCaijin=0,e.totalCaijin=0,e.cdNum=10,e.lastTouchBetIndex=-1,e.coinsNumArr={},e.isCoinsReturn=!0,e.curRate=0,e.lastTouchBetTime=0,e.isCardEffectShow=!1,e.zhaungIndex=0,e.table_0="bar_btn_table_bg_0_png",e.roomSize=4,e.mySeatNo=0,e.blink=0,e.theFirstGame=!1,e.gameStartTimeout=-1,e.gameIndex=0,e.round=0,e.roundId="",e.myBetNumber=0,e.totalBetNumber=0,e.chipPool=[],e.chipList=[],e.chipTotal=0,e.chipEffectTimeout=-1,e.removeChipTimeout=-1,e.chipPosList=[40,40,40,-130],e.grabInterval=-1,e.grabTime=6,e.totalTime=0,e.bankerInterval=-1,e.runningTime=0,e.bankerList=[],e.bankerChair=0,e.betInterval=-1,e.betTime=6,e.diceInterval=-1,e.startDiceTimeout=-1,e.diceResultTimeout=-1,e.firstPlayer=-1,e.sendingInterval=-1,e.sendCount=0,e.killTimeout=-1,e.gameType=1,e.bankerFlag=!1,e.resultList=[],e.resultDone=!1,e.continueInterval=-1,e.continueTime=5,e.roomType=0,e.effectList=[],e.timeList=[],e.intervalList=[],e.animationList=[],e.isReconnect=!1,e.getPlayerViewBySeatID=function(t){},e.flyIntval=0,e.flyIndex0=0,e.flyIndex1=0,e.effectPlayerIndex=0,e.effectCount=0,e.skinName="RBGViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.getOrginCardPos(),this.addEvent(),this.initData(),this.setCountdown()},e.prototype.initData=function(){this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this.grpBankerList.visible=!1,this.grpCoins.touchEnabled=!1,this.grpTips.touchEnabled=!1,this.grpTips.touchChildren=!1,this.grpTips.visible=!1,this.grpResult.visible=!1,this.imgBaoZhuang.visible=!1,this.grpCard.visible=!0,this._btn_switch.visible=!1,this._group_qiang.visible=!1,this.zhaungIndex=0},e.prototype.getOrginCardPos=function(){for(var t=0;4>t;t++){this["labCardType"+t].visible=!1;for(var e=[],i=0;2>i;i++){var n=this["grpCard_"+t+"_"+i];n.setPai(null),n.setAnPai(!0),n.visible=!1,n.anchorOffsetX=n.width/2,n.x+=n.width/2;var s=new egret.Point;s.x=n.x,s.y=n.y,e[i]=s}this.orginPlayerCardPos[t]=e}for(var r=1;4>r;r++)this["grpHead"+r].setUserInfo("","","")},e.prototype.resize=function(){},e.prototype.onClick=function(t){var e=this;if(t.target==this._btn_begin){console.log("_btn_begin");var i={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token};xlLib.WebSocketMgr.getInstance().send(EventConst.erbagang_start,i,function(t){e._btn_begin.visible=!1,UserInfo.getInstance().isGameStart=!0},this)}else t.target==this._btn_buqiang?(console.log("_btn_buqiang"),this.sendamessage(EventConst.erbagang_hog,0)):t.target==this._btn_qiang_1?(console.log("_btn_qiang_1"),this.sendamessage(EventConst.erbagang_hog,1)):t.target==this._btn_qiang_2?(console.log("_btn_qiang_2"),this.sendamessage(EventConst.erbagang_hog,2)):t.target==this._btn_qiang_3?(console.log("_btn_buqiang"),this.sendamessage(EventConst.erbagang_hog,3)):t.target==this._btn_qiang_4?(console.log("_btn_qiang_4"),this.sendamessage(EventConst.erbagang_hog,4)):t.target==this._btn_double_1?(console.log("_btn_double_1"),this.sendamessage1(EventConst.erbagang_bet,1),this._btn_switch.visible=!1):t.target==this._btn_double_2?(console.log("_btn_double_2"),this.sendamessage1(EventConst.erbagang_bet,2),this._btn_switch.visible=!1):t.target==this._btn_double_3?(console.log("_btn_double_3"),this.sendamessage1(EventConst.erbagang_bet,3),this._btn_switch.visible=!1):t.target==this._btn_double_4?(console.log("_btn_double_4"),this.sendamessage1(EventConst.erbagang_bet,4),this._btn_switch.visible=!1):t.target==this._btn_double_5&&(console.log("_btn_double_5"),this.sendamessage1(EventConst.erbagang_bet,5),this._btn_switch.visible=!1)},e.prototype.sendamessage=function(t,e){var i={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,data:e};xlLib.WebSocketMgr.getInstance().send(t,i,function(t){},this),this._group_qiang.visible=!1},e.prototype.sendamessage1=function(t,e){var i={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,data:e};xlLib.WebSocketMgr.getInstance().send(t,i,function(t){},this)},e.prototype.addEvent=function(){this._btn_begin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_buqiang.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.Onquit,this),EventUtil.addEventListener(EventConst.players,this.addPlayers,this),EventUtil.addEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.addEventListener(EventConst.hog,this.onHogBack,this),EventUtil.addEventListener(EventConst.hognum,this.onHognumBack,this),EventUtil.addEventListener(EventConst.banker,this.acceptbanker,this),EventUtil.addEventListener(EventConst.bet,this.onBetBack,this),EventUtil.addEventListener(EventConst.betnum,this.onBetnumBack,this),EventUtil.addEventListener(EventConst.summary,this.over,this)},e.prototype.onTicker=function(t){this._time||(this._time=t);var e=t,i=e-this._time;return this._time=e,dragonBones.WorldClock.clock.advanceTime(i/1e3),!1},e.prototype.setFirstAnimation=function(){},e.prototype.setSice=function(t,e,i,n){void 0===n&&(n=4e3),this.dice0.source="bar_sicbo_"+t+"_png",this.dice1.source="bar_sicbo_"+e+"_png",this.firstPlayer=i,this.diceBottom.visible=!1,this.dice0.visible=!1,this.dice1.visible=!1,this.diceTop.visible=!1,n>=4e3?(this.deleteIntervalList("diceInterval"),this.diceInterval=egret.setInterval(this.setDiceAnimation,this,200),this.pushIntervalList("diceInterval"),this.deleteTimeList("startDiceTimeout"),this.startDiceTimeout=egret.setTimeout(function(){},this,300),this.pushTimeList("startDiceTimeout"),this.deleteTimeList("diceResultTimeout"),this.diceResultTimeout=egret.setTimeout(this.playDiceResult,this,2800),this.pushTimeList("diceResultTimeout")):(this.diceBg.visible=!1,this.diceBottom.visible=!0,this.dice0.visible=!0,this.dice1.visible=!0,this.diceTop.visible=!0,this.diceTop.horizontalCenter=16,this.diceTop.verticalCenter=-102,this.diceTop.alpha=1,this.getPlayerViewBySeatID(this.firstPlayer))
},e.prototype.setDiceAnimation=function(){this.diceGroup.visible=!0,this.deleteEffectList("diceBg"),this.diceBg.visible=!0,this.diceBg.rotation=0,this.pushEffectList("diceBg"),egret.Tween.get(this.diceBg).to({rotation:20},50).to({rotation:0},50).to({rotation:-20},50).to({rotation:0},50)},e.prototype.stopDiceAnimation=function(){this.deleteEffectList("diceBg"),this.deleteEffectList("diceTop"),this.diceBg.visible=!1,this.diceTop.visible=!1,this.dice0.visible=!1,this.dice1.visible=!1,this.diceBottom.visible=!1,this.diceGroup.visible=!1},e.prototype.playDiceResult=function(){this.deleteIntervalList("diceInterval"),this.deleteEffectList("diceBg");var t=this.diceBg.verticalCenter;this.pushEffectList("diceBg"),egret.Tween.get(this.diceBg).to({verticalCenter:t-10},150).to({verticalCenter:t},150).wait(100).call(function(){this.deleteEffectList("diceBg"),this.diceBg.visible=!1,this.diceBottom.visible=!0,this.dice0.visible=!0,this.dice1.visible=!0,this.diceTop.visible=!0,this.diceTop.horizontalCenter=16,this.diceTop.verticalCenter=-102,this.diceTop.alpha=1,this.pushEffectList("diceTop"),egret.Tween.get(this.diceTop).to({rotation:75,horizontalCenter:500,verticalCenter:-400},400).to({alpha:0},50),this.getPlayerViewBySeatID(this.firstPlayer).setFirstAnimation()},this)},e.prototype.pushAnimation=function(t){this.animationList.indexOf(t)<0&&this.animationList.push(t)},e.prototype.deleteAnimation=function(t){var e=this.animationList.indexOf(t);e>-1&&(this[t].stop(),this[t].visible=!1,this.animationList.splice(e,1))},e.prototype.removeAllAnimation=function(){for(var t=0,e=this.animationList,i=e.length;i>t;t++)this[e[t]].stop(),this[e[t]].visible=!1;this.animationList=[]},e.prototype.pushEffectList=function(t){this.effectList.indexOf(t)<0&&this.effectList.push(t)},e.prototype.deleteEffectList=function(t){var e=this.effectList.indexOf(t);e>-1&&(-1!=this[t]&&egret.Tween.removeTweens(this[t]),this.effectList.splice(e,1))},e.prototype.removeAllEffectList=function(){for(var t=0,e=this.effectList,i=e.length;i>t;t++)-1!=this[e[t]]&&egret.Tween.removeTweens(this[e[t]]);this.effectList=[]},e.prototype.pushTimeList=function(t){this.timeList.indexOf(t)<0&&this.timeList.push(t)},e.prototype.deleteTimeList=function(t){var e=this.timeList.indexOf(t);e>-1&&(-1!=this[t]&&(egret.clearTimeout(this[t]),this[t]=-1),this.timeList.splice(e,1))},e.prototype.removeAllTimeList=function(){for(var t=0,e=this.timeList,i=e.length;i>t;t++)-1!=this[e[t]]&&(egret.clearTimeout(this[e[t]]),this[e[t]]=-1);this.timeList=[]},e.prototype.pushIntervalList=function(t){this.intervalList.indexOf(t)<0&&this.intervalList.push(t)},e.prototype.deleteIntervalList=function(t){var e=this.intervalList.indexOf(t);e>-1&&(-1!=this[t]&&(egret.clearInterval(this[t]),this[t]=-1),this.intervalList.splice(e,1))},e.prototype.removeAllIntervalList=function(){for(var t=0,e=this.intervalList,i=e.length;i>t;t++)-1!=this[e[t]]&&(egret.clearInterval(this[e[t]]),this[e[t]]=-1);this.intervalList=[]},e.prototype.addPlayers=function(t){for(var e=0;e<UserInfo.getInstance().playes.length;e++)null!=t._obj.player[e]?this["grpHead"+e].setUserInfo(UserInfo.getInstance().playes[e].username,UserInfo.getInstance().playes[e].goldcoins,"women6_png"):this["grpHead"+e].setUserInfo("","","")},e.prototype.playerJoinRoom=function(t){console.log(t._obj.player.id),console.log(UserInfo.getInstance().myPlayer.id),t._obj.player.id==UserInfo.getInstance().myPlayer.id||this["grpHead"+t._obj.player.index].setUserInfo(t._obj.player.username,t._obj.player.goldcoins,"women6_png")},e.prototype.onHogBack=function(t){this._group_qiang.visible=!0},e.prototype.onHognumBack=function(t){this.qiangBetPointShow(t._obj.index,t._obj.hogOrBet)},e.prototype.acceptbanker=function(t){var e=UserInfo.getInstance().findSeatNumber(t._obj.index);this.zhaungIndex=e,0==e?this._my_img_zhuang.visible=!0:this["grpHead"+e].setZhuang(!0)},e.prototype.onBetBack=function(t){this.showGameTips(2),this._group_qiang.visible=!1,this._btn_switch.visible=!0},e.prototype.onBetnumBack=function(t){this.betPointShow(t._obj.index,t._obj.hogOrBet)},e.prototype.over=function(t){for(var e={pokes:[],startPoint:0,endPoint:0},i=0;i<t._obj.players.length;i++){var n={num:t._obj.players[i].ratio,value:t._obj.players[i].cardsList,index:t._obj.players[i].index,win:t._obj.players[i].win,score:t._obj.players[i].score};e.pokes.push(n)}e.startPoint=t._obj.players[0].index,3==t._obj.players[0].index?e.endPoint=0:e.endPoint=t._obj.players[0].index+1,console.log(e),this.cardResult=e,this.cardEffect(),UserInfo.getInstance().isGameStart=!1},e.prototype.qiangBetPointShow=function(t,e){var i=UserInfo.getInstance().findSeatNumber(t);if(0==e)return this["_buqiang_point_"+i].visible=!0,void EffectUtils.playEffect5(this["_buqiang_point_"+i],800,function(){});this["_group_qiang_point_"+i].visible=!0;var n=this["_label_qiang_"+i];n.text=""+e,EffectUtils.playEffect5(this["_group_qiang_point_"+i],800,function(){})},e.prototype.betPointShow=function(t,e){var i=UserInfo.getInstance().findSeatNumber(t);this["_group_bet_point_"+i].visible=!0;var n=this["_label_bet_"+i];n.text=""+e,EffectUtils.playEffect5(this["_group_bet_point_"+i],800,function(){})},e.prototype.setCountdown=function(){this.cdTimer=new egret.Timer(1e3),this.cdTimer.addEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e.prototype.clacTimer=function(){this.cdNum>0?this.cdNum--:(this.cdTimer.stop(),this.cdNum=0,this.resetGame()),this.cdNum<10?(this.labCountdown0.text="0",this.labCountdown1.text=this.cdNum+""):(this.labCountdown0.text=(this.cdNum+"").split("")[0],this.labCountdown1.text=(this.cdNum+"").split("")[1])},e.prototype.joinCallback=function(t){if(200==t.code){this.curRate=t.data.rate;for(var e=t.data,i=t.data.seats,n=0;n<i.length;n++)this["imghead"+i[n].seat].source=i[n].headurl,this["labelHead"+i[n].seat].text=i[n].name,this["imghead"+i[n].seat].height=this["imghead"+i[n].seat].width=70;this.limitGold=e.limitGold,this.limitVip=e.limitVip,this.cdNum=e.time,this.cdTimer.start(),1==t.state?this.isCanBets=!1:2==t.state?this.isCanBets=!0:3==t.state&&(this.isCanBets=!1),console.log("join_game: "+e.state)}},e.prototype.onMsgListen=function(t){var e=t.msg;switch(console.log("onMsgListen: "+e.type,"_niuniuMsgListen_"),e.type){case 0:this.cdNum=parseInt(e.time)+3,this.cdTimer.start();break;case 1:this.isCanBets=!1,this.showGameTips(3);break;case 2:this.setGameResult(e.data);break;case 3:this.changeBankerObj=e.zhuang,this.isChangeBanker=!0;break;case 4:this.updataSeat(1,e.data);break;case 5:this.updataSeat(2,e.seat);break;case 6:this.updateHandsel(e);break;case 7:}},e.prototype.setGameResult=function(t){this.cardResult=t},e.prototype.updataSeat=function(t,e){1==t?(this["imghead"+e.seat].source=e.headurl,this["imghead"+e.seat].height=this["imghead"+e.seat].width=70,this["labelHead"+e.seat].text=e.nick):(this["imghead"+e].source="",this["labelHead"+e].text="")},e.prototype.updateHandsel=function(t){if(null!=this.cardResult){this.maxUserData=t.data.max,this.banker_total_gold=t.data.bankerTotalGold;for(var e=0;4>e;e++)this["labTipsClick"+e].visible=!1;this.cardEffect()}},e.prototype.getBetsCallback=function(t){if(200==t.code)for(var e=t.list,i=1;5>i;i++)if(0!=e[i].score){if(e[i].score==this.poolBetArray[i])continue;this.isCanBets&&this.showCoins(e[i].score-this.poolBetArray[i],i),parseInt(this["labBetsPool"+(i-1)].text)<e[i].score/1e4&&(this.poolBetArray[i]=e[i].score)}},e.prototype.onTouchCharge=function(){},e.prototype.showGameTips=function(t){this.grpTipsInfo.source=RBGUtil.getInstance().getMsgSource(t),this.grpTips.visible=!0,this.grpTipsbg.alpha=0,this.grpTipsInfo.x=640,this.playClickSound(RBGUtil.getInstance().getSoundEffect(t)),egret.Tween.get(this.grpTipsbg).to({alpha:1},400).wait(400).call(function(){egret.Tween.get(this).to({alpha:0},400)},this.grpTipsbg),egret.Tween.get(this.grpTipsInfo).to({x:0},400).wait(400).call(function(){egret.Tween.get(this).to({x:-1640},400)},this.grpTipsInfo)},e.prototype.showCoins=function(t,e){var i=!1;this.playClickSound(RBGUtil.getInstance().getSoundEffect(8));var n=RBGUtil.getInstance().getCoinsPos(e),s=RBGUtil.getInstance().coinsType(t);this.coinsNumArr[e]<50?(this.coinsNumArr[e]=parseInt(this.coinsNumArr[e])+s.length,i=!1):i=!0;for(var r=0;r<s.length;r++){var o=n.x+50*Math.random(),a=n.y+50*Math.random();this.grpCoins.addChild(s[r]),egret.Tween.get(s[r]).to({x:o,y:a},200).call(function(){this[0]&&this[1].parent.removeChild(this[1])},[i,s[r]])}},e.prototype.cardEffect=function(){this._btn_switch.visible=!1,this._group_qiang.visible=!1,this.isCardEffectShow=!0,this.flyIndex0=this.cardResult.startPoint,this.flyIntval=setInterval(this.playCardFly.bind(this),200)},e.prototype.playCardFly=function(){var t=this["grpCard_"+this.flyIndex0+"_"+this.flyIndex1];t.setPai(null),t.setAnPai(!0),t.visible=!0,t.x=713.5,t.y=300,t.anchorOffsetX=t.width/2,t.x+=t.width/2;var e=this.orginPlayerCardPos[this.flyIndex0][this.flyIndex1];this.playClickSound(RBGUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},300),1==this.flyIndex1?(this.flyIndex0==this.cardResult.endPoint&&(this.flyIndex0=0,this.flyIndex1=0,clearInterval(this.flyIntval),this.effectPlayerIndex=this.cardResult.startPoint,this.effectCount=0,this.interval=setInterval(this.playerCardRotation.bind(this),800)),0==this.flyIndex0?(this.flyIndex1=0,this.flyIndex0=3):(this.flyIndex1=0,this.flyIndex0--)):this.flyIndex1++},e.prototype.playerCardRotation=function(){this.playClickSound(RBGUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes,e=this.effectCount,i=0;2>i;i++){var n=this["grpCard_"+this.effectPlayerIndex+"_"+i];n.setPai(null),n.setAnPai(!0),egret.Tween.get(n).to({scaleX:0},300).call(function(){this[0].setPai(this[1]),this[0].setAnPai(!1),egret.Tween.get(this[0]).to({scaleX:1},300)},[n,t[e].value[i]])}return 0==this.effectPlayerIndex?this.effectPlayerIndex=3:this.effectPlayerIndex--,this.effectCount++,this.effectPlayerIndex==this.cardResult.startPoint?(this.effectPlayerIndex=0,this.effectCount=0,clearInterval(this.interval),void(this.interval=setInterval(this.cardEffectEnd.bind(this),2e3))):void 0},e.prototype.blinkEffect=function(){clearInterval(this.interval),this.interval=setInterval(this.cardEffectEnd.bind(this),2e3)},e.prototype.cardEffectEnd=function(){clearInterval(this.interval),this.cdTimer.start(),this.cdNum=5,this.playClickSound(RBGUtil.getInstance().getSoundEffect(9));var t={x:this["grpHead"+this.zhaungIndex].x,y:this["grpHead"+this.zhaungIndex].y};0==this.zhaungIndex?(t.x=this._group_di.x+15+145,t.y=this._group_di.y-35+103):(t.x=t.x+21,t.y=t.y+110);for(var e={x:0,y:0},i={x:0,y:0},n=(this.cardResult.pokes,0);n<this.cardResult.pokes.length;n++){var s=UserInfo.getInstance().findSeatNumber(this.cardResult.pokes[n].index);0==s?(e.x=this._group_di.x+15+145,e.y=this._group_di.y-35+103,i.x=e.x+42,i.y=e.y+2):(e.x=this["grpHead"+s].x+21,e.y=this["grpHead"+s].y+110,i.x=e.x+30,i.y=e.y+5),1==this.cardResult.pokes[n].win?(xlLib.TipsUtils.showTipsDownToUp("+"+this.cardResult.pokes[n].score,i.x,i.y,!1),this.updatePlayerGold(s,this.cardResult.pokes[n].score,!0)):(xlLib.TipsUtils.showTipsDownToUp("-"+this.cardResult.pokes[n].score,i.x,i.y,!1),this.updatePlayerGold(s,this.cardResult.pokes[n].score,!1)),this.zhaungIndex!=s&&(1==this.cardResult.pokes[n].win?EffectUtils.coinsFly(this,t.x,t.y,e.x,e.y):EffectUtils.coinsFly(this,e.x,e.y,t.x,t.y))}},e.prototype.updatePlayerGold=function(t,e,i){var n=UserInfo.getInstance().playes[t].goldcoins;1==i?n+=e:n-=e,UserInfo.getInstance().playes[t].goldcoins=n,0==t?this.labelGold0.text=n+"":this["grpHead"+t].setGold(n)},e.prototype.suiCoreGameEndScoreResultEffect=function(t,e,i){var n=new eui.BitmapLabel;1==e?(n.font="qznn_win_fnt",n.text="+0"):(n.font="qznn_lose_fnt",n.text="0"),n.scaleX=1,n.scaleY=1,n.x=500,n.y=500,t.addChild(n)},e.prototype.resetGame=function(){for(var t=0;4>t;t++){this["labCardType"+t].visible=!1;for(var e=0;2>e;e++){var i=this["grpCard_"+t+"_"+e];i.setPai(null),i.setAnPai(!0),i.visible=!1}0!=t&&this["grpHead"+t].setZhuang(!1)}for(this._my_img_zhuang.visible=!1,this.zhaungIndex=0,this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0};this.grpCoins.numChildren>0;)this.grpCoins.removeChildAt(0);this._my_img_zhuang.visible=!1,this._btn_begin.visible=!0,this.isCanBets=!0,this.isBets=!1,this.imgBaoZhuang.visible=!1,this.resultCaijin=0,this.grpCaijin.visible=!1,this.isCoinsReturn=!0,this.isCardEffectShow=!1,this.labCountdown0.text="0",this.labCountdown1.text="0"},e.prototype.getHistoryCallback=function(t){for(var e=t.data,i=0;10>i;i++)if(i<e.length){this["grpHistroy"+i].visible=!0;for(var n=e[i],s=0;4>s;s++)this["grpHistroy"+s+"_"+i].source=1==n[s]?"nn.a8":"nn.a7"}else this["grpHistroy"+i].visible=!1;this.grpSecondPanel.visible=!0,this.grpCardType.visible=!1,this.grpHistory.visible=!0},e.prototype.updateDataGold=function(){},e.prototype.playClickSound=function(t){xlLib.SoundMgr.instance.playSound(t+"_mp3")},e.prototype.Onquit=function(){if(UserInfo.getInstance().isGameStart)return void xlLib.TipsUtils.showFloatWordTips("游戏中！");var t={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token};xlLib.WebSocketMgr.getInstance().send(EventConst.niuniu_leave,t,function(t){UserInfo.getInstance().playes=[],xlLib.SceneMgr.instance.changeScene(Lobby)},this)},e.prototype.destroy=function(){this._btn_begin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_double_5.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_buqiang.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_qiang_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.Onquit,this),EventUtil.removeEventListener(EventConst.players,this.addPlayers,this),EventUtil.removeEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.removeEventListener(EventConst.hog,this.onHogBack,this),EventUtil.removeEventListener(EventConst.hognum,this.onHognumBack,this),EventUtil.removeEventListener(EventConst.banker,this.acceptbanker,this),EventUtil.removeEventListener(EventConst.bet,this.onBetBack,this),EventUtil.removeEventListener(EventConst.betnum,this.onBetnumBack,this),EventUtil.removeEventListener(EventConst.summary,this.over,this),null!=this.cdTimer&&this.cdTimer.removeEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e}(eui.Component);__reflect(RBGView.prototype,"RBGView");var orderinquiry=function(t){function e(){var e=t.call(this)||this;return e.skinName="orderinquirySkin",e.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick1,e),e}return __extends(e,t),e.prototype.onClick1=function(t){t.target==this.btn_return&&(console.log("btn_return"),xlLib.PopUpMgr.removePopUp(e,1))},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.Component);__reflect(orderinquiry.prototype,"orderinquiry",["eui.UIComponent","egret.DisplayObject"]);var RechargeTypeItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RechargeTypeItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){},e}(eui.ItemRenderer);__reflect(RechargeTypeItem.prototype,"RechargeTypeItem");var RechargeView=function(t){function e(){var e=t.call(this)||this;return e.skinName="RechargeViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=[{name:"定额支付宝",down_url:"btn_fixationAlipay_1_png",up_url:"btn_fixationAlipay_0_png"},{name:"支付宝",down_url:"btn_Alipay_1_png",up_url:"btn_Alipay_0_png"},{name:"银联",down_url:"btn_Unionpay_1_png",up_url:"btn_Unionpay_0_png"},{name:"官方代理",down_url:"btn_Theofficialagent_1_png",up_url:"btn_Theofficialagent_0_png"}];this._recharge_meun.dataProvider=new eui.ArrayCollection(e),this._recharge_meun.useVirtualLayout=!0,this._recharge_meun.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick1,this),this.btn_ddcx.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick1,this)},e.prototype.onBarItemTap=function(t){this._viewlist.selectedIndex=t.itemIndex},e.prototype.onClick1=function(t){t.target==this.btn_return?(console.log("btn_return"),xlLib.PopUpMgr.removePopUp(e,1)):t.target==this.btn_ddcx&&(console.log("btn_ddcx"),xlLib.PopUpMgr.addPopUp(orderinquiry,null,!0,!0,null,1))},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.destroy=function(){this._recharge_meun.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBarItemTap,this),this.btn_return.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick1,this),this.btn_ddcx.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick1,this)},e}(eui.Component);__reflect(RechargeView.prototype,"RechargeView",["eui.UIComponent","egret.DisplayObject"]);var SafeBoxTypeItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SafeBoxTypeItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){},e}(eui.ItemRenderer);__reflect(SafeBoxTypeItem.prototype,"SafeBoxTypeItem");var xlLib;!function(t){function e(e){e instanceof Object&&(t.Console.init(e.debug,e.logLevel),t.ScreenUtils&&t.ScreenUtils.init(e.scaleMode),n.lobbyMode=e.lobbyMode,e.nativeStorage&&(n.nativeStorage=e.nativeStorage),e.platId&&(n.platId=e.platId),e.appId&&(n.appId=e.appId))}var i=function(){function t(){this.logLevel=7,this.lobbyMode=!1,this.scaleMode="exactFit"}return t}();t.initOptions=i,__reflect(i.prototype,"xlLib.initOptions"),t.init=e;var n=function(){function e(){}return e.PhoneCallStatus=function(e){"callDisconnected"==e.data.callState&&egret.Capabilities.engineVersion<"3.2.6"&&setTimeout(function(){t.ZQGameSdk&&t.ZQGameSdk.speakerActive()},4e3)},e.Event=function(e,i,n,s){return void 0===i&&(i=null),void 0===n&&(n=!1),void 0===s&&(s=!1),new t.ZqEvent(e,i)},e.dispatchEvent=function(e,i,n,s){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===s&&(s=!1);var r=new t.ZqEvent(e,i,n,s);t.ZqListener.getInstance().dispatchEvent(r)},e.hasEventListener=function(e){return t.ZqListener.getInstance().hasEventListener(e)},e.addEventListener=function(e,i,n,s,r){void 0===s&&(s=!1),void 0===r&&(r=0),t.ZqListener.getInstance().addEventListener(e,i,n,s,r)},e.removeEventListener=function(e,i,n,s){void 0===s&&(s=!1),t.ZqListener.getInstance().removeEventListener(e,i,n,s)},Object.defineProperty(e,"lobbyMode",{get:function(){return this._lobbyMode},set:function(t){this._lobbyMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resVersion",{get:function(){var e="";if(t.Global.isH5){var i=document.querySelector('meta[name="res-version"]');null!=i&&(e=i.getAttribute("content")),null!=e&&""!=e&&(e="_"+e)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"thmVersion",{get:function(){var e="";if(t.Global.isH5){var i=document.querySelector('meta[name="thm-version"]');null!=i&&(e=i.getAttribute("content")),null!=e&&""!=e&&(e="_"+e)}return e},enumerable:!0,configurable:!0}),e.setPlatInfo=function(e,i,n){t.Utils.setLocalStorage(n+"|"+i+"|platToken",e)},e.setPlatToken=function(i,n,s){e.platId=n,e.gameId=s,t.Utils.setLocalStorage(s+"|"+n+"|platToken",i)},e.openAgent=function(e,i,n,s,r){var o=e+"?code="+i+"&platid="+n+"&gameid="+s;t.ZQGameSdk&&t.ZQGameSdk.openWeb(o,r)},e.isIos=function(){return"ios"==this.sys_type?!0:!1},e.isActive=!0,e.debugLevel=0,e.version="v1.1.1_161128235600",e.designWidth=1280,e.designHeight=720,e.isRestarting=!1,e.gameId=0,e.lobbyGameId=0,e.is_sandbox=0,e.sys_type="",e.mtype="unknown",e.appId="wx0e52b1eba8f9fb14",e.thirdPlatDir="thirdPlatDir/",e.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},e.isTestModul=!1,e.isInGame=!1,e.bundleId="",e._lobbyMode=!1,e.isCacheToken=!0,e.logUrl="http://server.login.bwgame.com.cn:8020/logger/clientlog",e.platId=0,e.zoneId=0,e}();t.Global=n,__reflect(n.prototype,"xlLib.Global")}(xlLib||(xlLib={}));var global,testh5=function(){var t;t=this.navigator?!0:!1;try{global&&(t=!1)}catch(e){}return t};xlLib.Global.isH5=testh5();var SetTypeItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="SetTypeItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){},e}(eui.ItemRenderer);__reflect(SetTypeItem.prototype,"SetTypeItem");var SetView=function(t){function e(){var e=t.call(this)||this;return e.skinName="SetViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=[{name:"游戏设置",down_url:"btn_settings_1_png",up_url:"btn_settings_0_png"},{name:"新手教程",down_url:"btn_xsjc_1_png",up_url:"btn_xsjc_0_png"},{name:"账号管理",down_url:"btn_accountmanagement_1_png",up_url:"btn_accountmanagement_0_png"},{name:"意见反馈",down_url:"btn_yjfk_1_png",up_url:"btn_yjfk_0_png"}];this._Set_meun.dataProvider=new eui.ArrayCollection(e),this._Set_meun.useVirtualLayout=!0,this._Set_meun.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick1,this),this.toggleSwitch0=new EToggleSwitch(this,"switchOff_png","switchOn_png","switchBar_png",this.toggleCallback),this.toggleSwitch0.setBindData("toggleSwitch0"),this.toggleSwitch0.x=285,this.toggleSwitch0.y=75,this.toggleSwitch1=new EToggleSwitch(this,"switchOff_png","switchOn_png","switchBar_png",this.toggleCallback),this.toggleSwitch1.setBindData("toggleSwitch1"),this.toggleSwitch1.x=736,this.toggleSwitch1.y=75,this.toggleSwitch2=new EToggleSwitch(this,"switchOff_png","switchOn_png","switchBar_png",this.toggleCallback),this.toggleSwitch2.setBindData("toggleSwitch2"),this.toggleSwitch2.x=285,this.toggleSwitch2.y=245,this.txt0=new eui.Label,this.txt0.text="开",this.txt0.x=360,this.txt0.y=85,this.txt0.touchEnabled=!1,this.txt1=new eui.Label,this.txt1.text="开",this.txt1.x=811,this.txt1.y=85,this.txt1.touchEnabled=!1,this.txt2=new eui.Label,this.txt2.text="开",this.txt2.x=360,this.txt2.y=255,this.txt2.touchEnabled=!1,this.btn_yxsz_1.addChild(this.toggleSwitch0),this.btn_yxsz_1.addChild(this.toggleSwitch1),this.btn_yxsz_1.addChild(this.toggleSwitch2),this.btn_yxsz_1.addChild(this.txt0),this.btn_yxsz_1.addChild(this.txt1),this.btn_yxsz_1.addChild(this.txt2)},e.prototype.toggleCallback=function(t){if("toggleSwitch0"==t){if(this.toggleSwitch0.getSelected())return void(this.txt0.text="关");this.txt0.text="开"}else if("toggleSwitch1"==t){if(this.toggleSwitch1.getSelected())return void(this.txt1.text="关");this.txt1.text="开"}else if("toggleSwitch2"==t){if(this.toggleSwitch2.getSelected())return void(this.txt2.text="关");this.txt2.text="开"}},e.prototype.onBarItemTap=function(t){this._viewlist_set.selectedIndex=t.itemIndex},e.prototype.onClick1=function(t){xlLib.PopUpMgr.removePopUp(e,1)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.destroy=function(){this._Set_meun.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.btn_return.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick1,this)},e}(eui.Component);__reflect(SetView.prototype,"SetView");var TBNNHead=function(t){function e(){var e=t.call(this)||this;return e.skinName="TBNNHeadSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this);var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawCircle(46,46,46),e.graphics.endFill(),e.x=this.imghead.x+3,e.y=this.imghead.y+3,this.addChild(e),this.imghead.mask=e},e.prototype.setUserInfo=function(t,e,i){this.imghead.source=i,this.labelName.text=t,this.labelGold.text=e},e.prototype.setGold=function(t){this.labelGold.text=t+""},e.prototype.destroy=function(){},e}(eui.Component);__reflect(TBNNHead.prototype,"TBNNHead");var TBNNroomView=function(t){function e(){var e=t.call(this)||this;return e.skinName="TBNNroomViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this._coin_label.text=""+UserInfo.getInstance().goldcoins,this._btn_cjc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this),EventUtil.addEventListener(EventConst.onGameStatusChange,this.GameStatus,this)},e.prototype.GameStatus=function(t){200==t._obj.code&&xlLib.SceneMgr.instance.changeScene(TBNNScene)},e.prototype.onEnterGame=function(){if(this.gameIconData){var t=UserInfo.getInstance().getGameDataByindex(this.gameIconData.game),e=t.getTypeDataByindex(this.gameIconData.type),i=e.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),n={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:i.id};xlLib.WebSocketMgr.getInstance().send(EventConst.joinroom,n,function(t){},this)}},e.prototype.setGameIconData=function(t){this.gameIconData=t},e.prototype.dispose=function(){xlLib.PopUpMgr.removePopUp(this,1)},e.prototype.destroy=function(){this.gameIconData=null,this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this)},e}(eui.Component);__reflect(TBNNroomView.prototype,"TBNNroomView",["eui.UIComponent","egret.DisplayObject"]);var TBNNScene=function(t){function e(){var e=t.call(this)||this;return e.TBNNView=new TBNNView,e.uiLayer.addChild(e.TBNNView),e}return __extends(e,t),e.prototype.destroy=function(){this.TBNNView.destroy(),t.prototype.destroy.call(this)},e.prototype.resize=function(){this.TBNNView&&this.TBNNView.resize()},e}(xlLib.GameScene);__reflect(TBNNScene.prototype,"TBNNScene");var TBNNUtil=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getBetNumber=function(t){switch(t){case 0:return Math.pow(10,4);case 1:return Math.pow(10,5);case 2:return Math.pow(10,6);case 3:return Math.pow(10,7);case 4:return 5*Math.pow(10,7);case 5:return Math.pow(10,8)}},t.prototype.getMsgSource=function(t){var e="";switch(t){case 2:e="nn.d2";break;case 3:e="nn.d3";break;case 4:e="nn.d4";break;case 5:e="nn.d5"}return e},t.prototype.getCoinsPos=function(t){var e=new egret.Point;switch(t){case 1:e.x=195,e.y=523;break;case 2:e.x=383,e.y=523;break;case 3:e.x=195,e.y=633;break;case 4:e.x=383,e.y=633}return e},t.prototype.getCardType2=function(t){switch(t){case 0:return"无牛";case 1:return"牛一";case 2:return"牛二";case 3:return"牛三";case 4:return"牛四";case 5:return"牛五";case 6:return"牛六";case 7:return"牛七";case 8:return"牛八";case 9:return"牛九";case 10:return"牛牛";case 11:return"四炸";case 12:return"五花牛";case 13:return"五小牛"}},t.prototype.getCardType=function(t){switch(t){case 0:return"nn.n1";case 1:return"nn.n2";case 2:return"nn.n3";case 3:return"nn.n4";case 4:return"nn.n5";case 5:return"nn.n6";case 6:return"nn.n7";case 7:return"nn.n8";case 8:return"nn.n9";case 9:return"nn.n10";case 10:return"nn.n11";case 11:return"nn.n13";case 12:return"nn.n14";case 13:return"nn.n12"}},t.prototype.getCardMusicType=function(t){switch(t){case 0:return"nn.niu0";case 1:return"nn.niu1";case 2:return"nn.niu2";case 3:return"nn.niu3";case 4:return"nn.niu4";case 5:return"nn.niu5";case 6:return"nn.niu6";case 7:return"nn.niu7";case 8:return"nn.niu8";case 9:return"nn.niu9";case 10:return"nn.niuniu";case 11:return"nn.playNiuZhadan";case 12:return"nn.playNiu5hua";case 13:return"nn.playNiuXiao5"}},t.prototype.coinsType=function(t){var e=[],i=0,n="";t=Math.round(t/1e4),t>0&&10>t?(i=t,n="nn.b1a"):t>9&&100>t?(i=t/10,n="nn.b2a"):t>99&&1e3>t?(i=t/100,n="nn.b3a"):t>999&&5e3>t?(i=t/1e3,n="nn.b4a"):t>4999&&1e4>t?(i=t/5e3,n="nn.b5a"):(i=t/1e4,n="nn.b6a");for(var s=0;s<Math.round(i);s++){var r=new eui.Image(n),o=this.coinPos();r.x=o.x,r.y=o.y,e.push(r)}return e},t.prototype.coinPos=function(){var t=new egret.Point,e=Math.floor(4*Math.random());switch(e){case 0:t.x=-100,t.y=400;break;case 1:t.x=-100,t.y=800;break;case 2:t.x=650,t.y=400;break;case 3:t.x=650,t.y=800}return t},t.prototype.getSoundEffect=function(t){switch(t){case 0:return"bgm";case 1:return"nn.jackpot";case 2:return"nn.start";case 3:return"nn.end";case 4:return"nn.ts";case 5:return"nn.tp";case 6:return"nn.dealCard";case 7:return"nn.openCard";case 8:return"nn.stake";case 9:return"gold_diaoluo"}},t.instance=null,t}();__reflect(TBNNUtil.prototype,"TBNNUtil");var TBNNView=function(t){function e(){var e=t.call(this)||this;return e.r=null,e.interval=-1,e.selfbetsNum={},e.betsPostion=-1,e.betsNum=0,e.cardResult=null,e.isChangeBanker=!1,e.changeBankerObj={},e.isCanBets=!0,e.poolBetArray={},e.limitGold=0,e.limitVip=0,e.curBankerRanking=-1,e.isApplyBanker=!1,e.lastGameBankerNum=0,e.isSysBanker=!1,e.orginBankerCardPos=[],e.orginPlayerCardPos=[],e.isBanker=!1,e.isBets=!1,e.maxUserData=null,e.banker_total_gold=0,e.isBoomBanker=!1,e.resultCaijin=0,e.totalCaijin=0,e.cdNum=10,e.lastTouchBetIndex=-1,e.coinsNumArr={},e.isCoinsReturn=!0,e.curRate=0,e.lastTouchBetTime=0,e.isCardEffectShow=!1,e.flyIntval=0,e.flyIndex0=0,e.flyIndex1=0,e.flyBankerIndex=0,e.effectPlayerIndex=0,e.skinName="TBNNViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.getOrginCardPos(),this.addEvent(),this.initData(),this.labelHead0.text=UserInfo.getInstance().username,this.labelGold0.text=GlobalFunction.Formatconversion(UserInfo.getInstance().goldcoins),UserInfo.getInstance().isGameStart=!0},e.prototype.initData=function(){this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this._btn_switch.visible=!1,this._xiabei.visible=!0,this.grpCountdown.visible=!0;for(var t=0;6>t;t++)this["_xia_"+t].visible=!1,this["_bei_"+t].visible=!1},e.prototype.getOrginCardPos=function(){for(var t=0;5>t;t++){var e=this["bankerCard_"+t];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,this.orginBankerCardPos[t]=i}this.labCardTypeBanker.visible=!1;for(var n=0;5>n;n++){this["labCardType"+n].visible=!1;for(var s=[],r=0;5>r;r++){var e=this["grpCard_"+n+"_"+r];e.source="",e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=new egret.Point;i.x=e.x,i.y=e.y,s[r]=i}this.orginPlayerCardPos[n]=s}},e.prototype.resize=function(){},e.prototype.onClick=function(t){t.target==this._btn_begin?console.log("_btn_begin"):t.target==this._btn_double_1?this.sendamessage(EventConst.niuniu_dobet,1):t.target==this._btn_double_2?this.sendamessage(EventConst.niuniu_dobet,2):t.target==this._btn_double_3?this.sendamessage(EventConst.niuniu_dobet,3):t.target==this._btn_double_4?this.sendamessage(EventConst.niuniu_dobet,4):t.target==this._btn_double_5&&this.sendamessage(EventConst.niuniu_dobet,5)},e.prototype.sendamessage=function(t,e){var i={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,data:e};xlLib.WebSocketMgr.getInstance().send(t,i,function(t){},this)},e.prototype.addEvent=function(){EventUtil.addEventListener(EventConst.players,this.addPlayers,this),EventUtil.addEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.addEventListener(EventConst.onGameStatusChange,this.GameStatus,this),EventUtil.addEventListener(EventConst.onUserBetOrderUpdate,this.OnBetUpdate,this)
},e.prototype.GameStatus=function(t){switch(console.log(t._obj.roomStatus),t._obj.roomStatus){case 0:break;case 1:break;case 2:break;case 3:break;case 4:this.onbetBack(t);break;case 5:break;case 6:break;case 7:break;case 8:}},e.prototype.onbetBack=function(t){this.startCountDown(t._obj.seconds),this._btn_switch.visible=!0},e.prototype.OnBetUpdate=function(t){UserInfo.getInstance().uid==t._obj.userid&&(this._btn_switch.visible=!1),200==t._obj.code&&this.xiazhu(t._obj.hogOrBet,t._obj.index)},e.prototype.xiazhu=function(t,e){console.log(e+"号玩家下注"),this["_xia_"+e].visible=!0,this["_bei_"+e].visible=!0,this["_bei_"+e].source="img_XB_"+t+"_png"},e.prototype.onHogBack1=function(t){},e.prototype.over=function(t){for(var e={pokes:[],result:[1,0,0,0],bankerWin:0,rate:"0.05",bomb:"0"},i=0;i<t._obj.players.length;i++){var n={num:t._obj.players[i].pai.ratio,type:t._obj.players[i].pai.niu,value:t._obj.players[i].cardsList,win:t._obj.players[i].win,score:t._obj.players[i].score};e.pokes.push(n)}this.cardResult=e,this.cardEffect(),UserInfo.getInstance().isGameStart=!1},e.prototype.addPlayers=function(t){var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawCircle(62,62,62),e.graphics.endFill(),e.x=this.imghead0.x+6,e.y=this.imghead0.y+5,this.grpHead0.addChild(e),this.imghead0.mask=e,t._obj.player[0].id==UserInfo.getInstance().myPlayer.id&&(this.labelHead0.text=UserInfo.getInstance().myPlayer.username,this.labelGold0.text=UserInfo.getInstance().myPlayer.goldcoins+"",this.imghead0.source="F1_03_png");for(var i=1;6>i;i++)null!=t._obj.player[i]?this["grpHead"+i].setUserInfo(UserInfo.getInstance().playes[i].username,UserInfo.getInstance().playes[i].goldcoins,"F4_03_png"):this["grpHead"+i].setUserInfo("","","")},e.prototype.playerJoinRoom=function(t){t._obj.player.id==UserInfo.getInstance().myPlayer.id||this["grpHead"+t._obj.player.index].setUserInfo(t._obj.player.username,t._obj.player.goldcoins,"F4_03_png")},e.prototype.startCountDown=function(t){10>t?this.timeTxt.text="0"+t:this.timeTxt.text=""+t,this.timeTxt.visible=!0,this.time=t,null==this.timer&&(this.timer=new egret.Timer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.start())},e.prototype.timerFunc=function(t){this.time>=0?(this.time>=10?this.timeTxt.text=""+this.time:this.timeTxt.text="0"+this.time,this.time--):(this.timeTxt.text="00",this.clearTime())},e.prototype.clearTime=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer=null)},e.prototype.setCountdown=function(){this.cdTimer=new egret.Timer(1e3),this.cdTimer.addEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e.prototype.clacTimer=function(){this.cdNum>0?this.cdNum--:(this.cdTimer.stop(),this.cdNum=0),this.cdNum<10},e.prototype.joinCallback=function(t){if(200==t.code){this.curRate=t.data.rate;for(var e=t.data,i=t.data.seats,n=0;n<i.length;n++)this["imghead"+i[n].seat].source=i[n].headurl,this["labelHead"+i[n].seat].text=i[n].name,this["imghead"+i[n].seat].height=this["imghead"+i[n].seat].width=70;this.limitGold=e.limitGold,this.limitVip=e.limitVip,this.cdNum=e.time,this.cdTimer.start(),1==t.state?this.isCanBets=!1:2==t.state?this.isCanBets=!0:3==t.state&&(this.isCanBets=!1),console.log("join_game: "+e.state)}},e.prototype.onMsgListen=function(t){var e=t.msg;switch(console.log("onMsgListen: "+e.type,"_niuniuMsgListen_"),e.type){case 0:this.cdNum=parseInt(e.time)+3,this.cdTimer.start();break;case 1:this.isCanBets=!1;break;case 2:this.setGameResult(e.data);break;case 3:this.changeBankerObj=e.zhuang,this.isChangeBanker=!0;break;case 4:this.updataSeat(1,e.data);break;case 5:this.updataSeat(2,e.seat);break;case 6:this.updateHandsel(e);break;case 7:}},e.prototype.setGameResult=function(t){this.cardResult=t},e.prototype.updataSeat=function(t,e){1==t?(this["imghead"+e.seat].source=e.headurl,this["imghead"+e.seat].height=this["imghead"+e.seat].width=70,this["labelHead"+e.seat].text=e.nick):(this["imghead"+e].source="",this["labelHead"+e].text="")},e.prototype.updateHandsel=function(t){if(null!=this.cardResult){this.maxUserData=t.data.max,this.banker_total_gold=t.data.bankerTotalGold;for(var e=0;4>e;e++)this["labTipsClick"+e].visible=!1;this.cardEffect()}},e.prototype.getBetsCallback=function(t){if(200==t.code)for(var e=t.list,i=1;5>i;i++)if(0!=e[i].score){if(e[i].score==this.poolBetArray[i])continue;this.isCanBets&&this.showCoins(e[i].score-this.poolBetArray[i],i),parseInt(this["labBetsPool"+(i-1)].text)<e[i].score/1e4&&(this.poolBetArray[i]=e[i].score)}},e.prototype.onTouchCharge=function(){},e.prototype.showCoins=function(t,e){var i=!1;this.playClickSound(TBNNUtil.getInstance().getSoundEffect(8));var n=TBNNUtil.getInstance().getCoinsPos(e),s=TBNNUtil.getInstance().coinsType(t);this.coinsNumArr[e]<50?(this.coinsNumArr[e]=parseInt(this.coinsNumArr[e])+s.length,i=!1):i=!0;for(var r=0;r<s.length;r++){var o=n.x+50*Math.random(),a=n.y+50*Math.random();egret.Tween.get(s[r]).to({x:o,y:a},200).call(function(){this[0]&&this[1].parent.removeChild(this[1])},[i,s[r]])}},e.prototype.cardEffect=function(){this._btn_switch.visible=!1,this.isCardEffectShow=!0,this.flyIntval=setInterval(this.playCardFly.bind(this),200)},e.prototype.playCardFly=function(){var t=this["grpCard_"+this.flyIndex0+"_"+this.flyIndex1];t.source="nn.card_100",t.x=713.5,t.y=300,t.anchorOffsetX=t.width/2,t.x+=t.width/2;var e=this.orginPlayerCardPos[this.flyIndex0][this.flyIndex1];this.playClickSound(TBNNUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},300),4==this.flyIndex1?this.flyIndex0==this.cardResult.pokes.length-2?(this.flyIndex0=0,this.flyIndex1=0,clearInterval(this.flyIntval),this.flyBankerIndex=0,this.flyIntval=setInterval(this.bankerCardFly.bind(this),200)):(this.flyIndex1=0,this.flyIndex0++):this.flyIndex1++},e.prototype.bankerCardFly=function(){if(5==this.flyBankerIndex)return this.flyBankerIndex=0,clearInterval(this.flyIntval),void(this.interval=setInterval(this.playerCardRotation.bind(this),800));var t=this["bankerCard_"+this.flyBankerIndex];t.x=713.5,t.y=300,t.source="nn.card_100",t.anchorOffsetX=t.width/2,t.x+=t.width/2,this.orginBankerCardPos;var e=this.orginBankerCardPos[this.flyBankerIndex];this.playClickSound(TBNNUtil.getInstance().getSoundEffect(6)),egret.Tween.get(t).to({x:e.x,y:e.y},400),this.flyBankerIndex++},e.prototype.playerCardRotation=function(){if(this.effectPlayerIndex==this.cardResult.pokes.length-1)return clearInterval(this.interval),this.effectPlayerIndex=0,void this.bankerCardRotation();this.playClickSound(TBNNUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes,e=this.effectPlayerIndex,i=0;5>i;i++){var n=this["grpCard_"+e+"_"+i];n.source="nn.card_100",egret.Tween.get(n).to({scaleX:0},300).call(function(){this[0].source="nn.card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[n,t[e+1].value[i]])}if(this["labCardType"+e].source=TBNNUtil.getInstance().getCardType(t[e+1].type),this.playClickSound(TBNNUtil.getInstance().getCardMusicType(t[e+1].type)),this["labCardType"+e].visible=!0,this["labCardType"+e].width=98,this["labCardType"+e].height=44,0!=t[e+1].type)for(var i=0;5>i;i++){var n=this["grpCard_"+e+"_"+i];3>i?egret.Tween.get(n).wait(700).to({x:n.x-10},100):egret.Tween.get(n).wait(700).to({x:n.x+10},100)}this.effectPlayerIndex++},e.prototype.bankerCardRotation=function(){this.playClickSound(TBNNUtil.getInstance().getSoundEffect(7));for(var t=this.cardResult.pokes[0],e=0;5>e;e++){var i=this["bankerCard_"+e];i.source="nn.card_100",egret.Tween.get(i).to({scaleX:0},300).call(function(){this[0].source="nn.card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[i,t.value[e]])}if(this.labCardTypeBanker.source=TBNNUtil.getInstance().getCardType(t.type),this.playClickSound(TBNNUtil.getInstance().getCardMusicType(t.type)),this.labCardTypeBanker.visible=!0,this.labCardTypeBanker.width=98,this.labCardTypeBanker.height=44,0!=t.type)for(var e=0;5>e;e++){var i=this["bankerCard_"+e];3>e?egret.Tween.get(i).wait(700).to({x:i.x-10},100):egret.Tween.get(i).wait(700).to({x:i.x+10},100)}this.interval=setInterval(this.blinkEffect.bind(this),500)},e.prototype.blinkEffect=function(){clearInterval(this.interval);for(var t=this.cardResult.result,e=0;4>e;e++)1==t[e];this.interval=setInterval(this.cardEffectEnd.bind(this),2e3)},e.prototype.cardEffectEnd=function(){clearInterval(this.interval);var t=this.cardResult,e=!1;1==t.result[0]&&1==t.result[1]&&1==t.result[2]&&1==t.result[3]&&(e=!0),0==t.result[0]&&0==t.result[1]&&0==t.result[2]&&0==t.result[3]&&(e=!0),this.cdTimer.start(),this.cdNum=5,this.playClickSound(QZNNUtil.getInstance().getSoundEffect(9));for(var i={x:0,y:0},n={x:0,y:0},s={x:0,y:0},r=0;r<this.cardResult.pokes.length;r++)if(1==this.cardResult.pokes[r].win){0==r||(i.x=this["grpHead"+r].x+21,i.y=this["grpHead"+r].y+110);break}for(var o=0;o<this.cardResult.pokes.length;o++)0==o?(s.x=n.x+42,s.y=n.y+2):(n.x=this["grpHead"+o].x+21,n.y=this["grpHead"+o].y+110,s.x=n.x+30,s.y=n.y+5),1==this.cardResult.pokes[o].win?(xlLib.TipsUtils.showTipsDownToUp("+"+this.cardResult.pokes[o].score,s.x,s.y,!1),this.updatePlayerGold(o,this.cardResult.pokes[o].score,!0)):(xlLib.TipsUtils.showTipsDownToUp("-"+this.cardResult.pokes[o].score,s.x,s.y,!1),this.updatePlayerGold(o,this.cardResult.pokes[o].score,!1)),0==this.cardResult.pokes[o].win&&EffectUtils.coinsFly(this,n.x,n.y,i.x,i.y)},e.prototype.updatePlayerGold=function(t,e,i){var n=UserInfo.getInstance().playes[t].goldcoins;1==i?n+=e:n-=e,UserInfo.getInstance().playes[t].goldcoins=n,0==t?this.labelGold0.text=n+"":this["grpHead"+t].setGold(n)},e.prototype.resetGame=function(){for(var t=0;5>t;t++){var e=this["bankerCard_"+t];e.source="",egret.Tween.removeTweens(e)}for(var i=0;i<this.cardResult.pokes.length-1;i++){this["labCardType"+i].visible=!1,this.labCardTypeBanker.visible=!1;for(var n=0;5>n;n++){var e=this["grpCard_"+i+"_"+n];e.source="",egret.Tween.removeTweens(e)}}this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this._btn_begin.visible=!0,this.isCanBets=!0,this.isBets=!1,this.resultCaijin=0,this.isCoinsReturn=!0,this.isCardEffectShow=!1},e.prototype.getHistoryCallback=function(t){for(var e=t.data,i=0;10>i;i++)if(i<e.length){this["grpHistroy"+i].visible=!0;for(var n=e[i],s=0;4>s;s++)this["grpHistroy"+s+"_"+i].source=1==n[s]?"nn.a8":"nn.a7"}else this["grpHistroy"+i].visible=!1},e.prototype.updateDataGold=function(){},e.prototype.playClickSound=function(t){xlLib.SoundMgr.instance.playSound(t+"_mp3")},e.prototype.Onquit=function(){if(UserInfo.getInstance().isGameStart)return void xlLib.TipsUtils.showFloatWordTips("游戏中！");var t={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token};xlLib.WebSocketMgr.getInstance().send(EventConst.niuniu_leave,t,function(t){xlLib.SceneMgr.instance.changeScene(Lobby)},this)},e.prototype.destroy=function(){EventUtil.removeEventListener(EventConst.players,this.addPlayers,this),EventUtil.removeEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.removeEventListener(EventConst.onGameStatusChange,this.GameStatus,this),null!=this.cdTimer&&this.cdTimer.removeEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e}(eui.Component);__reflect(TBNNView.prototype,"TBNNView");var AwardItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="AwardItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){},e.prototype.setData=function(t,e){1==e?this.setExchange(t):2==e?this.setSelfRecord(t):3==e&&this.setAllRecord(t)},e.prototype.setExchange=function(t){},e.prototype.setAllRecord=function(t){},e.prototype.setSelfRecord=function(t){},e.prototype.onTouchExchange=function(){},e.prototype.exchangeCB=function(t){200==t.code},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this)},e.prototype.setTouchEnabled=function(){},e}(eui.Component);__reflect(AwardItem.prototype,"AwardItem");var LotteryPanel=function(t){function e(){var e=t.call(this)||this;return e.isLottering=!1,e.rewardArr=[],e.curTimes=0,e.skinName="LotterySkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.deg=0,this.duration=0,this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this.current.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchLottery,this);var t=["1点券","1元红包","2点券","2元红包","3点券","3元红包","5点券","5元红包","10点券","10元红包","5百万金币","1千万金币"];this.getDialInfo(t)},e.prototype.getDialInfo=function(t){this.curTimes=100,this.labTipsNum.text="您当前剩余"+this.curTimes+"次抽奖机会！",this.rewardArr=t;for(var e=0;e<this.rewardArr.length;e++)this["label"+e].text=this.rewardArr[e]},e.prototype.onTouchCharge=function(){!this.isLottering},e.prototype.onTouchLottery=function(){this.isLottering||this.onPostComplete(6)},e.prototype.onPostComplete=function(t){var e=this;this.curTimes=this.curTimes-1,this.labTipsNum.text="您当前剩余"+this.curTimes+"次抽奖机会！",this.isLottering=!0;var i=t;return this.deg=360*Math.ceil(6*Math.random()+10)-30*(i-1),this.duration=this.calcDuration(this.deg),console.log("prize_id：",i,"转动角度：",this.deg,"转动时间：",this.duration),this.startTurn(function(){e.lotteryDone(e.rewardArr[i-1])})},e.prototype.calcDuration=function(t){return 2*t},e.prototype.lotteryDone=function(t){egret.Tween.removeAllTweens(),this.isLottering=!1,xlLib.TipsUtils.showFloatWordTips("恭喜您获得了 "+t)},e.prototype.startTurn=function(t){var e=this;this.lightAni(),this.current.touchEnabled=!1,egret.Tween.get(this.inCir).to({rotation:this.deg},this.duration,egret.Ease.cubicOut).call(function(){e.current.touchEnabled=!0,t()})},e.prototype.lightAni=function(){egret.Tween.get(this.warpCir,{loop:!0}).set({source:RES.getRes("lottery.wrapcircle_bg2")}).wait(300).set({source:RES.getRes("lottery.wrapcircle_bg")}).wait(300)},e.prototype.getGridID=function(t){for(var e=0,i=[],n=0;n<this.rewardArr.length;n++)this.rewardArr[n]==t&&i.push(n);return console.log("grid Arr : "+i),e=i[Math.floor(Math.random()*i.length)],console.log("grid id:  "+e),e},e.prototype.dispose=function(){this.isLottering||this.parent&&this.parent.removeChild(this)},e.prototype.setTouchEnabled=function(){},e.prototype.destroy=function(){this.isLottering||(this.parent&&this.parent.removeChild(this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this.current.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchLottery,this))},e}(eui.Component);__reflect(LotteryPanel.prototype,"LotteryPanel");var WelfareTypeItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="WelfareTypeItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){},e}(eui.ItemRenderer);__reflect(WelfareTypeItem.prototype,"WelfareTypeItem");var WelfareView=function(t){function e(){var e=t.call(this)||this;return e.skinName="WelfareViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this);var e=[{name:"精彩活动",down_url:"title_huodong_1_png",up_url:"title_huodong_0_png"},{name:"每日任务",down_url:"title_renwu_1_png",up_url:"title_renwu_0_png"},{name:"幸运轮盘",down_url:"title_zhuanpan_1_png",up_url:"title_zhuanpan_0_png"},{name:"每日签到",down_url:"title_qiandao_1_png",up_url:"title_qiandao_0_png"}];this._tabBar_meun.dataProvider=new eui.ArrayCollection(e),this._tabBar_meun.useVirtualLayout=!0,this._tabBar_meun.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.getTaskList()},e.prototype.getTaskList=function(){for(var t=["1","1","1","1","1","1","1"],e=0;e<t.length;e++){var i=new AwardItem;this._reward_area.addChild(i),i.x=5,i.y=125*e}},e.prototype.onBarItemTap=function(t){this._viewlist.selectedIndex=t.itemIndex},e.prototype.dispose=function(){xlLib.PopUpMgr.removePopUp(this,1)},e.prototype.destroy=function(){this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this._tabBar_meun.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this)},e}(eui.Component);__reflect(WelfareView.prototype,"WelfareView");var ZJHHead=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZJHHeadSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this);var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawCircle(46,46,46),e.graphics.endFill(),e.x=this.imghead.x+3,e.y=this.imghead.y+3,this.addChild(e),this.imghead.mask=e},e.prototype.setUserInfo=function(t,e,i){this.imghead.source=i,this.labelName.text=t,this.labelGold.text=e},e.prototype.destroy=function(){},e}(eui.Component);__reflect(ZJHHead.prototype,"ZJHHead");var ZJHroomView=function(t){function e(){var e=t.call(this)||this;return e.skinName="ZhajhroomViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this._coin_label.text=""+UserInfo.getInstance().goldcoins,this._btn_cjc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this)},e.prototype.onEnterGame=function(){if(this.gameIconData){var t=UserInfo.getInstance().getGameDataByindex(this.gameIconData.game),e=t.getTypeDataByindex(this.gameIconData.type),i=e.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),n={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:i.id};xlLib.WebSocketMgr.getInstance().send(EventConst.joinroom,n,function(t){xlLib.SceneMgr.instance.changeScene(ZJHScene),xlLib.TipsUtils.showFloatWordTips("加入房间成功！")},this)}},e.prototype.setGameIconData=function(t){this.gameIconData=t},e.prototype.dispose=function(){xlLib.PopUpMgr.removePopUp(this,1)},e.prototype.destroy=function(){this.gameIconData=null,this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this)},e}(eui.Component);__reflect(ZJHroomView.prototype,"ZJHroomView",["eui.UIComponent","egret.DisplayObject"]);var ZJHScene=function(t){function e(){var e=t.call(this)||this;return e.ZJHView=new ZJHView,e.uiLayer.addChild(e.ZJHView),e}return __extends(e,t),e.prototype.destroy=function(){this.ZJHView.destroy(),t.prototype.destroy.call(this)},e.prototype.resize=function(){this.ZJHView&&this.ZJHView.resize()},e}(xlLib.GameScene);__reflect(ZJHScene.prototype,"ZJHScene");var ZJHUtil=function(){function t(){if(t.instance)throw new Error("Instance is alreally exist")}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getBetNumber=function(t){switch(t){case 0:return Math.pow(10,4);case 1:return Math.pow(10,5);case 2:return 5*Math.pow(10,6);case 3:return Math.pow(10,7);case 4:return 1*Math.pow(10,8);case 5:return 5*Math.pow(10,8)}},t.prototype.getMsgSource=function(t){var e="";switch(t){case 2:e="d2";break;case 3:e="d3";break;case 4:e="d4";break;case 5:e="d5"}return e},t.prototype.getSoundEffect=function(t){switch(t){case 0:return"bgm";case 1:return"jh.jackpot";case 2:return"jh.start";case 3:return"jh.end";case 4:return"jh.ts";case 5:return"jh.tp";case 6:return"jh.dealCard";case 7:return"jh.openCard";case 8:return"jh.stake"}},t.prototype.getCoinsPos=function(){var t=new egret.Point;return t.x=700,t.y=300,t},t.prototype.getCardType=function(t){switch(t){case 1:return"豹子";case 2:return"同花顺";case 3:return"金花";case 4:return"顺子";case 5:return"对子";case 6:return"单张"}},t.prototype.getChipType=function(t){switch(t){case 1:return 2;case 2:return 3;case 3:return 4;case 4:return 5;case 5:return 6;case 6:return 7}},t.prototype.getplayerstatue=function(t){switch(t){case 1:return"豹子";case 2:return"同花顺";case 3:return"金花";case 4:return"顺子";case 5:return"对子";case 6:return"单张"}},t.prototype.coinsType=function(t,e){var i=[],n=0,s="";e=Math.round(e/1e4),e>0&&10>e?(n=e,s="b1a"):e>9&&100>e?(n=e/10,s="b2a"):e>99&&1e3>e?(n=e/100,s="b3a"):e>999&&1e4>e?(n=e/1e3,s="b4a"):e>9999&&1e5>e?(n=e/1e4,s="b5a"):(n=e/5e4,s="b6a");for(var r=0;r<Math.round(n);r++){var o=new eui.Image(s);o.x=t.x,o.y=t.y,i.push(o)}return i},t.prototype.coinPos=function(){var t=new egret.Point,e=Math.floor(4*Math.random());switch(e){case 0:t.x=-100,t.y=400;break;case 1:t.x=-100,t.y=800;break;case 2:t.x=650,t.y=400;break;case 3:t.x=650,t.y=800}return t},t.instance=null,t}();__reflect(ZJHUtil.prototype,"ZJHUtil");var ZJHView=function(t){function e(){var e=t.call(this)||this;return e.r=null,e.pailist=[],e.interval=-1,e.selfbetsNum={},e.betsPostion=-1,e.betsNum=0,e.cardResult=null,e.isChangeBanker=!1,e.changeBankerObj={},e.isCanBets=!0,e.poolBetArray={},e.limitGold=0,e.limitVip=0,e.curBankerRanking=-1,e.isApplyBanker=!1,e.lastGameBankerNum=0,e.isSysBanker=!1,e.orginBankerCardPos=[],e.orginPlayerCardPos=[],e.isBanker=!1,e.isBets=!1,e.maxUserData=null,e.banker_total_gold=0,e.isBoomBanker=!1,e.resultCaijin=0,e.totalCaijin=0,e.cdNum=10,e.coinsNumArr={},e.isCoinsReturn=!0,e.curRate=0,e.lastTouchBetTime=0,e.isCardEffectShow=!1,e.zhangIndex=4,e.flyIntval=0,e.flyIndex0=4,e.flyIndex1=0,e.skinName="ZJHViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.getOrginCardPos(),this.addEvent(),this.initData(),this.labelHead0.text=UserInfo.getInstance().username,this.labelGold0.text=""+UserInfo.getInstance().goldcoins},e.prototype.initData=function(){this.labBankerRank.text="",this.labBankerLastNum.text="",this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0},this.grpBankerList.visible=!1,this.grpCoins.touchEnabled=!1,this.grpTips.touchEnabled=!1,this.grpTips.touchChildren=!1,this.grpSecondPanel.visible=!1,this.btnUpBanker.visible=!0,this.btnDownBanker.visible=!1,this.grpTips.visible=!1,this.grpResult.visible=!1,this.imgBaoZhuang.visible=!1,this.grpCardType.touchChildren=!1,this.grpCardType.touchEnabled=!1,this.kanpaistatue=!1,this.grpCard.visible=!0,this._btn_prepare.visible=!0,this._btn_jiazhu.visible=!1,this._btn_kanpai.visible=!1,this._btn_qipai.visible=!1,this.grp_btncm.visible=!1,this._btn_continuegame.visible=!1},e.prototype.getOrginCardPos=function(){for(var t=0;5>t;t++){this["labCardType"+t].text="",this["labstatus"+t].text="";for(var e=[],i=0;3>i;i++){var n=this["grpCard"+t+"_"+i];n.source="",n.anchorOffsetX=n.width/2,n.x+=n.width/2;var s=new egret.Point;s.x=n.x+24,s.y=n.y,e[i]=s}this.orginPlayerCardPos[t]=e}for(var r=1;10>r;r++)this["grpHead"+r].setUserInfo("","","")},e.prototype.resize=function(){},e.prototype.OnClick=function(t){var e=this;if(t.target==this._btn_prepare){console.log("_btn_prepare");var i=UserInfo.getInstance().getGameDataByindex(Const.GAME_ZHAJINHUA),n=i.getTypeDataByindex(Const.TYPE_JINGDIANJINHUA),s=n.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),r={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:s.id};xlLib.WebSocketMgr.getInstance().send(EventConst.prepare,r,function(t){xlLib.TipsUtils.showFloatWordTips("开始准备"),console.log("开始准备"),e._btn_prepare.visible=!1},this)}else if(t.target==this._btn_kanpai){console.log("_btn_kanpai");var o=UserInfo.getInstance().getGameDataByindex(Const.GAME_ZHAJINHUA),a=o.getTypeDataByindex(Const.TYPE_JINGDIANJINHUA),s=a.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),r={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:s.id};xlLib.WebSocketMgr.getInstance().send(EventConst.seecard,r,function(t){xlLib.TipsUtils.showFloatWordTips("看牌"),console.log("看牌");var i={type:t.cardGenre,value:t.cardtype};e.onKanPaiClick(i),e._btn_kanpai.visible=!1,e.kanpaistatue=!0},this)}else if(t.target==this._btn_genzhu)this.sendamessage(EventConst.botpour,1),this.onGenZhuClick(),xlLib.TipsUtils.showFloatWordTips("跟注"),this._btn_genzhu.visible=!1;else if(t.target==this._btn_jiazhu)this.grp_btncm.visible=!0;else if(t.target==this._btn_jiacm_1)this.sendamessage(EventConst.botpour,2),this.onGenZhuClick(),xlLib.TipsUtils.showFloatWordTips("加注2金币"),this._btn_jiazhu.visible=!1,this.grp_btncm.visible=!1;else if(t.target==this._btn_jiacm_2)this.sendamessage(EventConst.botpour,3),this.onGenZhuClick(),xlLib.TipsUtils.showFloatWordTips("加注3金币"),this._btn_jiazhu.visible=!1,this.grp_btncm.visible=!1;else if(t.target==this._btn_jiacm_3)this.sendamessage(EventConst.botpour,4),this.onGenZhuClick(),xlLib.TipsUtils.showFloatWordTips("加注4金币"),this._btn_jiazhu.visible=!1,this.grp_btncm.visible=!1;else if(t.target==this._btn_jiacm_4)this.sendamessage(EventConst.botpour,5),this.onGenZhuClick(),xlLib.TipsUtils.showFloatWordTips("加注5金币"),this._btn_jiazhu.visible=!1,this.grp_btncm.visible=!1;else if(t.target==this._btn_jiacm_5)this.sendamessage(EventConst.botpour,6),this.onGenZhuClick(),xlLib.TipsUtils.showFloatWordTips("加注6金币"),this._btn_jiazhu.visible=!1,this.grp_btncm.visible=!1;else if(t.target==this._btn_jiacm_6)this.sendamessage(EventConst.botpour,7),this.onGenZhuClick(),xlLib.TipsUtils.showFloatWordTips("加注7金币"),this._btn_jiazhu.visible=!1,this.grp_btncm.visible=!1;else if(t.target==this._btn_gendaodi)xlLib.TipsUtils.showFloatWordTips("跟到底");else if(t.target==this._btn_quanxia)xlLib.TipsUtils.showFloatWordTips("全下");else if(t.target==this._btn_qipai)this.sendamessage2(EventConst.abandon),xlLib.TipsUtils.showFloatWordTips("弃牌");else if(t.target==this._btn_bipai){this._btn_qipai.visible=!1;var h=UserInfo.getInstance().getGameDataByindex(Const.GAME_ZHAJINHUA),l=h.getTypeDataByindex(Const.TYPE_JINGDIANJINHUA),s=l.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),r={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:s.id};xlLib.WebSocketMgr.getInstance().send(EventConst.compareCard,r,function(t){xlLib.TipsUtils.showFloatWordTips("比牌")},this)}else t.target==this._btn_continuegame&&(this.sendamessage(EventConst.joinroom,null),xlLib.SceneMgr.instance.changeScene(ZJHScene),xlLib.TipsUtils.showFloatWordTips("继续游戏"))},e.prototype.residueGolds=function(){},e.prototype.sendamessage=function(t,e){var i=UserInfo.getInstance().getGameDataByindex(Const.GAME_ZHAJINHUA),n=i.getTypeDataByindex(Const.TYPE_JINGDIANJINHUA),s=n.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),r={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:s.id,data:e};xlLib.WebSocketMgr.getInstance().send(t,r,function(t){},this)},e.prototype.sendamessage2=function(t){var e=this,i=UserInfo.getInstance().getGameDataByindex(Const.GAME_ZHAJINHUA),n=i.getTypeDataByindex(Const.TYPE_JINGDIANJINHUA),s=n.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),r={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:s.id};xlLib.WebSocketMgr.getInstance().send(t,r,function(t){for(var i={type:t.cardGenre,value:t.cardtype},n=0;3>n;n++){var s=i.value[n],r=e["grpCard0_"+n];r.source="",egret.Tween.get(r).to({scaleX:0},300).call(function(){this[0].source="card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[r,s]),xlLib.DisplayUtils.setComponentEnabled(r,!1)}},this),this._btn_kanpai.visible=!1},e.prototype.addEvent=function(){EventUtil.addEventListener(EventConst.players,this.addPlayers,this),EventUtil.addEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.addEventListener(EventConst.play,this.playpai,this),EventUtil.addEventListener(EventConst.gambleType,this.gametype,this),EventUtil.addEventListener(EventConst.otherSeecard,this.kanpai,this),EventUtil.addEventListener(EventConst.compareCard,this.Thancard,this),EventUtil.addEventListener(EventConst.pressure,this.ALLIN,this),EventUtil.addEventListener(EventConst.otherBotpour,this.otherplayerxiazhu,this),EventUtil.addEventListener(EventConst.botpour,this.xiazhu,this),EventUtil.addEventListener(EventConst.otherAbandon,this.otherdiscard,this),EventUtil.addEventListener(EventConst.abandon,this.discard,this),EventUtil.addEventListener(EventConst.settlement,this.settleaccount,this),EventUtil.addEventListener(EventConst.gameOver,this.gameover,this),EventUtil.addEventListener(EventConst.leave,this.leaveroom,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this._btn_prepare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_kanpai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiazhu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_5.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_6.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_gendaodi.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_quanxia.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_qipai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_bipai.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_continuegame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},e.prototype.startCountDown=function(t){this.time=t,null==this.timer&&(this.timer=new egret.Timer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.start())},e.prototype.timerFunc=function(t){this.time>=0&&this.time<=15?(this.time--,this.addtime=15-this.time,console.log("addtime",15-this.time)):this.clearTime()},e.prototype.clearTime=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer=null)},e.prototype.playpai=function(t){this.zhangIndex=UserInfo.getInstance().findSeatNumber(t.param.index),this.flyIndex0=UserInfo.getInstance().findSeatNumber(t.param.index),this.cardEffect(),this._btn_kanpai.touchEnabled=!0},e.prototype.kanpai=function(t){if("otherSeecard"==t.param.command&&UserInfo.getInstance().uid!=t.param.userId){var e=UserInfo.getInstance().findSeatNumber(t.param.index);this["labstatus"+e].text="已看牌"}},e.prototype.gametype=function(t){this.numtime=t.param.seconds,console.log(t),0==this.kanpaistatue&&this.startCountDown(this.numtime),this._btn_bipai.visible=!0;var e=t.param.limit.split(",");e.length>=1&&(console.log("可以加注*********************************"),this._btn_jiazhu.visible=!0)},e.prototype.xiazhu=function(t){"botpour"==t.param.command&&UserInfo.getInstance().uid==t.param.id&&(UserInfo.getInstance().goldcoins=t.param.golds,this.labelGold0.text=""+UserInfo.getInstance().goldcoins)},e.prototype.otherplayerxiazhu=function(t){"otherBotpour"==t.param.command&&UserInfo.getInstance().uid!=t.param.id&&(this.onPlayerGenZhu(t.param.index,1e4),"200"==t.param.code)},e.prototype.ALLIN=function(t){"pressure"==t.param.command&&UserInfo.getInstance().uid!=t.param.id},e.prototype.Thancard=function(t){"compareCard"==t.param.command&&UserInfo.getInstance().uid!=t.param.id?console.log("其他玩家比牌"):"compareCard"==t.param.command&&UserInfo.getInstance().uid==t.param.id&&(console.log("玩家自己和其他玩家比"),this._btn_bipai.visible=!0)},e.prototype.otherdiscard=function(t){if("otherAbandon"==t.param.command&&UserInfo.getInstance().uid!=t.param.userId){var e=UserInfo.getInstance().findSeatNumber(t.param.index);this["labCardType"+e].text="弃牌",this["labstatus"+e].text="";for(var i=[],n=0;3>n;n++){var s=this["grpCard"+e+"_"+n];s.source="card_100",s.anchorOffsetX=s.width/2,s.x+=s.width/2;var r=new egret.Point;r.x=s.x+24,r.y=s.y,i[n]=r,xlLib.DisplayUtils.setComponentEnabled(s,!1)}this.orginPlayerCardPos[e]=i}},e.prototype.discard=function(t){if("abandon"==t.param.command&&UserInfo.getInstance().uid==t.param.userId&&this.addtime>=this.numtime){console.log(this.addtime);for(var e={type:t.param.cardGenre,value:t.param.cardtype},i=0;3>i;i++){var n=e.value[i],s=this["grpCard0_"+i];
s.source="card_100",egret.Tween.get(s).to({scaleX:0},300).call(function(){this[0].source="card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[s,n]),xlLib.DisplayUtils.setComponentEnabled(s,!1)}xlLib.TipsUtils.showFloatWordTips("自动弃牌"),this._btn_kanpai.visible=!1}},e.prototype.settleaccount=function(t){console.log("结算"),this.grpResult.visible=!0},e.prototype.gameover=function(t){console.log(t),this._btn_continuegame.visible=!0},e.prototype.leaveroom=function(t){console.log(t)},e.prototype.playerJoinRoom=function(t){console.log(t._obj.player.id),console.log(UserInfo.getInstance().myPlayer.id),t._obj.player.id==UserInfo.getInstance().myPlayer.id||this["grpHead"+t._obj.player.index].setUserInfo(t._obj.player.username,t._obj.player.goldcoins,"F4_03_png")},e.prototype.addPlayers=function(t){var e=new egret.Shape;e.graphics.beginFill(16711680),e.graphics.drawCircle(62,62,62),e.graphics.endFill(),e.x=this.imghead0.x+6,e.y=this.imghead0.y+5,this.grpHead0.addChild(e),this.imghead0.mask=e,t._obj.player[0].id==UserInfo.getInstance().myPlayer.id&&(this.labelHead0.text=UserInfo.getInstance().myPlayer.username,this.labelGold0.text=UserInfo.getInstance().myPlayer.goldcoins+"",this.imghead0.source="F1_03_png");for(var i=1;5>i;i++)null!=t._obj.player[i]?this["grpHead"+i].setUserInfo(UserInfo.getInstance().playes[i].username,UserInfo.getInstance().playes[i].goldcoins,"F4_03_png"):this["grpHead"+i].setUserInfo("","","")},e.prototype.setTips=function(){this.labTips.text=""},e.prototype.setCountdown=function(){this.cdTimer=new egret.Timer(1e3),this.cdTimer.addEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e.prototype.clacTimer=function(){this.cdNum>0?this.cdNum--:(this.cdTimer.stop(),this.cdNum=0,this.resetGame(),this.cdNum=5,this.cardEffect()),this.cdNum<10?(this.labCountdown0.text="0",this.labCountdown1.text=this.cdNum+""):(this.labCountdown0.text=(this.cdNum+"").split("")[0],this.labCountdown1.text=(this.cdNum+"").split("")[1])},e.prototype.setGameResult=function(t){this.cardResult=t;t.pokes},e.prototype.onGenZhuClick=function(){var t=new egret.Point;t.x=268,t.y=792,this.showCoins(t,1e4)},e.prototype.onPlayerGenZhu=function(t,e){var i=new egret.Point;i.x=this["grpHead"+t].x+21,i.y=this["grpHead"+t].y+110,this.showCoins(i,e)},e.prototype.showGameTips=function(t){this.grpTipsInfo.source=ZJHUtil.getInstance().getMsgSource(t),this.grpTips.visible=!0,this.grpTipsbg.alpha=0,this.grpTipsInfo.x=640,this.playClickSound(ZJHUtil.getInstance().getSoundEffect(t)),egret.Tween.get(this.grpTipsbg).to({alpha:1},400).wait(400).call(function(){egret.Tween.get(this).to({alpha:0},400)},this.grpTipsbg),egret.Tween.get(this.grpTipsInfo).to({x:0},400).wait(400).call(function(){egret.Tween.get(this).to({x:-640},400)},this.grpTipsInfo)},e.prototype.showCoins=function(t,e){var i=!1;this.playClickSound(ZJHUtil.getInstance().getSoundEffect(8));for(var n=ZJHUtil.getInstance().getCoinsPos(),s=ZJHUtil.getInstance().coinsType(t,e),r=0;r<s.length;r++){var o=n.x+80*Math.random(),a=n.y+80*Math.random();this.grpCoins.addChild(s[r]),egret.Tween.get(s[r]).to({x:o,y:a},200).call(function(){this[0]&&this[1].parent.removeChild(this[1])},[i,s[r]])}},e.prototype.cardEffect=function(){this.isCardEffectShow=!0,this.flyIntval=setInterval(this.playCardFly.bind(this),200)},e.prototype.playCardFly=function(t){var e=this["grpCard"+this.flyIndex0+"_"+this.flyIndex1];e.source="card_100",e.x=713.5,e.y=300,e.anchorOffsetX=e.width/2,e.x+=e.width/2;var i=this.orginPlayerCardPos[this.flyIndex0][this.flyIndex1];if(this.playClickSound(ZJHUtil.getInstance().getSoundEffect(6)),egret.Tween.get(e).to({x:i.x,y:i.y},300),2==this.flyIndex1)if(4==this.flyIndex0){if(this.flyIndex0=0,this.flyIndex1=0,0==this.zhangIndex)return clearInterval(this.flyIntval),this._btn_kanpai.visible=!0,void(this._btn_qipai.visible=!0)}else{if(this.flyIndex0==this.zhangIndex-1)return this.flyIndex0=0,this.flyIndex1=0,clearInterval(this.flyIntval),this._btn_kanpai.visible=!0,void(this._btn_qipai.visible=!0);this.flyIndex1=0,this.flyIndex0++}else this.flyIndex1++},e.prototype.onKanPaiClick=function(t){this.playClickSound(ZJHUtil.getInstance().getSoundEffect(7));for(var e=0;3>e;e++){var i=this["grpCard0_"+e];i.source="card_100",egret.Tween.get(i).to({scaleX:0},300).call(function(){this[0].source="card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[i,t.value[e]])}this.labCardType0.text=ZJHUtil.getInstance().getCardType(t.type)},e.prototype.onPlayerKanPai=function(t,e){this.playClickSound(ZJHUtil.getInstance().getSoundEffect(7));for(var i=0;3>i;i++){var n=this["grpCard"+t+"_"+i];n.source="card_100",egret.Tween.get(n).to({scaleX:0},300).call(function(){this[0].source="card_"+this[1],egret.Tween.get(this[0]).to({scaleX:1},300)},[n,e.value[i]])}this["labCardType"+t].text=ZJHUtil.getInstance().getCardType(e.type)},e.prototype.setStartBet=function(){this.resetGame(),this.grpResult.visible=!1,clearInterval(this.interval),this.showGameTips(2),this.grpCountdown.visible=!0,this.isSysBanker||this.isChangeBanker||(this.lastGameBankerNum--,this.labBankerLastNum.text="剩余"+this.lastGameBankerNum+"次"),this.isChangeBanker&&(this.isChangeBanker=!1,this.grpBankerList.visible=!1)},e.prototype.resetGame=function(){for(var t=0;9>t;t++){this["labCardType"+t].text="";for(var e=0;3>e;e++){var i=this["grpCard"+t+"_"+e];i.source="",egret.Tween.removeTweens(i)}}for(this.selfbetsNum={1:0,2:0,3:0,4:0},this.poolBetArray={1:0,2:0,3:0,4:0},this.coinsNumArr={1:0,2:0,3:0,4:0};this.grpCoins.numChildren>0;)this.grpCoins.removeChildAt(0);this.isCanBets=!0,this.isBets=!1,this.imgBaoZhuang.visible=!1,this.resultCaijin=0,this.isCoinsReturn=!0,this.isCardEffectShow=!1,this.labCountdown0.text="0",this.labCountdown1.text="0"},e.prototype.onTouchCardType=function(){this.grpSecondPanel.visible=!0,this.grpCardType.visible=!0,this.grpHistory.visible=!1},e.prototype.onTouchCardHistory=function(){},e.prototype.getHistoryCallback=function(t){for(var e=t.data,i=0;10>i;i++)if(i<e.length){this["grpHistroy"+i].visible=!0;for(var n=e[i],s=0;4>s;s++)this["grpHistroy"+s+"_"+i].source=1==n[s]?"a8":"a7"}else this["grpHistroy"+i].visible=!1;this.grpSecondPanel.visible=!0,this.grpCardType.visible=!1,this.grpHistory.visible=!0},e.prototype.onTouchCloseSecondPanel=function(){this.grpSecondPanel.visible=!1},e.prototype.updateDataGold=function(){},e.prototype.playClickSound=function(t){xlLib.SoundMgr.instance.playSound(t+"_mp3")},e.prototype.dispose=function(){xlLib.SceneMgr.instance.changeScene(Lobby)},e.prototype.destroy=function(){this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),EventUtil.removeEventListener(EventConst.players,this.addPlayers,this),EventUtil.removeEventListener(EventConst.onNewUserEnterGame,this.playerJoinRoom,this),EventUtil.removeEventListener(EventConst.play,this.playpai,this),EventUtil.removeEventListener(EventConst.gambleType,this.gametype,this),EventUtil.removeEventListener(EventConst.otherSeecard,this.kanpai,this),EventUtil.removeEventListener(EventConst.compareCard,this.Thancard,this),EventUtil.removeEventListener(EventConst.pressure,this.ALLIN,this),EventUtil.removeEventListener(EventConst.otherBotpour,this.otherplayerxiazhu,this),EventUtil.removeEventListener(EventConst.botpour,this.xiazhu,this),EventUtil.removeEventListener(EventConst.otherAbandon,this.otherdiscard,this),EventUtil.removeEventListener(EventConst.abandon,this.discard,this),EventUtil.removeEventListener(EventConst.settlement,this.settleaccount,this),EventUtil.removeEventListener(EventConst.gameOver,this.gameover,this),EventUtil.removeEventListener(EventConst.leave,this.leaveroom,this),this._btn_prepare.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_kanpai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiazhu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_4.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_5.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_jiacm_6.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_gendaodi.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_quanxia.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_qipai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this._btn_bipai.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),null!=this.cdTimer&&this.cdTimer.removeEventListener(egret.TimerEvent.TIMER,this.clacTimer,this)},e}(eui.Component);__reflect(ZJHView.prototype,"ZJHView");var GameIconItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="GameIconItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this)},e.prototype.partRemoved=function(e,i){this.effecthot&&this.effecthot.stop(),this.effectIcon&&this.effectIcon.stop(),t.prototype.partRemoved.call(this,e,i)},e.prototype.onEnterGame=function(t){var e=this;EffectUtils.playButtonEffect(this,function(){e.clickCallback()}),xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.clickCallback=function(){if(!this.icondata.isOpen)return void xlLib.TipsUtils.showFloatWordTips("该功能暂时开放！");switch(this.icondata.type){case Const.TYPE_QRNIUNIU:var t=xlLib.PopUpMgr.addPopUp(BRNNroomView,null,!0,!0,null,1);t.setGameIconData(this.icondata);break;case Const.TYPE_TBNN:var e=xlLib.PopUpMgr.addPopUp(TBNNroomView,null,!0,!0,null,1);e.setGameIconData(this.icondata);break;case Const.TYPE_JINGDIANBAIJIALE:var i=xlLib.PopUpMgr.addPopUp(BJLroomView,null,!0,!0,null,1);i.setGameIconData(this.icondata);break;case Const.TYPE_JINGDIANJINHUA:var n=xlLib.PopUpMgr.addPopUp(ZJHroomView,null,!0,!0,null,1);n.setGameIconData(this.icondata);break;case Const.TYPE_ERBAGANGJINDIAN:var s=xlLib.PopUpMgr.addPopUp(ErBaGangroomView,null,!0,!0,null,1);s.setGameIconData(this.icondata)}},e.prototype.setGameIconData=function(t){this.icondata=t,this.bg_img.source=t.url,t.ishot&&(this.effecthot=xlLib.DisplayUtils.createAsyncMovieClicp("effcet_hot","effcet_hot"),this.effecthot.x=25,this.effecthot.y=0,this.effecthot.play(-1),this.addChild(this.effecthot)),t.game==Const.GAME_ERBAGANG?(this.effectIcon=xlLib.DisplayUtils.createAsyncMovieClicp("game_720_effect_logo","game_720_effect_logo"),this.effectIcon.x=130,this.effectIcon.play(-1),this.addChild(this.effectIcon),this.effectmask=xlLib.DisplayUtils.createAsyncMovieClicp("game_720_effect","game_720_effect")):t.game==Const.GAME_ZHAJINHUA?this.effectmask=xlLib.DisplayUtils.createAsyncMovieClicp("game_610_effect","game_610_effect"):this.effectmask=xlLib.DisplayUtils.createAsyncMovieClicp("game_230_effect","game_230_effect"),this.effectmask.play(-1),this.effectmask.touchEnabled=!1,this.effectmask.x=-12,this.effectmask.y=-11,this.addChild(this.effectmask)},e}(eui.Component);__reflect(GameIconItem.prototype,"GameIconItem");var GameIconListView=function(t){function e(){var e=t.call(this)||this;return e.skinName="GameIconListViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.setData=function(t){this.gamelist_grp.removeChildren();for(var e,i=8,n=0;n<t.length;n++){e=new GameIconItem,e.setGameIconData(t[n]),this.gamelist_grp.addChild(e);var s=n%4;e.x=10+245*s,0==s&&0!=n&&(i=285),e.y=i}},e}(eui.Component);__reflect(GameIconListView.prototype,"GameIconListView");var Lobby=function(t){function e(){var e=t.call(this)||this;return e.lobbyView=new LobbyView,e.uiLayer.addChild(e.lobbyView),e}return __extends(e,t),e.prototype.destroy=function(){this.lobbyView.destroy(),t.prototype.destroy.call(this)},e.prototype.resize=function(){this.lobbyView&&this.lobbyView.resize()},e}(xlLib.LobbyScene);__reflect(Lobby.prototype,"Lobby");var LobbyView=function(t){function e(){var e=t.call(this)||this;return e.skinName="LobbyViewSkin",e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTouchHandler,e),EventUtil.addEventListener(EventConst.ON_SOCKET_CLOSE,e.onSocketClose,e),e._set.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick2,e),e._service.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick2,e),e._information.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick2,e),e._playerinfo.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick2,e),e._generalize.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick2,e),e._safebox.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick2,e),e._welfare.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick2,e),e._shoppingmall.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick2,e),e._topup.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick2,e),e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this._head_label.text=UserInfo.getInstance().username,this._coin_label.text=GlobalFunction.Formatconversion(UserInfo.getInstance().goldcoins),this.initGameIconList()},e.prototype.initGameIconList=function(){var t=[(new GameIconData).initData({name:"通比牛牛",url:"tbnn_game_870_bg",ishot:!0,isOpen:!0,game:Const.GAME_NIUNIU,type:Const.TYPE_TBNN}),(new GameIconData).initData({name:"炸金花",url:"zjh_game_230_bg",ishot:!0,isOpen:!1,game:Const.GAME_ZHAJINHUA,type:Const.TYPE_JINGDIANJINHUA}),(new GameIconData).initData({name:"百家乐",url:"bjl_game_18_bg",ishot:!0,isOpen:!1,game:Const.GAME_BAIJIALE,type:Const.TYPE_JINGDIANBAIJIALE}),(new GameIconData).initData({name:"二八杠",url:"ebg_game_720_bg",ishot:!0,isOpen:!1,game:Const.GAME_ERBAGANG,type:Const.TYPE_ERBAGANGJINDIAN}),(new GameIconData).initData({name:"百人牛牛",url:"brnn_game_930_bg",ishot:!0,isOpen:!1,game:Const.GAME_NIUNIU,type:Const.TYPE_QRNIUNIU})];this.gameIconDataList=t,this.gamelistView=new GameIconListView,this.gamelistView.x=322,this.gamelistView.y=153,this.gamelistView.setData(this.gameIconDataList),this.addChild(this.gamelistView),this.qznnGameIconData=(new GameIconData).initData({name:"抢庄牛牛",url:"qznn_game_830_bg",ishot:!0,isOpen:!0,game:Const.GAME_NIUNIU,type:Const.TYPE_QZNN}),this.qznnGameIcon=new QznnIconItem,this.qznnGameIcon.x=42,this.qznnGameIcon.y=158,this.qznnGameIcon.setGameIconData(this.qznnGameIconData),this.addChild(this.qznnGameIcon)},e.prototype.onClick2=function(t){this.playClickSound(),t.target==this._set?(console.log("_set"),xlLib.PopUpMgr.addPopUp(SetView,null,!0,!0,null,1)):t.target==this._playerinfo?(console.log("_playerinfo"),xlLib.PopUpMgr.addPopUp(PlayerInfoView,null,!0,!0,null,1)):t.target==this._service?(console.log("_service"),xlLib.TipsUtils.showFloatWordTips("敬请期待！")):t.target==this._information?(console.log("_information"),xlLib.PopUpMgr.addPopUp(SystemMsgView,null,!0,!0,null,1)):t.target==this._generalize?console.log("_generalize"):t.target==this._safebox?(console.log("_safebox"),xlLib.PopUpMgr.addPopUp(SafeBoxView,null,!0,!0,null,1)):t.target==this._welfare?(console.log("_welfare"),xlLib.PopUpMgr.addPopUp(WelfareView,null,!0,!0,null,1)):t.target==this._shoppingmall?console.log("_shoppingmall"):t.target==this._topup&&(console.log("_topup"),xlLib.PopUpMgr.addPopUp(RechargeView,null,!0,!0,null,1))},e.prototype.onTouchHandler=function(t){},e.prototype.resize=function(){this.bgImg&&(this.bgImg.width=xlLib.Global.screenWidth,this.bgImg.height=xlLib.Global.screenHeight)},e.prototype.onSocketClose=function(t){},e.prototype.onNotify=function(t){},e.prototype.destroy=function(){EventUtil.removeEventListener(EventConst.ON_SOCKET_CLOSE,this.onSocketClose,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),egret.Tween.removeTweens(this)},e.prototype.playClickSound=function(){xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e}(eui.Component);__reflect(LobbyView.prototype,"LobbyView");var QznnIconItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="QznnIconItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this)},e.prototype.partRemoved=function(e,i){this.effecthot&&this.effecthot.stop(),this.effectIcon&&this.effectIcon.stop(),t.prototype.partRemoved.call(this,e,i)},e.prototype.onEnterGame=function(t){var e=this;EffectUtils.playButtonEffect(this,function(){e.clickCallback()}),xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.clickCallback=function(){if(!this.icondata.isOpen)return void xlLib.TipsUtils.showFloatWordTips("该功能暂时开放！");var t=xlLib.PopUpMgr.addPopUp(QZNNroomView,null,!0,!0,null,1);t.setGameIconData(this.icondata)},e.prototype.setGameIconData=function(t){this.icondata=t,this.bg_img.source=t.url,t.ishot&&(this.effecthot=xlLib.DisplayUtils.createAsyncMovieClicp("effcet_hot","effcet_hot"),this.effecthot.x=25,this.effecthot.y=0,this.addChild(this.effecthot)),this.effecthot.play(-1),t.game==Const.GAME_NIUNIU&&(this.effectIcon=xlLib.DisplayUtils.createAsyncMovieClicp("game_830_effect_logo","game_830_effect_logo"),this.effectIcon.x=130,this.addChild(this.effectIcon)),this.effectIcon.play(-1),this.effectmask=xlLib.DisplayUtils.createAsyncMovieClicp("game_830_effect","game_830_effect"),this.effectmask.touchEnabled=!1,this.effectmask.x=20,this.effectmask.y=-9,this.addChild(this.effectmask)},e}(eui.Component);__reflect(QznnIconItem.prototype,"QznnIconItem");var RoomTypeItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="RoomTypeItemSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.dataChanged=function(){},e}(eui.ItemRenderer);__reflect(RoomTypeItem.prototype,"RoomTypeItem");var RoomView=function(t){function e(){var e=t.call(this)||this;return e.skinName="RoomViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this._btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this),this.resize(),this.scroller.visible=!1,this.createRoomBtn(),this._coin_label.text=""+UserInfo.getInstance().goldcoins},e.prototype.setGameIconData=function(t){switch(this.gameIconData=t,this.gameIconData.type){case Const.TYPE_QZNN:this._title_icon.source="title_qzniuniu_png";break;case Const.TYPE_TBNN:this._title_icon.source="title_tongbiniuniu_png";break;case Const.TYPE_JINGDIANBAIJIALE:this._title_icon.source="title_baijiale_png";break;case Const.TYPE_JINGDIANJINHUA:this._title_icon.source="title_zhajinhua_png";break;case Const.TYPE_ERBAGANGJINDIAN:this._title_icon.source="title_erbagang_png"}},e.prototype.createRoomBtn=function(){for(var t=["room_ty_png","room_xs_png","room_cj_png","room_zj_png","room_gj_png","room_fh_png"],e=["room_ty_png","room_xs_png","room_cj_png","room_zj_png","room_gj_png"],i=["room_ty_png","room_xs_png","room_cj_png"],n=["room_ty_png","room_xs_png"],s=0,r=0;r<t.length;r++){var o=new eui.Image(t[r]);this._room_area_1.addChild(o);var a=r%3;o.x=70+450*a,0==a&&0!=r&&(s=315),o.y=s,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}s=0;for(var r=0;r<e.length;r++){var o=new eui.Image(e[r]);this._room_area_2.addChild(o);var a=r%3;o.x=70+450*a,0==a&&0!=r&&(s=315),o.y=s,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}s=0;for(var r=0;r<i.length;r++){var o=new eui.Image(i[r]);this._room_area_3.addChild(o);var a=r%3;o.x=70+450*a,0==a&&0!=r&&(s=315),o.y=s,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}s=0;for(var r=0;r<n.length;r++){var o=new eui.Image(n[r]);this._room_area_4.addChild(o);var a=r%3;o.x=70+450*a,0==a&&0!=r&&(s=315),o.y=s,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}},e.prototype.onClick=function(t){var e=this;EffectUtils.playButtonEffect(t.target,function(){e.clickCallback()}),this.playClickSound()},e.prototype.clickCallback=function(){var t=UserInfo.getInstance().getGameDataByindex(this.gameIconData.game),e=t.getTypeDataByindex(this.gameIconData.type),i=e.getPlayWayByindex(Const.PLAYWAY_CHUJICHANG),n={userid:UserInfo.getInstance().uid,token:UserInfo.getInstance().token,playway:i.id};switch(this.gameIconData.type){case Const.TYPE_QZNN:xlLib.WebSocketMgr.getInstance().send(EventConst.joinroom,n,function(t){xlLib.SceneMgr.instance.changeScene(QZNNScene),xlLib.TipsUtils.showFloatWordTips("加入房间成功！")},this);break;case Const.TYPE_TBNN:xlLib.WebSocketMgr.getInstance().send(EventConst.joinroom,n,function(t){xlLib.SceneMgr.instance.changeScene(TBNNScene),xlLib.TipsUtils.showFloatWordTips("加入房间成功！")},this);break;case Const.TYPE_JINGDIANBAIJIALE:xlLib.WebSocketMgr.getInstance().send(EventConst.joinroom,n,function(t){xlLib.SceneMgr.instance.changeScene(BJLScene),xlLib.TipsUtils.showFloatWordTips("加入房间成功！")},this);break;case Const.TYPE_JINGDIANJINHUA:xlLib.WebSocketMgr.getInstance().send(EventConst.joinroom,n,function(t){xlLib.SceneMgr.instance.changeScene(ZJHScene),xlLib.TipsUtils.showFloatWordTips("加入房间成功！")},this);break;case Const.TYPE_ERBAGANGJINDIAN:xlLib.SceneMgr.instance.changeScene(RBGScene)}},e.prototype.playClickSound=function(){xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.resize=function(){this._bg_img&&(this._bg_img.width=xlLib.Global.screenWidth,this._bg_img.height=xlLib.Global.screenHeight)},e.prototype.dispose=function(){xlLib.PopUpMgr.removePopUp(this,1)},e.prototype.destroy=function(){this.gameIconData=null,this._btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.dispose,this)},e}(eui.Component);__reflect(RoomView.prototype,"RoomView");var LoginView=function(t){function e(){var e=t.call(this)||this;return e.bjlSubscription=!1,e.lfSubscription=!1,e.xjSubscription=!1,e.nnSubscription=!0,e.skinName="LoginViewSkin",e.once(egret.Event.REMOVED_FROM_STAGE,e.destroy,e),e.resize(),e}return __extends(e,t),e.prototype.resize=function(){this.bgImg&&(this.bgImg.width=xlLib.Global.screenWidth,this.bgImg.height=xlLib.Global.screenHeight)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.bjlSubscription=!1,this.lfSubscription=!1,this._btn_visitor.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onVisitorLogin,this),this._btn_account.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onAccountLogin,this),this._btn_continue.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onContinueLogin,this),this._btn_register.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onRegister,this),this._btn_login.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onLogin,this),this._btn_verify.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetCode,this),this._btn_black.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBlack,this),EventUtil.addEventListener(EventConst.ON_SOCKET_SUC,this.onSocketSuc,this),EventUtil.addEventListener(EventConst.ON_SOCKET_FAIL,this.onSocketFail,this)},e.prototype.onBlack=function(t){this._group_btn_0.visible=!0,this._group_btn_2.visible=!1},e.prototype._onVisitorLogin=function(t){xlLib.UIMgr.instance.showLoading(TipsLoading),xlLib.HttpManager.getInstance().send(HttpAddress.guestUrl,null,null,this.onLoginSucess,this.onLoginFail)},e.prototype._onAccountLogin=function(t){this._group_btn_0.visible=!1,this._group_btn_2.visible=!0},e.prototype._onContinueLogin=function(t){xlLib.UIMgr.instance.showLoading(TipsLoading),xlLib.HttpManager.getInstance().send(HttpAddress.guestUrl,null,null,this.onLoginSucess,this.onLoginFail)},e.prototype._onRegister=function(t){},e.prototype.onGetCode=function(t){xlLib.HttpManager.getInstance().send(HttpAddress.sendmsgUrl,{mobile:this._phone_txt.text},null,function(t){xlLib.TipsUtils.showFloatWordTips("发送验证码成功！")},function(t){xlLib.TipsUtils.showFloatWordTips("发送验证码失败！")})},e.prototype._onLogin=function(t){return""==this._phone_txt.text||""==this._verify_code_txt.text?void xlLib.TipsUtils.showFloatWordTips("手机号或验证码不能为空！"):GlobalData.hasNetwork?(xlLib.UIMgr.instance.showLoading(TipsLoading),void xlLib.HttpManager.getInstance().send(HttpAddress.login,{mobile:this._phone_txt.text,verifyCode:this._verify_code_txt.text},null,this.onLoginSucess,this.onLoginFail)):void xlLib.TipsUtils.showFloatWordTips("连接失败 请检查网络环境！")},e.prototype.onLoginFail=function(t){xlLib.UIMgr.instance.hideLoading(TipsLoading),xlLib.TipsUtils.showFloatWordTips("登录失败 请检查网络环境！")},e.prototype.onLoginSucess=function(t){var e=t.data;UserInfo.getInstance().initUserInfo(t),xlLib.WebSocketMgr.getInstance().connect(Const.GAME_HOST,Const.GAME_PORT,e.id)},e.prototype.onSocketFail=function(t){xlLib.UIMgr.instance.hideLoading(TipsLoading),xlLib.TipsUtils.showFloatWordTips("登录失败 请检查网络环境！")},e.prototype.onSocketSuc=function(t){var e=["hall_bg_mp3"];xlLib.SoundMgr.instance.playBgMusic(e),xlLib.UIMgr.instance.hideLoading(TipsLoading),xlLib.SceneMgr.instance.changeScene(Lobby),xlLib.TipsUtils.showFloatWordTips("登录成功！")},e.prototype.destroy=function(){this._btn_visitor.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onVisitorLogin,this),this._btn_account.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onAccountLogin,this),this._btn_continue.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onContinueLogin,this),this._btn_register.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onRegister,this),this._btn_login.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onLogin,this),this._btn_verify.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetCode,this),EventUtil.removeEventListener(EventConst.ON_SOCKET_SUC,this.onSocketSuc,this),EventUtil.removeEventListener(EventConst.ON_SOCKET_FAIL,this.onSocketFail,this)},e}(eui.Component);__reflect(LoginView.prototype,"LoginView");var AnimationUtils;!function(t){function e(){var t=new uiCore.Animation;return this.gameStartAnimator=t,t.animationSource="bar_effect_start_{0}_png",t.autoPlay=!1,t.frameNum=17,t.frameRate=70,t.horizontalCenter=0,t.loop=!1,t.source="bar_effect_start_4_png",t.stopAndVisible=!0,t.verticalCenter=-20,t.visible=!1,t}function i(){var t=new uiCore.Animation;return this.cardBox=t,t.animationSource="0waikuang_{0}_png",t.autoPlay=!1,t.frameNum=17,t.frameRate=58,t.height=290,t.loop=!1,t.scaleX=1,t.scaleY=1,t.source="0waikuang_16_png",t.visible=!1,t.width=590,t.x=11,t.y=32.5,t}function n(){var t=new uiCore.Animation;return this.bankerAnimation=t,t.animationSource="bar_effect_banker_{0}_png",t.autoPlay=!1,t.frameNum=11,t.frameRate=120,t.loop=!1,t.source="bar_effect_banker_10_png",t.stopAndVisible=!1,t.visible=!1,t.x=124,t.y=-52,t}function s(){var t=new uiCore.Animation;return this.cardAnimation=t,t.animationSource="bar_effect_30_{0}_png",t.autoPlay=!1,t.frameNum=17,t.frameRate=60,t.loop=!1,t.source="bar_effect_30_13_png",t.stopAndVisible=!0,t.visible=!1,t.x=-49,t.y=-162,t}function r(){var t=new uiCore.Animation;return this.allKillAnimator=t,t.animationSource="bar_effect_kill_{0}_png",t.autoPlay=!1,t.frameNum=14,t.frameRate=80,t.horizontalCenter=.5,t.loop=!1,t.source="bar_effect_kill_13_png",t.stopAndVisible=!1,t.verticalCenter=0,t.visible=!1,t}function o(){var t=new eui.Image;return this.diceTop=t,t.height=278,t.horizontalCenter=0,t.source="bar_sicbo_top_png",t.verticalCenter=-64,t.visible=!1,t.width=210,t}function a(){var t=new eui.Image;return this.diceBg=t,t.height=309,t.horizontalCenter=.5,t.source="bar_sicbo_all_png",t.verticalCenter=-49.5,t.visible=!1,t.width=231,t}function h(){var t=new eui.Image;return this.diceBottom=t,t.height=197,t.horizontalCenter=.5,t.source="bar_sicbo_bottom_png",t.verticalCenter=7.5,t.visible=!1,t.width=231,t}function l(){var t=new eui.Image;return this.dice1=t,t.height=72,t.horizontalCenter=-39.5,t.source="bar_sicbo_1_png",t.verticalCenter=-4,t.visible=!1,t.width=61,t}function c(){var t=new eui.Image;return this.dice0=t,t.height=72,t.horizontalCenter=41.5,t.source="bar_sicbo_2_png",t.verticalCenter=8,t.visible=!1,t.width=61,t}function u(){var t=new eui.Group;return this.diceGroup=t,t.bottom=-3,t.left=0,t.right=0,t.top=3,t.touchThrough=!0,t.elementsContent=[this.diceBottom_i(),this.dice1_i(),this.dice0_i(),this.diceTop_i(),this.diceBg_i()],t}function d(){var t=new eui.Image;return this.goldFly0=t,t.horizontalCenter=-450,t.scaleX=1,t.scaleY=1,t.source="nn_cion_png",t.verticalCenter=270,t.visible=!1,t}function p(){var t=new eui.Image;return this.goldFly1=t,t.horizontalCenter=-547,t.scaleX=1,t.scaleY=1,t.source="nn_cion_png",t.verticalCenter=20,t.visible=!1,t}function g(){var t=new eui.Image;return this.goldFly2=t,t.horizontalCenter=-75,t.scaleX=1,t.scaleY=1,t.source="nn_cion_png",t.verticalCenter=-227,t.visible=!1,t}function _(){var t=new eui.Image;return this.goldFly3=t,t.horizontalCenter=547,t.scaleX=1,t.scaleY=1,t.source="nn_cion_png",t.verticalCenter=20,t.visible=!1,t}function f(){var t=new eui.Group;return this.players=t,t.percentHeight=100,t.touchThrough=!0,t.percentWidth=100,t.x=0,t.y=0,t.elementsContent=[this.player1_i(),this.player2_i(),this.player3_i(),this.player4_i(),this.goldFly0_i(),this.goldFly1_i(),this.goldFly2_i(),this.goldFly3_i(),this.qzNumSetGroup_i()],t}function v(){var t=new uiCore.Animator;return this.ItemAnimator=t,t.defentAnimationName="05RSYD",t.horizontalCenter=0,t.source="gamehall_gameItem",t.verticalCenter=0,t}function m(t,e){var i=new uiCore.Animation;return this.gameStartAnimator=i,i.animationSource=e,i.autoPlay=!1,i.frameNum=20,i.frameRate=70,i.horizontalCenter=0,i.loop=!1,i.source=t,i.stopAndVisible=!0,i.verticalCenter=-20,i.visible=!1,i}function y(){var t=new uiCore.Animation;return this.gameStartAnimator=t,t.animationSource="qznn_showScore0-1_tex_{0}_png",t.autoPlay=!1,t.frameNum=20,t.frameRate=70,t.horizontalCenter=0,t.loop=!1,t.source="qznn_showScore0-1_tex_0_png",t.stopAndVisible=!0,t.verticalCenter=-20,t.visible=!1,t}function b(){var t=new uiCore.Animation;return this.gameStartAnimator=t,t.animationSource="qznn_showScore0-2_tex_{0}_png",t.autoPlay=!1,t.frameNum=20,t.frameRate=70,t.horizontalCenter=0,t.loop=!1,t.source="qznn_showScore0-2_tex_0_png",t.stopAndVisible=!0,t.verticalCenter=-20,t.visible=!1,t}function E(){var t=new uiCore.Animation;return this.gameStartAnimator=t,t.animationSource="qznn_showScore0-3_tex_{0}_png",t.autoPlay=!1,t.frameNum=20,t.frameRate=70,t.horizontalCenter=0,t.loop=!1,t.source="qznn_showScore0-3_tex_0_png",t.stopAndVisible=!0,t.verticalCenter=-20,t.visible=!1,t}t.gameStartAnimator=e,t.cardBox_i=i,t.bankerAnimation_i=n,t.cardAnimation_i=s,t.allKillAnimator_i=r,t.diceTop_i=o,t.diceBg_i=a,t.diceBottom_i=h,t.dice1_i=l,t.dice0_i=c,t.diceGroup_i=u,t.goldFly0_i=d,t.goldFly1_i=p,t.goldFly2_i=g,t.goldFly3_i=_,t.players_i=f,t.ItemAnimator_i=v,t.goldFlyAnimation=m,t.gameStartAnimator_1=y,t.gameStartAnimator_2=b,t.gameStartAnimator_3=E}(AnimationUtils||(AnimationUtils={}));var EventUtil=function(){function t(){}return t.Event=function(t,e,i,n){return void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1),new xlLib.ZqEvent(t,e)},t.dispatchEvent=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1);var s=new xlLib.ZqEvent(t,e,i,n);xlLib.ZqListener.getInstance().dispatchEvent(s)},t.hasEventListener=function(t){return xlLib.ZqListener.getInstance().hasEventListener(t)},t.addEventListener=function(t,e,i,n,s){void 0===n&&(n=!1),void 0===s&&(s=0),xlLib.ZqListener.getInstance().addEventListener(t,e,i,n,s)},t.removeEventListener=function(t,e,i,n){void 0===n&&(n=!1),xlLib.ZqListener.getInstance().removeEventListener(t,e,i,n)},t}();__reflect(EventUtil.prototype,"EventUtil");var GlobalFunction=function(){function t(){}return t.tweenHideView=function(t,e,i,n,s,r){void 0===e&&(e=0),void 0===i&&(i=1e3),t.visible=!0,t.alpha=1,egret.Tween.get(t).wait(e).to({alpha:0},i,egret.Ease.circOut).call(function(){t.visible=!1,t.alpha=1,n&&n.call(s,r)})},t.tweenShowView=function(t,e,i,n,s,r){void 0===e&&(e=0),void 0===i&&(i=1e3),t.visible=!1,t.alpha=0,egret.Tween.get(t).wait(e).to({alpha:1},i,egret.Ease.circOut).call(function(){t.visible=!0,t.alpha=1,n&&n.call(s,r)
})},t.getDateString=function(t){var e=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();return e},t.Formatconversion=function(t){var e=[],i="",n="",s=t/100+"";return t%100==0?s.length/3>0&&s.length/3<1||(s.length/3>1&&s.length/3<2?s=s.slice(0,s.length-3)+","+s.slice(s.length-3):s.length/3>2&&s.length/3<3&&(s=s.slice(0,s.length-6)+","+s.slice(s.length-6,s.length-3)+","+s.slice(s.length-3))):(e=s.split("."),i=e[0],n=e[1],i.length/3>0&&i.length/3<1?s=i+"."+n:i.length/3>1&&i.length/3<2?s=i.slice(0,i.length-3)+","+i.slice(i.length-3)+"."+n:i.length/3>2&&i.length/3<3&&(s=i.slice(0,i.length-6)+","+i.slice(i.length-6,i.length-3)+","+i.slice(i.length-3)+"."+n)),s},t}();__reflect(GlobalFunction.prototype,"GlobalFunction");var uiCore;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.animationSource="demo{0}_png",t.autoPlay=!0,t.loop=!0,t.loopTime=0,t.frameRate=24,t.frameNum=0,t.stopIndex=0,t.stopAndVisible=!1,t.loopID=-1,t.frames=new Array,t._currentFrame=-1,t._isPlaying=!1,t.timerID=0,t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoved,t),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAdded,t),t}return __extends(i,e),Object.defineProperty(i.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),i.prototype.onRemoved=function(t){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this.stop()},i.prototype.onAdded=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.refresh()},i.prototype.childrenCreated=function(){this.getResources()},i.prototype.getResources=function(){if(this.frames=[],0==this.frameNum)for(var e=0;RES.getRes(t.StringUtils.format(this.animationSource,e));)this.frames.push(t.StringUtils.format(this.animationSource,e)),e++;else for(var e=0;e<this.frameNum;e++)this.frames.push(t.StringUtils.format(this.animationSource,e))},i.prototype.play=function(){this.visible=!0,this.timerID=setInterval(this.onInterval.bind(this),this.frameRate),this._isPlaying=!0},i.prototype.playToIndex=function(t){this.visible=!0,this._isPlaying&&this.stop(),t>this.frameNum-1&&(t=this.frameNum-1),this.stopIndex=t,this.timerID=setInterval(this.onIntervalControlByIndex.bind(this),this.frameRate),this._isPlaying=!0},i.prototype.stop=function(){this.currentFrame=0,clearInterval(this.timerID),this._isPlaying=!1,-1!=this.loopID&&clearTimeout(this.loopID)},i.prototype.stopToIndex=function(t){this.setFrame(t),this.currentFrame=t},Object.defineProperty(i.prototype,"currentFrame",{set:function(t){this._currentFrame=t},enumerable:!0,configurable:!0}),i.prototype.setFrame=function(t){this.stop(),t>this.frameNum-1&&(t=this.frameNum-1),this.source=this.frames[t],this.visible=!0},i.prototype.getCurrentFrame=function(){return this._currentFrame},i.prototype.refresh=function(){this.stop(),this.autoPlay?(this.onInterval(),this.play()):this.source=this.frames[this._currentFrame]},i.prototype.onInterval=function(){this.checkRealVisible(this)&&(this.source=this.frames[this._currentFrame],this.currentFrame=this._currentFrame+1,this._currentFrame==this.frames.length&&(this.loop?(this.currentFrame=0,this.loopTime>0&&(this.stop(),this.loopID=setTimeout(this.play.bind(this),this.loopTime))):(this.stop(),this.visible=!this.stopAndVisible),this.completeEvent||(this.completeEvent=new egret.Event(egret.Event.ENDED)),this.dispatchEvent(this.completeEvent)))},i.prototype.onIntervalControlByIndex=function(){this.checkRealVisible(this)&&(this.source=this.frames[this._currentFrame],this.currentFrame=this._currentFrame+1,this._currentFrame==this.frames.length&&(this.currentFrame=0,this.play()),this._currentFrame==this.stopIndex&&(this.stopToIndex(this.stopIndex),this.completeEvent||(this.completeEvent=new egret.Event(egret.Event.ENDED)),this.dispatchEvent(this.completeEvent)))},i.prototype.checkRealVisible=function(t){for(var e=t;e&&!egret.is(e,"egret.Stage");){if(!e.visible)return!1;e=e.parent}return!0},i}(eui.Image);t.Animation=e,__reflect(e.prototype,"uiCore.Animation");var i=function(){function t(){}return t.format=function(t,e){return t.replace("{0}",""+e)},t.isEmpty=function(t){return null==t||void 0==t||0==t.length},t.trim=function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},t.textToRichText=function(t){return null!=t?(new egret.HtmlTextParser).parser(t):void 0},t}();t.StringUtils=i,__reflect(i.prototype,"uiCore.StringUtils");var n=function(){function t(){this.effectList=[],this._musicVolume=1,this._effectVolume=1,this.music=null}return t.playEffect=function(t){},t}();t.SoundManager=n,__reflect(n.prototype,"uiCore.SoundManager");var s=function(t){function e(){var e=t.call(this)||this;return e.source="",e.sourceGroup="",e.speed=1,e.autoPlay=!0,e.playOnce=!1,e.defentAnimationName="",e.stopAndVisible=!1,e._isLoaded=!1,e.isAdvanceTime=!1,e.EVENT_LOADCOMPLETE="loadComplete",e.onResourceLoadComplete=function(t){t.groupName==this.sourceGroup&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),this.init())},e}return __extends(e,t),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.armature?this.armature.animation.isPlaying:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0}),e.prototype.getResource=function(){""!=this.source&&(""!=this.sourceGroup?RES.isGroupLoaded(this.sourceGroup)?this.armature&&this.contains(this.armature)?(this.armature.removeEventListener(dragonBones.EventObject.COMPLETE,this.onAnimationComplete,this),this.removeChild(this.armature)):this.init():(RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.loadGroup(this.sourceGroup)):this.loadRESComplete()&&(RES.getResAsync(this.source+"_ske_json",this.loadRESComplete,this),RES.getResAsync(this.source+"_tex_json",this.loadRESComplete,this),RES.getResAsync(this.source+"_tex_png",this.loadRESComplete,this)))},e.prototype.loadRESComplete=function(){return RES.getRes(this.source+"_ske_json")&&RES.getRes(this.source+"_tex_json")&&RES.getRes(this.source+"_tex_png")?(this.init(),!1):!0},e.prototype.childrenCreated=function(){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this),this.getResource()},e.prototype.warn=function(t){console.log(t)},e.prototype.init=function(){this._isLoaded=!0;var t=RES.getRes(this.source+"_ske_json"),e=RES.getRes(this.source+"_tex_json"),i=RES.getRes(this.source+"_tex_png");if(!t||!e||!i)return void this.warn("资源"+this.source+"不存在");this.armature&&this.removeChild(this.armature);var n=dragonBones.EgretFactory.factory;n.getDragonBonesData(this.source)||(n.parseDragonBonesData(t),n.parseTextureAtlasData(e,i)),this.armature=n.buildArmatureDisplay(this.source,this.source);var s=n.getAllDragonBonesData(),r=s[this.source],o=r.armatureNames[0];if(this.armature=n.buildArmatureDisplay(o,this.source),this.addChild(this.armature),this.armature.addEventListener(dragonBones.EventObject.COMPLETE,this.onAnimationComplete,this),this.visible=!this.stopAndVisible,this.autoPlay){var a=-1==this.armature.animation.animationList.indexOf(this.defentAnimationName)?this.armature.animation.animationList[0]:this.defentAnimationName;this.playOnce?this.play(a,1).timeScale=this.speed:this.play(a,1).timeScale=this.speed}this.isAdvanceTime||(egret.Ticker.getInstance().register(this.onTicker,this),this.isAdvanceTime=!0),this.dispatchEventWith(this.EVENT_LOADCOMPLETE)},e.prototype.onTicker=function(t){dragonBones.WorldClock.clock.advanceTime(t/1e3)},e.prototype.onRemovedFromStage=function(t){this.stop(),this.isAdvanceTime||egret.Ticker.getInstance().unregister(this.onTicker,this),this.armature&&(this.armature.removeEventListener(dragonBones.EventObject.COMPLETE,this.onAnimationComplete,this),this.armature.dispose(!0),this.armature&&this.armature.parent&&this.armature.parent.removeChild(this.armature)),dragonBones.EgretFactory.factory.getDragonBonesData(this.source)&&dragonBones.EgretFactory.factory.removeDragonBonesData(this.source,!1),this.armature=null,this.okHander=null,this.thisObject=null,this.params=null},e.prototype.onAnimationComplete=function(t){this.visible=!this.stopAndVisible,this.dispatchEvent(t),this.okHander&&this.okHander.apply(this.thisObject,this.params)},e.prototype.play=function(t,e){return this.armature?(this.armature.animation.stop(),this.visible=!0,this.armature.animation.play(t,e)):void 0},e.prototype.stop=function(){this.armature&&this.armature.animation&&(this.armature.animation.stop(),this.visible=!this.stopAndVisible)},e.prototype.getAnimDuration=function(){return 1e3*this.armature.animation.getState(this.armature.animation.animationList[0]).totalTime},e.prototype.addHander=function(t,e,i){this.okHander=t,this.thisObject=e,this.params=i},e.prototype.replaceSlot=function(t,e){var i=this.armature.armature.getSlot(t);i.displayController="none",i.displayIndex=e},e}(eui.Group);t.Animator=s,__reflect(s.prototype,"uiCore.Animator");var r=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.playEffect=function(t,e,i){if(e=e||{},e.initNum!=e.num)var n=e.time,s=e.num,r=e.regulator||100,o=(s-e.initNum)/(n/r),a=e.initNum,h=e.initNum,l=setInterval(function(){a+=o,a>=s&&e.initNum<s&&(clearInterval(l),a=s),s>=a&&e.initNum>s&&(clearInterval(l),a=s);var n=Math.floor(a);n!=h&&(h=n,t.text=i+h+"")},30)},t}();t.LabelEffect=r,__reflect(r.prototype,"uiCore.LabelEffect")}(uiCore||(uiCore={}));var CommonConsts=function(){function t(){}return t.LOBBY_LASTGAME="lobby_lastGame",t}();__reflect(CommonConsts.prototype,"CommonConsts");var xlLib;!function(t){var e=function(){function t(){this._funcMap={}}return t.prototype.dispatch=function(t,e){void 0===e&&(e=null);var i=this._funcMap[t],n=0;if(null!=i){for(;n<i.length;)i[n]&&i[n][0].call(i[n][1],e),n++;return!0}},t.prototype.addListener=function(t,e,i){if(this._funcMap[t]){var n=this.getNoticeIndex(t,e,i);-1==n&&this._funcMap[t].push([e,i])}else this._funcMap[t]=[],this._funcMap[t].push([e,i])},t.prototype.hasListener=function(t){return this._funcMap[t]&&this._funcMap[t].length>0?!0:!1},t.prototype.removeListener=function(t,e,i){if(this._funcMap[t]){var n=this.getNoticeIndex(t,e,i);-1!=n&&this._funcMap[t].splice(n,1)}},t.prototype.getNoticeIndex=function(t,e,i){var n=-1;for(var s in this._funcMap[t])if(this._funcMap[t][s][0]==e&&this._funcMap[t][s][1]==i){n=parseInt(s);break}return n},t}();t.Dispatcher=e,__reflect(e.prototype,"xlLib.Dispatcher")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.CLASS_NAME="ZqEvent",this.type=t,this._obj=e}return e.prototype.clone=function(t){return new e(this.type,t?t:this._obj)},e.prototype.toString=function(){t.Console.log(this.CLASS_NAME,"type","bubbles","cancelable")},Object.defineProperty(e.prototype,"param",{get:function(){return this._obj},enumerable:!0,configurable:!0}),e.CHAT_ROOM="chat_room",e.CHAT_PRIVATE="chat_private",e.CHAT_SYSTEM="chat_system",e.CHAT_IMPORTANT="chat_important",e.EVENT_L2G_NOTICE="event_l2g_notice",e.CHAT_GM="chat_gm",e.GM_BEFORE="gm_before",e.GM_END="gm_end",e.CHAT_HORN="chat_horn",e.USER_INFO="user_info",e.UPDATE_USER_INFO="update_user_info",e.CHECK_VERSION_UPDATE="check_version_update",e.COMMON_MODEL="common_model",e.EVENT_L2G="event_l2g",e.EVENT_G2L="event_g2l",e.EVENT_ACTIVE_SOCKET_CACHE_OK="on_active_socket_cache_ok",e.EVENT_SERVER_SHUTDOWN="on_server_shutdown",e.EVENT_SERVER_DEBUG_LEVEL="on_server_debug_level",e.GM_INFO="gm_info",e.KICK_OUT="kick_out",e.ON_RECONNEC="on_reconnect",e.ON_SERVER_SHUTDOWN="on_server_shutdown",e.ON_GETZONEINFO="on_get_zoneinfo",e.ON_RESTART="on_restart",e.RECONNECT_FAIL="reconnect_fail",e.NET_ERRER="net_error",e.SHARE="share",e.TASK_EVENT="task_event",e.ONLINE_NUM="online_num",e.HIDE_SLIP_GAME_GUIDE="hide_slip_game_guide",e.NATIVE_TO_EGERET="native_to_egret",e}();t.ZqEvent=e,__reflect(e.prototype,"xlLib.ZqEvent")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){this.CLASS_NAME="ZqListener",this.isInit=!1,this.isInit,null==this._dispatcher&&(this._dispatcher=new t.Dispatcher,this.isInit=!0)}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.addEventListener=function(t,e,i,n,s){void 0===n&&(n=!1),void 0===s&&(s=0),this._dispatcher.addListener(t,e,i)},e.prototype.hasEventListener=function(t){return this._dispatcher.hasListener(t)},e.prototype.removeEventListener=function(t,e,i,n){void 0===n&&(n=!1),this._dispatcher.removeListener(t,e,i)},e.prototype.dispatchEvent=function(t){return this._dispatcher.dispatch(t.type,t)},e.prototype.toString=function(){return this._dispatcher.toString()},e}();t.ZqListener=e,__reflect(e.prototype,"xlLib.ZqListener")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function t(){this.showBack=!0,this.defaultOrientation="auto",this.hasTestChips=!1}return t}();t.IGameConfig=e,__reflect(e.prototype,"xlLib.IGameConfig")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function t(){}return t}();t.IUserInfo=e,__reflect(e.prototype,"xlLib.IUserInfo")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){this._models={}}return Object.defineProperty(e,"Instance",{get:function(){return null==this._self&&(this._self=new e),this._self},enumerable:!0,configurable:!0}),e.prototype.addEvents=function(){},e.prototype.registerCommonModel=function(e,i,n){null==this._models[e]?(this._models[e]=i,this._models["loadName_"+e]=n):t.Console.warn("registerCommonModel:公用模块只能注册一次")},e.prototype.openCommonModel=function(e,i,n,s,r){function o(){s?(a=new h._models[e](n),s.call(r,a)):0==i?(a=new h._models[e](n),t.PopUpMgr.addPopUp(a,null,!0,!0)):t.UIMgr.instance.showUI(h._models[e],n)}void 0===i&&(i=0);var a;if(this._models[e]){var h=this;return this._models["loadName_"+e]?t.ResLoadMgr.instance.load(this._models["loadName_"+e],o,function(){t.Console.error("加载资源组失败:loadName_"+e)},null,t.UIMgr.instance.tipsLoadUI,!0,!0):o(),a}},e.prototype.showCommonUI=function(e,i){return this._models[e]?t.UIMgr.instance.showUI(this._models[e],i):void 0},e.prototype.getCommonUI=function(t,e){if(this._models[t]){var i=new this._models[t](e);return i}},e._self=null,e}();t.CommonModelMgr=e,__reflect(e.prototype,"xlLib.CommonModelMgr")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){this.loadList={}}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.send=function(e,i,n,s,r,o,a){void 0===a&&(a=!0),i=i||{},n=n||egret.URLRequestMethod.GET;var h=this.dataToString(i),l=e+"?"+this.dataToString(i);if(!this.loadList[l]){var c=new egret.URLLoader;c.dataFormat=egret.URLLoaderDataFormat.TEXT;var u=new egret.URLRequest(e);u.method=n;var d=new egret.URLVariables(h);d.variables=i,u.data=d,c.addEventListener(egret.Event.COMPLETE,this.onComplete,this),c.addEventListener(egret.HTTPStatusEvent.HTTP_STATUS,this.onHTTPStatus,this),c.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this);var p={urlLoader:c,sucessFunc:s,errorFunc:r,thisObject:o,isJson:!0,showError:a};this.loadList[l]=p,c.load(u),t.Console.log("发送http请求："+l)}},e.prototype.cancel=function(t,e){e=e||{};var i=t+this.dataToString(e);if(this.loadList[i]){this.loadList[i].urlLoader;delete this.loadList[i]}},e.prototype.getKeyByCallBack=function(t){for(var e in this.loadList){var i=this.loadList[e];if(i.sucessFunc==t||i.errorFunc==t)return e}return null},e.prototype.cancelAll=function(){this.loadList={}},e.prototype.onComplete=function(e){var i=e.currentTarget;for(var n in this.loadList)if(this.loadList[n].urlLoader==i){var s=this.loadList[n].sucessFunc,r=this.loadList[n].showError,o=JSON.parse(i.data);t.Console.log("收到http数据："+i.data),r?200==parseInt(o.code)?s.call(this.loadList[n].thisObject,this.loadList[n].isJson?o:i.data):t.TipsUtils.showFloatWordTips(o.message):s.call(this.loadList[n].thisObject,this.loadList[n].isJson?o:i.data),delete this.loadList[n]}},e.prototype.onIOError=function(t){this.loadError(t.currentTarget,t)},e.prototype.onHTTPStatus=function(t){200!=t.status&&this.loadError(t.currentTarget,t.status)},e.prototype.loadError=function(t,e){for(var i in this.loadList)if(this.loadList[i].urlLoader==t){var n=this.loadList[i].errorFunc;n&&n.call(this.loadList[i].thisObject,e),delete this.loadList[i]}},e.prototype.dataToString=function(t){var e="";for(var i in t)e+=encodeURI(i)+"="+encodeURI(t[i])+"&";return e=e.slice(0,e.length-1)},e}();t.HttpManager=e,__reflect(e.prototype,"xlLib.HttpManager")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){}return e.init=function(e){e?this._container=e:t.SceneMgr.instance.currentScene.topLayer?this._container=t.SceneMgr.instance.currentScene.topLayer:this._container=t.SceneMgr.instance.currentScene},e.addPopUp=function(e,n,s,r,o,a,h,l,c){void 0===n&&(n=null),void 0===s&&(s=!1),void 0===r&&(r=!1),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=0);var u=t.Global.screenWidth,d=t.Global.screenHeight;e.prototype&&(e=new e(c));var p=egret.getQualifiedClassName(e);null==this.popupDic[p]&&(this.popupDic[p]=[]),this.popupDic[p].push(e),(null==this._container||null==this._container.parent)&&t.SceneMgr.instance.currentScene&&(t.SceneMgr.instance.currentScene.topLayer?this._container=t.SceneMgr.instance.currentScene.topLayer:this._container=t.SceneMgr.instance.currentScene),1!=t.SceneMgr.instance.currentScene.scaleX&&(u=t.Global.designHeight/t.SceneMgr.instance.currentScene.scaleX,d=t.Global.designWidth/t.SceneMgr.instance.currentScene.scaleY);var g=null==n?this._container:n;if(!g.contains(e)){if(r){var _=egret.getQualifiedClassName(e)+e.hashCode;this.darkSpriteDic[_]=t.DisplayUtils.createMask(.7,u,d),g.contains(this.darkSpriteDic[_])||g.addChild(this.darkSpriteDic[_]),this.darkSpriteDic[_].touchEnabled=!0,egret.Tween.get(this.darkSpriteDic[_]).to({alpha:1},150),this.darkSpriteDic[_].visible=!0}if(g&&g.stage){o?g.addChildAt(e,o):g.addChild(e),this.curPanel=e,0!=h&&g?(e.x=u/2-h/2,e.y=d/2-l/2):0==e.anchorOffsetX&&(h=e.width,l=e.height);var f=u/2-h/2,v=d/2-l/2;switch(a){case i.NOMAL:s&&(e.x=f,e.y=v);break;case i.CENTER:s&&(e.x=f,e.y=v),e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+h/4,e.y=e.y+l/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-h/4,y:e.y-l/4},600,egret.Ease.backOut);break;case i.CENTER_S:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+h/4,e.y=e.y+l/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-h/4,y:e.y-l/4},600,egret.Ease.elasticOut);break;case i.LEFT:s?(e.x=-h,egret.Tween.get(e).to({x:f},500,egret.Ease.cubicOut)):(e.x=-h,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case i.RIGHT:s?(e.x=h,egret.Tween.get(e).to({x:f},500,egret.Ease.cubicOut)):(e.x=h,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case i.TOP:s?(e.y=-l,egret.Tween.get(e).to({y:v},500,egret.Ease.cubicOut)):(e.y=-l,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut));break;case i.BOTTOM:s?(e.y=g.stage.stageHeight,egret.Tween.get(e).to({y:v},500,egret.Ease.cubicOut)):(e.y=l,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut))}return e}}},e.removePopUp=function(t,e){void 0===e&&(e=0);var i=!0;i=t.prototype?!1:!0;var n=egret.getQualifiedClassName(t);if(this.popupDic[n])if(i)for(var s=0;s<this.popupDic[n].length;s++)this.popupDic[n][s]==t&&(this.removePanel(this.popupDic[n][s],e),this.popupDic[n].splice(s,1));else for(var s=0;s<this.popupDic[n].length;s++)this.removePanel(this.popupDic[n][s],e),this.popupDic[n].shift()},e.clearPopus=function(){if(this.popupDic)for(var t in this.popupDic)for(var e=0;e<this.popupDic[t].length;e++)this.removePanel(this.popupDic[t][e]),this.popupDic[t].shift()},e.removePanel=function(e,n){void 0===n&&(n=0);var s=egret.getQualifiedClassName(e)+e.hashCode,r=function(){this.darkSpriteDic[s]&&this.darkSpriteDic[s].parent&&this.darkSpriteDic[s].parent.removeChild(this.darkSpriteDic[s]),this.darkSpriteDic[s]=null,delete this.darkSpriteDic[s]};this.darkSpriteDic[s]&&egret.Tween.get(this.darkSpriteDic[s]).to({alpha:0},100).call(r,this);var o=600;switch(n){case i.NOMAL:o=0;break;case i.CENTER:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300);break;case i.CENTER_S:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},600,egret.Ease.elasticOut);break;case i.LEFT:egret.Tween.get(e).to({x:-e.width},600,egret.Ease.cubicOut);break;case i.RIGHT:egret.Tween.get(e).to({x:e.width},600,egret.Ease.cubicOut);break;case i.TOP:egret.Tween.get(e).to({y:-e.height},600,egret.Ease.cubicOut);break;case i.BOTTOM:egret.Tween.get(e).to({y:e.height},600,egret.Ease.cubicOut)}egret.setTimeout(function(){t.DisplayUtils.removeFromParent(e)},this,o)},e.hasPopup=function(e){var i=!0,n=egret.getQualifiedClassName(e);if(i="object"==typeof e&&e.prototype?!0:!1){if(!e.stage)return!1;for(var s=0;s<this.popupDic[n].length;s++)if(this.popupDic[n][s]==e)return!0}else if(this.popupDic[n]&&this.popupDic[n].length>0)for(var s=0;s<this.popupDic[n].length;s++){if(this.popupDic[n][s].stage)return!0;t.DisplayUtils.removeFromParent(this.popupDic[n][s])}return!1},e.resize=function(){if(this.popupDic)for(var t in this.popupDic){var e=this.popupDic[t];e&&e.parent&&e.resize&&e.resize()}},e.darkSpriteDic={},e.popupDic=new Object,e}();t.PopUpMgr=e,__reflect(e.prototype,"xlLib.PopUpMgr");var i;!function(t){t[t.NOMAL=0]="NOMAL",t[t.CENTER=1]="CENTER",t[t.CENTER_S=2]="CENTER_S",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT",t[t.TOP=5]="TOP",t[t.BOTTOM=6]="BOTTOM"}(i=t.PopUpEffect||(t.PopUpEffect={}))}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._autoHide=!0,t._curLoadingId=0,t._currentLoadIndex=0,t}return __extends(i,e),Object.defineProperty(i,"instance",{get:function(){return null==this._self&&(this._self=new i,this._self.initLoadingUI()),this._self},enumerable:!0,configurable:!0}),i.prototype.initLoadingUI=function(){this._loadingMap={},this._thisObj={},this._loadSucc={},this._loadError={}},i.prototype.load=function(e,i,n,s,r,o,a,h){void 0===o&&(o=!0),void 0===a&&(a=!0),a&&null!=a||(a=!0),r?(this._loadingClass=r,a?t.UIMgr.instance.showProcessBar(r):t.UIMgr.instance.showLoadingTimeout(r)):this._loadingClass=t.UIMgr.instance.commonLoadUI,h&&t.ResUtils.setMustRes(h),i&&(this._loadSucc[e]=i),n&&(this._loadError[e]=n),s&&(this._thisObj[e]=s),this._autoHide=o,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onxlLibResLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onxlLibResLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onxlLibResProgress,this),RES.loadGroup(e)},i.prototype.loadArr=function(t,e,i,n,s){this._currentLoadArr&&this._currentLoadArr.length>0?this._currentLoadArr.concat(t):(this._currentLoadArr=t,this._currentLoadIndex=0)},i.prototype.onxlLibResLoadComplete=function(e){var i=e.groupName;e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onxlLibResLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onxlLibResLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onxlLibResProgress,this)),this._loadingClass&&1==this._autoHide&&t.UIMgr.instance.hideLoading(this._loadingClass),this._loadingClass&&(this._loadingClass=null),this._loadSucc[i]&&this._loadSucc[i].call(this._thisObj[i],e),this.removeLoadDic(i)},i.prototype.onxlLibResLoadError=function(e){var i=e.groupName;t.Console.warn("Group:"+e.groupName+" has failed to load"),e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onxlLibResLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onxlLibResLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onxlLibResProgress,this),this._loadError[i]&&this._loadError[i].call(this._thisObj[i],e),this.removeLoadDic(i))},i.prototype.removeLoadDic=function(t){this._loadError[t]=null,delete this._loadError[t],this._thisObj[t]=null,delete this._thisObj[t],this._loadSucc[t]=null,delete this._loadSucc[t]},i.prototype.onxlLibResProgress=function(e){this._loadingClass&&t.UIMgr.instance.showProcessBar(this._loadingClass,e.itemsLoaded,e.itemsTotal,"",e.groupName)},i.prototype.removeRefrence=function(){this._loadSucc&&(this._loadSucc=null),this._loadingClass&&(this._loadingClass=null),this._loadError&&(this._loadSucc=null),this._thisObj&&(this._thisObj=null)},i._self=null,i}(egret.EventDispatcher);t.ResLoadMgr=e,__reflect(e.prototype,"xlLib.ResLoadMgr")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){this._currentScene=null,this._lastScene=null}return Object.defineProperty(e,"instance",{get:function(){return null==this._self&&(this._self=new e),this._self},enumerable:!0,configurable:!0}),e.prototype.init=function(t){null==this._currentScene&&(this._currentScene=t)},e.prototype.changeScene=function(e,i,n){var s=this,r=function(t){t.currentTarget.removeEventListener(egret.Event.ADDED_TO_STAGE,r,this),s._lastScene&&(s._lastScene.destroy(),s._lastScene=null)};if(n&&t.Global.isInGame){var o=this._currentScene.currentGame;return null!=o&&(o.parent&&o.parent.removeChild(o),o.destroy()),o=new e(i),(o.width>t.Global.designWidth||o.height>t.Global.designHeight)&&(o.scaleX=t.Global.designWidth/o.width,o.scaleY=t.Global.designHeight/o.height),this._currentScene.currentGame=o,this._currentScene.gameLayer.addChild(o),t.PopUpMgr.init(),o}var a=new e(i);return a.width>a.height?a.width>t.Global.designHeight&&a.height>t.Global.designWidth&&(a.scaleX=.8875,a.scaleY=640/720):a.width>t.Global.designWidth&&a.height>t.Global.designHeight&&(a.scaleX=640/720,a.scaleY=.8875),null!=this._currentScene&&(this._lastScene=this._currentScene,t.DisplayUtils.removeFromParent(this._lastScene)),this._currentScene=a,this._currentScene.addEventListener(egret.Event.ADDED_TO_STAGE,r,this),egret.MainContext.instance.stage.addChild(this._currentScene),t.PopUpMgr.init(),this._currentScene},Object.defineProperty(e.prototype,"currentScene",{get:function(){return this._currentScene},enumerable:!0,configurable:!0}),e.prototype.lastSceneLeave=function(){null!=this._lastScene&&(this._lastScene.parent&&this._lastScene.parent.removeChild(this._lastScene),this._lastScene.destroy(),this._lastScene=null)},e._self=null,e}();t.SceneMgr=e,__reflect(e.prototype,"xlLib.SceneMgr")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function t(){this.isStopped=!1,this.isMusic=!1,this.name="",this.position=0,this.egret_channel=null}return t.prototype.stop=function(){this.egret_channel&&(this.position=this.egret_channel.position,this.egret_channel.stop(),this.isStopped=!0,this.egret_channel=null)},t}();__reflect(e.prototype,"MySoundChannel");var i=function(){function i(){this._soundRes={},this._musicVolume=.8,this._soundVolume=1,this._musicOpen=!0,this._soundOpen=!0,this._activeSound={},this._activeSoundLoop={},this.loadTimeDic={},this._currentMusicIndex=0,this._currentMusicChanel=null}return Object.defineProperty(i,"instance",{get:function(){var e=this;return null==this._instance&&(this._instance=new i,t.Utils.getLocalStorage(i.SOUND_TOGGLE,function(t){null!=t&&(e._instance.soundOpen=Boolean(Number(t)))}),t.Utils.getLocalStorage(i.MUSIC_TOGGLE,function(t){null!=t&&(e._instance.musicOpen=Boolean(Number(t)))}),egret.Capabilities.engineVersion<"3.2.6"&&setTimeout(function(){},1e4)),this._instance},enumerable:!0,configurable:!0}),i.prototype.onActive=function(t){this._musicOpen&&egret.Capabilities.engineVersion<"3.2.6"&&setTimeout(function(){i.instance.resumeBgMusic()},2e3)},i.prototype.onDeActive=function(t){egret.Capabilities.engineVersion<"3.2.6"&&i.instance.pauseBgMusic()},i.prototype.playSound=function(t,e,i,n,s){if(void 0===e&&(e=1),this._soundOpen){var r,o=this;if(!this._activeSound[t]||0!=this._activeSound[t].$loops){if(n){var a=function(t,e){e.stop(),o.stopSound(t),n&&n.call(s)};r=this.play(t,e,i,[a],!1)}else r=this.play(t,e,i,[],!1);return null!=r&&(this._activeSound[t]=r),r}}},i.prototype.stopSounds=function(){for(var e in this._activeSound)null!=this._activeSound[e]&&void 0!=this._activeSound[e]&&(this._activeSound[e].stop(),this._activeSound[e]=null,delete this._activeSound[e]);for(var e in this._soundRes)this._soundRes[e]=null,delete this._soundRes[e];t.ResUtils.resetSoundLoadTimes()},i.prototype.stopSound=function(t){null!=this._activeSound[t]&&void 0!=this._activeSound[t]&&(this._activeSound[t].stop(),this._activeSound[t].dispatchEventWith(egret.Event.SOUND_COMPLETE),this._activeSound[t]=null,delete this._activeSound[t])},i.prototype.play=function(e,i,n,s,r){void 0===i&&(i=1),void 0===r&&(r=!0);var o,a=this;s&&s.length>0&&(o=function(t){var i=t.currentTarget;null!=i&&void 0!=i&&(i.removeEventListener(egret.Event.SOUND_COMPLETE,o,a),null!=s&&void 0!=s&&(s.length>1?s[0].call(s[1],e,i):s[0](e,i)))});var h=function(t){if(a._soundRes[e]=t,1==r){var o=!0;if(a._currentMusicChanel&&null!=a.loadTimeDic[a._currentMusicChanel.name]&&null!=a.loadTimeDic[e]&&a.loadTimeDic[a._currentMusicChanel.name]>a.loadTimeDic[e]&&(o=!1),1==o){var h=a.play(e,i,n,s,r);a.resetCurrentMusic(h,e)}}else(new Date).getTime()-a.loadTimeDic[e]<=1e3&&(a.loadTimeDic[e]=0,a._activeSound[e]=a.play(e,i,n,s,r))},l=0;if(null!=this.loadTimeDic[e]&&(l=this.loadTimeDic[e]),this.loadTimeDic[e]=(new Date).getTime(),null==this._soundRes[e]||void 0==this._soundRes[e]){if(RES.hasRes(e)){var c=RES.getRes(e);null!=c||void 0!=c?h(c):(t.Console.log("sound声音资源没有预加载到本地,建议进行预加载:"+e),t.ResUtils.getRes(e,h,null,egret.URLLoaderDataFormat.SOUND))}else t.ResUtils.getRes(e,h,null,egret.URLLoaderDataFormat.SOUND);return null}if(this._soundRes[e]){if(0==r&&(new Date).getTime()-l<30)return this.loadTimeDic[e]=l,null;var u=this._soundRes[e].play(n,i);if(null!=u&&void 0!=u){o&&u.addEventListener(egret.Event.SOUND_COMPLETE,o,a);var d=1==r?this._musicVolume:this._soundVolume;return u.volume=d,u}return null}return null},i.prototype.randomSounds=function(t){t&&(this._bgMusics=t);var e=Math.floor(this._bgMusics.length*Math.random());this.play(this._bgMusics[e],0)},i.prototype.playBgMusic=function(t,e){var i=this;if(i._bgMusics=t,e&&(i._currentMusicIndex=e),i._musicOpen&&i._bgMusics.length>0&&(i._currentMusicIndex>=i._bgMusics.length&&(i._currentMusicIndex=0),null==i._currentMusicChanel||i._bgMusics[i._currentMusicIndex]!=i._currentMusicChanel.name)){var n=i.play(i._bgMusics[i._currentMusicIndex],1,e,[i.onMusicEnd,i]);i.resetCurrentMusic(n,i._bgMusics[i._currentMusicIndex])}},i.prototype.onMusicEnd=function(t){var e=this;if(e._currentMusicIndex++,e._currentMusicIndex==e._bgMusics.length&&(e._currentMusicIndex=0),e._musicOpen&&e._bgMusics.length>0){var i=e.play(e._bgMusics[e._currentMusicIndex],1,0,[e.onMusicEnd,e]);e.resetCurrentMusic(i,e._bgMusics[e._currentMusicIndex])}},i.prototype.resetCurrentMusic=function(t,i){if(null!=t&&void 0!=t){var n=new e;n.name=i,n.isMusic=!0,n.egret_channel=t,n.res=this._soundRes[i],null!=this._currentMusicChanel&&this._currentMusicChanel!=n&&this._currentMusicChanel.name!=n.name&&this.stopBgMusic(),this._currentMusicChanel=n,this._currentMusicChanel.isStopped=!1,this._currentMusicChanel.egret_channel.volume=this._musicVolume}},i.prototype.stopBgMusic=function(){this._currentMusicChanel&&(this._currentMusicChanel.stop(),this.loadTimeDic[this._currentMusicChanel.name]=0,this._currentMusicChanel=null)},i.prototype.pauseBgMusic=function(){this._currentMusicChanel&&this._currentMusicChanel.stop()},i.prototype.resumeBgMusic=function(){if(this._musicOpen&&(!this._currentMusicChanel||this._currentMusicChanel.isStopped)){var t=this,e=0;if(this._currentMusicChanel&&(e=this._currentMusicChanel.position),this._bgMusics&&this._bgMusics.length>0){var i=this.play(this._bgMusics[this._currentMusicIndex],1,e,[t.onMusicEnd,t]);this.resetCurrentMusic(i,this._bgMusics[this._currentMusicIndex])}}},i.prototype.isPlayingBgMusic=function(){return this._currentMusicChanel&&0==this._currentMusicChanel.isStopped?!0:!1
},i.prototype.isSoundPlaying=function(t){return this._activeSound[t]&&this._activeSound[t].position?!0:!1},Object.defineProperty(i.prototype,"musicVolume",{get:function(){return this._musicVolume},set:function(t){this._musicVolume=t,this._currentMusicChanel.egret_channel.volume=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundVolume",{get:function(){return this._soundVolume},set:function(t){this._soundVolume=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"musicOpen",{get:function(){return this._musicOpen},set:function(e){this._musicOpen=e,e?this.resumeBgMusic():this.pauseBgMusic(),t.Utils.setLocalStorage(i.MUSIC_TOGGLE,Number(this._musicOpen))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundOpen",{get:function(){return this._soundOpen},set:function(e){this._soundOpen=e,t.Utils.setLocalStorage(i.SOUND_TOGGLE,Number(this._soundOpen))},enumerable:!0,configurable:!0}),i.SOUND_TOGGLE="sound_toggle",i.MUSIC_TOGGLE="music_toggle",i}();t.SoundMgr=i,__reflect(i.prototype,"xlLib.SoundMgr")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i,"instance",{get:function(){return null==this._self&&(this._self=new i),this._self},enumerable:!0,configurable:!0}),i.prototype.init=function(){this.sendedKb=0,this.receiveKb=0,this.sendB=0,this.receiveB=0,this.secondTimer=new egret.Timer(1e3,0),this.secondTimer.addEventListener(egret.TimerEvent.TIMER,this.dispatchSecondEvent,this),this.secondTimer.start(),this.requestPing()},i.prototype.dispatchSecondEvent=function(e){t.Console.isDevMode||(this.dispatchEventWith(i.SENDANDRECEIVE,!1,{send:this.sendB,receive:this.receiveB}),this.sendB=this.receiveB=0)},i.prototype.requestPing=function(){},Object.defineProperty(i.prototype,"socketStatus",{set:function(t){this.dispatchEventWith(i.SOCKETSTATUS,!1,t)},enumerable:!0,configurable:!0}),i.prototype.messageCharStatistics=function(e,n,s){if(void 0===s&&(s="utf-8"),!t.Console.isDevMode){var r,o,a,h=0;if(s=s?s.toLowerCase():"","utf-16"===s||"utf16"===s)for(o=0,a=e.length;a>o;o++)r=e.charCodeAt(o),h+=65535>=r?2:4;else for(o=0,a=e.length;a>o;o++)r=e.charCodeAt(o),h+=127>=r?1:2047>=r?2:65535>=r?3:4;"send"==n?(this.sendB+=h,this.sendedKb+=h/1024):(this.receiveB+=h,this.receiveKb+=h/1024),this.dispatchEventWith(i.SENDEDANDRECEIVED,!1,{sended:this.sendedKb,received:this.receiveKb})}},i.prototype.destroy=function(){this.secondTimer&&(this.secondTimer.removeEventListener(egret.TimerEvent.TIMER,this.dispatchSecondEvent,this),this.secondTimer.stop())},i.PING="ping",i.SENDANDRECEIVE="sendAndReceive",i.SENDEDANDRECEIVED="sendedAndReceived",i.SOCKETSTATUS="socketStatus",i._self=null,i}(egret.EventDispatcher);t.StatistcsMgr=e,__reflect(e.prototype,"xlLib.StatistcsMgr")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){this._uis=new Object,this._loadings=new Object,this._effects={}}return Object.defineProperty(e,"instance",{get:function(){return null==this._self&&(this._self=new e),this._self},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DefaultLoading",{set:function(t){this.defaultLoadingView=t},enumerable:!0,configurable:!0}),e.prototype.showUI=function(e,i,n,s){void 0===s&&(s=!1);var r=this,o=egret.getQualifiedClassName(e),a=function(t){r._uis[o]&&r._uis[o].hasEventListener(egret.Event.REMOVED_FROM_STAGE,a,r)&&r._uis[o].removeEventListener(egret.Event.REMOVED_FROM_STAGE,a,r),r._uis[o]&&r._uis[o].destroy&&r._uis[o].destroy(),0==s&&(r._uis[o]=null,delete r._uis[o])};return null==this._uis[o]?this._uis[o]=new e(i):this._uis[o].updateUIData&&this._uis[o].updateUIData(i),this._uis[o]?(0==s&&(this._uis[o].hasEventListener(egret.Event.REMOVED_FROM_STAGE,a,this)||this._uis[o].addEventListener(egret.Event.REMOVED_FROM_STAGE,a,this)),(null==this._uis[o].stage||null==this._uis[o].parent)&&(t.SceneMgr.instance.currentScene&&t.SceneMgr.instance.currentScene.topLayer?t.SceneMgr.instance.currentScene.topLayer.addChild(this._uis[o]):egret.MainContext.instance.stage.addChild(this._uis[o])),this._uis[o]):void 0},Object.defineProperty(e.prototype,"commonLoadUI",{get:function(){return this._commonLoadUI},set:function(t){this._commonLoadUI=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tipsLoadUI",{get:function(){return this._tipsLoadUI},set:function(t){this._tipsLoadUI=t},enumerable:!0,configurable:!0}),e.prototype.showProcessBar=function(t,e,i,n,s,r){return void 0===r&&(r=!1),this.showLoading(t,e,i,n,s,r)},e.prototype.showLoadingTimeout=function(t,e,i,n){void 0===e&&(e=""),void 0===i&&(i=3e4),void 0===n&&(n=""),this.showLoading(t,null,null,n,null,!1,e);var s=this;i&&setTimeout(function(){s.hideLoading(t,e)},i)},e.prototype.showLoading=function(e,i,n,s,r,o,a){void 0===o&&(o=!1),void 0===a&&(a=""),""==a?e&&null!=e?a=egret.getQualifiedClassName(e):(a=egret.getQualifiedClassName(this._commonLoadUI),e=this._commonLoadUI):null==e&&(a=egret.getQualifiedClassName(this._tipsLoadUI),e=this._tipsLoadUI),t.StringUtils.stringIsNullOrEmpty(a)||null==e||(null==this._loadings[a]&&(this._loadings[a]=new e),this._loadings[a].setProgress&&this._loadings[a].setProgress(2,100),null==this._loadings[a].stage&&(t.SceneMgr.instance.currentScene?t.SceneMgr.instance.currentScene.currentGame&&t.SceneMgr.instance.currentScene.currentGame.parent?t.SceneMgr.instance.currentScene.currentGame.addChild(this._loadings[a]):t.SceneMgr.instance.currentScene.tipsLayer&&t.SceneMgr.instance.currentScene.tipsLayer.addChild(this._loadings[a]):egret.MainContext.instance.stage.addChild(this._loadings[a])),this._loadings[a].setProgress&&this._loadings[a].setProgress(i,n,s,r,o))},e.prototype.hideLoading=function(e,i,n){void 0===i&&(i=""),void 0===n&&(n=!0),""==i&&(e&&null!=e?i=egret.getQualifiedClassName(e):(i=egret.getQualifiedClassName(this._commonLoadUI),e=this._commonLoadUI)),null!=this._loadings[i]&&(this._loadings[i].setProgress&&this._loadings[i].setProgress(2,100),t.DisplayUtils.removeFromParent(this._loadings[i]),n&&(this._loadings[i]=null,delete this._loadings[i]))},e.prototype.hideUI=function(e,i){void 0===i&&(i=!0);var n=egret.getQualifiedClassName(e);t.DisplayUtils.removeFromParent(this._uis[n]),i&&(this._uis[n]=null,delete this._uis[n])},e.prototype.destroyUI=function(e){var i=egret.getQualifiedClassName(e);null!=this._uis[i]&&void 0!=this._uis[i]&&(t.DisplayUtils.removeFromParent(this._uis[i]),delete this._uis[i])},e.prototype.resize=function(){if(this._uis)for(var t in this._uis){var e=this._uis[t];e&&e.parent&&e.resize&&e.resize()}},e.prototype.clearOldSceneUis=function(){if(this._uis)for(var t in this._uis){var e=this._uis[t];e&&null==e.parent&&delete this._uis[t]}if(this._loadings)for(var t in this._loadings){var e=this._loadings[t];e&&null==e.parent&&delete this._loadings[t]}},e._self=null,e}();t.UIMgr=e,__reflect(e.prototype,"xlLib.UIMgr")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){this._isConnecting=!1,this._connected=!1,this.useLog=!0,this._host="",this._port="",this.handlers=[],this.isPinging=!1,this.actionTimeout=null,this.resetWebSocket()}return e.prototype.resetWebSocket=function(){this.ws&&(this.ws.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.ws.removeEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.ws.removeEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.ws.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketClose,this)),this.ws=new egret.WebSocket,this.ws.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.ws.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.ws.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.ws.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketClose,this)},e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"isConnecting",{get:function(){return this._isConnecting},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connected",{get:function(){return this._connected},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"port",{get:function(){return this._port},enumerable:!0,configurable:!0}),e.prototype.connect=function(e,i,n){if(!this._connected&&!this._isConnecting){this._host=e,this._port=i,this.resetWebSocket(),this._isConnecting=!0,this._connected=!1;var s="ws://",r=s+e+":"+i+"?userid="+n;this.ws.connectByUrl(r),t.Console.log("连接: "+r+"  time："+t.Utils.formatDate(new Date,"yyyy-MM-dd hh:mm:ss"))}},e.prototype.close=function(){this.actionTimeout&&(egret.clearTimeout(this.actionTimeout),this.actionTimeout=null),this.ws.connected&&(this.ws.close(),this._isConnecting=!1,this._connected=!1),this.ws&&(this.ws.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.ws.removeEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.ws.removeEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.ws.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketClose,this)),this.ws=null},e.prototype.registerMsgHandler=function(t,e,i,n){void 0===n&&(n=!1),this.addEvent(t,e,i,n)},e.prototype.removeMsgHandler=function(t,e,i){this.removeEvent(t,e,i)},e.prototype.addEvent=function(t,e,i,n){void 0===n&&(n=!1);var s=this.handlers[t];if(null==s)s=[],this.handlers[t]=s;else for(var r=s.length,o=0;r>o;o++)if(s[o][0]==e&&s[o][1]==i)return;s.push([e,i,n])},e.prototype.removeEvent=function(t,e,i){var n=this.handlers[t];if(null!=n)for(var s=n.length,r=s-1;r>=0;r--)n[r][0]==e&&n[r][1]==i&&n.splice(r,1);n&&0==n.length&&(this.handlers[t]=null,delete this.handlers[t])},e.prototype.send=function(e,i,n,s,r,o){void 0===o&&(o=!1),this.sendMes(e,i,function(e){200==e.code?n.call(s,e):(r&&r.call(s,e),o&&t.TipsUtils.showFloatWordTips(e.message))},s,r,o)},e.prototype.sendMes=function(e,i,n,s,r,o){void 0===o&&(o=!1),this.ws.connected?(null!=i&&"object"==typeof i&&(i.command=e,i=JSON.stringify(i)),this.registerMsgHandler(e,n,s,!0),this.ws.writeUTF(i),this.ws.flush(),console.log("开始发送消息---------------"+i)):t.TipsUtils.showFloatWordTips("服务器已断开，请检查网络环境")},e.prototype.onReceiveMessage=function(t){var e=this.ws.readUTF(),i=JSON.parse(e);this.handlers[i.command]&&(console.log("收到消息 = "+e),this.sendEvent(i.command,i))},e.prototype.sendEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.handlers[t];if(null!=n)for(var s=n.length,r=void 0,o=void 0,a=void 0,h=0;s>h;h++){var l=n[h];r=l[0],r&&(o=l[1],a=l[2],r.apply(o,e),a&&n.splice(h,1))}},e.prototype.onSocketOpen=function(e){this._isConnecting=!1,this._connected=!0,EventUtil.dispatchEvent(EventConst.ON_SOCKET_SUC,{}),t.Console.log("网络已连接  time："+t.Utils.formatDate(new Date,"yyyy-MM-dd hh:mm:ss"))},e.prototype.onSocketClose=function(e){(this._connected||this._isConnecting)&&(this._isConnecting=!1,this._connected=!1,EventUtil.dispatchEvent(EventConst.ON_SOCKET_CLOSE,{}),t.Console.log("网络已断开  time："+t.Utils.formatDate(new Date,"yyyy-MM-dd hh:mm:ss")))},e}();t.WebSocketMgr=e,__reflect(e.prototype,"xlLib.WebSocketMgr")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function t(){}return t.init=function(e,i){egret.ExternalInterface.addCallback(t.SENDTOJS,function(e){t.onNativeMessage(e)})},t.setRTMPUrl=function(e,i,s){var r=new n;r.cmd=t.livePlayer,r.main=e,r.sub=i,r.hall=s,egret.ExternalInterface.call(t.SENDTONATIVE,JSON.stringify(r))},t.showVideo=function(){var e=new i;e.cmd=t.showPlayer,e.data="xixi",egret.ExternalInterface.call(t.SENDTONATIVE,JSON.stringify(e))},t.setPlayerNull=function(){var e=new i;e.cmd=t.clearPlayer,e.data="xixi",egret.ExternalInterface.call(t.SENDTONATIVE,JSON.stringify(e))},t.setGotoURL=function(e){var n=new i;n.cmd=t.gotoURL,n.data=e,egret.ExternalInterface.call(t.SENDTONATIVE,JSON.stringify(n))},t.setGameStatus=function(e){var n=new i;n.cmd=t.gameStatus,e?n.data="ingame":n.data="outgame",egret.ExternalInterface.call(t.SENDTONATIVE,JSON.stringify(n))},t.onNativeMessage=function(t){var e=JSON.parse(t);switch(e.cmd){case"netinfo":var i=e.value;GlobalData.hasNetwork=i}},t.SENDTONATIVE="sendToNative",t.SENDTOJS="sendToJS",t.livePlayer="livePlayer",t.clearPlayer="clearPlayer",t.showPlayer="showPlayer",t.gotoURL="gotoURL",t.gameStatus="gameStatus",t}();t.AndroidSDK=e,__reflect(e.prototype,"xlLib.AndroidSDK");var i=function(){function t(){}return t}();t.YHGameObj=i,__reflect(i.prototype,"xlLib.YHGameObj");var n=function(){function t(){}return t}();t.YHVideoObj=n,__reflect(n.prototype,"xlLib.YHVideoObj")}(xlLib||(xlLib={}));var xlLib;!function(t){var e;!function(t){t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t[t.DEBUG_SERVER=4]="DEBUG_SERVER",t[t.INFO_SERVER=5]="INFO_SERVER",t[t.WARN_SERVER=6]="WARN_SERVER",t[t.ERROR_SERVER=7]="ERROR_SERVER"}(e=t.LOGLEVEL||(t.LOGLEVEL={}));var i=function(){function i(){}return i.setLogLevel=function(t){1==this.isDevMode?this.LogLevel=e.DEBUG:(this.LogLevel=t,egret.Logger.logLevel=egret.Logger.INFO)},i.init=function(e,i){t.Global.isH5?this.isDevMode=e:this.isDevMode=e,this.setLogLevel(i)},i.getLocalLevel=function(t){return t>=e.DEBUG_SERVER&&(t=this.LogLevel-e.DEBUG_SERVER),t},i.log=function(i){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var r=this.getLocalLevel(this.LogLevel);r<=e.DEBUG&&((null==i||void 0==i||"string"==typeof i&&""==i)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),t.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"LOG",i,n):console.log(i,n),r!=this.LogLevel)},i.debug=function(i){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var r=this.getLocalLevel(this.LogLevel);r<=e.DEBUG&&((null==i||void 0==i||"string"==typeof i&&""==i)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),t.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"DEBUG",i,n):console.log(i,n),r!=this.LogLevel)},i.info=function(i){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var r=this.getLocalLevel(this.LogLevel);r<=e.INFO&&((null==i||void 0==i||"string"==typeof i&&""==i)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),t.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"INFO",i,n):console.log(i,n),r!=this.LogLevel)},i.warn=function(i){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var r=this.getLocalLevel(this.LogLevel);r<=e.WARN&&((null==i||void 0==i||"string"==typeof i&&""==i)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),t.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"WARN",i,n):console.log(i,n),r!=this.LogLevel)},i.error=function(i){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var r=this.getLocalLevel(this.LogLevel);r<=e.ERROR&&((null==i||void 0==i||"string"==typeof i&&""==i)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),t.Global.isH5?console.error((new Date).toTimeString().split(" ")[0],"ERROR",i,n):console.log(i,n),r!=this.LogLevel);var o=i;n&&n.forEach(function(t){t&&(o+=t)}),t.DebugView&&t.DebugView.Instance.addLog(o)},i.isDevMode=!1,i.LOG_LEVEL_STR=["[DEBUG]","[INFO]","[WARN]","[ERROR]"],i.LogLevel=7,i}();t.Console=i,__reflect(i.prototype,"xlLib.Console")}(xlLib||(xlLib={})),onerror=function(t,e,i,n,s){var r="异常捕获:"+t+"url:"+e+"line:"+i;xlLib.Console.error(r),xlLib.DebugView.Instance.addLog(r)};var xlLib;!function(t){function e(t){if(!t)return null;var e=o[t];if(e)return e;var i=t.split("."),n=i.length;e=__uglobal;for(var s=0;n>s;s++){var r=i[s];if(e=e[r],!e)return null}return o[t]=e,e}function i(t){var e="^"+t+".";for(var i in o)i.match(e)&&console.error("匹配成功:"+i)}function n(t){if(!t)return null;var e="^"+t+".";if(-1==t.indexOf("."))for(var i in o)i.match(e)&&(o[i]=null,delete o[i]);else o[t]=null,delete o[t]}function s(t){if(!t||"object"!=typeof t&&!t.prototype)return null;var e=t.prototype?t.prototype:Object.getPrototypeOf(t),i=Object.getPrototypeOf(e);if(!i)return null;var n=r(i.constructor);return n?n:null}function r(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var n=i.constructor.toString().trim(),s=n.indexOf("("),r=n.substring(9,s);return Object.defineProperty(i,"__class__",{value:r,enumerable:!1,writable:!0}),r}var o={};t.getDefinitionByName=e,t.test=i,t.delDefinitionByName=n,t.getQualifiedSuperclassName=s,t.getQualifiedClassName=r}(xlLib||(xlLib={}));var __uglobal=__uglobal||this,xlLib;!function(t){var e=function(){function t(){}return t.vibrate=function(t){void 0===t&&(t=1e3),navigator.vibrate?navigator.vibrate(t):navigator.webkitVibrate&&navigator.webkitVibrate(t)},t.getMic=function(){},t.getScreen=function(){},t.callPhone=function(t){try{window.open("tel:"+t,"_self")}catch(e){}},t.sendMessage=function(t){try{window.open("sms:"+t,"_self")}catch(e){}},t.getCurUrl=function(){try{return location.href}catch(t){}},t.curAngle=Number(window.orientation),t}();t.DeviceUtils=e,__reflect(e.prototype,"xlLib.DeviceUtils")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){}return e.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.createAsyncMovieClicp=function(e,i,n,s){void 0===n&&(n=!0);var r,o;return r=new egret.MovieClipDataFactory,o=new egret.MovieClip,t.ResUtils.getRes(e+"_png",function(t,e){r.texture=t,o.movieClipData=r.generateMovieClipData(i),n?o.play(-1):o.gotoAndPlay(0,s)}),t.ResUtils.getRes(e+"_json",function(t,e){r.mcDataSet=t,o.movieClipData=r.generateMovieClipData(i),n?o.play(-1):o.gotoAndPlay(0,s)}),o},e.createMovieClicp=function(t,e){var i,n,s=RES.getRes(t+"_json"),r=RES.getRes(t+"_png");return i=new egret.MovieClipDataFactory(s,r),n=new egret.MovieClip(i.generateMovieClipData(e))},e.createMask=function(e,i,n,s){void 0===e&&(e=.3),void 0===s&&(s=0);var r=new egret.Sprite;return r.graphics.clear(),r.graphics.beginFill(s,e),r.graphics.drawRect(0,0,i?i:t.Global.screenWidth,n?n:t.Global.screenHeight),r.graphics.endFill(),r},e.createShape=function(e,i,n,s){void 0===e&&(e=.3),void 0===s&&(s=0);var r=new egret.Shape;return r.graphics.clear(),r.graphics.beginFill(s,e),r.graphics.drawRect(0,0,i?i:t.Global.screenWidth,n?n:t.Global.screenHeight),r.graphics.endFill(),r},e.createCircle=function(t,e,i){void 0===t&&(t=.3),void 0===i&&(i=0);var n=new egret.Sprite;return n.graphics.clear(),n.graphics.beginFill(i,t),n.graphics.drawCircle(0,0,e),n.graphics.endFill(),n},e.createDragonBonesDisplay=function(e,i,n,s,r){var o=RES.getRes(e);if(n&&null!=n)var a=RES.getRes(i),h=RES.getRes(n);else var a=RES.getRes(i+"_json"),h=RES.getRes(i+"_png");t.StringUtils.stringIsNullOrEmpty(s)&&(s="armature");var l;if(dragonBones){var c=new dragonBones.EgretFactory;c.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(o)),c.addTextureAtlas(new dragonBones.EgretTextureAtlas(h,a)),r?(l=c.buildFastArmature(s),l.enableAnimationCache(r)):l=c.buildArmature(s)}return l},e.runDragonBonesArmature=function(e,i,n,s){return void 0===s&&(s=!0),null==e?void t.Console.error("armature不能为空"):(dragonBones.WorldClock.clock.add(e),void(s?e.animation.gotoAndPlay(i,0,-1,n,0):e.animation.gotoAndStop(i,0)))},e.setComponentEnabled=function(t,e){if(e)t.filters=[];else{var i=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(i);t.filters=[n]}t.enabled=e},e.destoryDragonBonesArmature=function(e,i){return null==e?void t.Console.error("armature不能为空"):(dragonBones.WorldClock.clock.remove(e),e.animation.stop(),void e.dispose())},e.createTextLabel=function(t,e,i,n,s,r,o,a,h,l,c,u){void 0===t&&(t="none"),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a="left"),void 0===h&&(h=0),void 0===l&&(l=0),void 0===c&&(c=0),void 0===u&&(u=0);var d=new egret.TextField;return d.textColor=e,d.textAlign=a,d.fontFamily="微软雅黑",d.text=t,d.size=i,0!=r&&(d.width=r),0!=o&&(d.height=o),0!=c&&c!=u&&(d.strokeColor=c,d.stroke=u),d.rotation=h,0!=l&&(d.skewX=l),d.x=n,d.y=s,d},e.createEuiTextLabel=function(t,e,i,n,s,r,o,a,h,l,c,u){void 0===t&&(t="none"),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a="left"),void 0===h&&(h=0),void 0===l&&(l=0),void 0===c&&(c=0),void 0===u&&(u=0);var d=new eui.Label;return d.textColor=e,d.textAlign=a,d.fontFamily="微软雅黑",d.text=t,d.size=i,0!=r&&(d.width=r),0!=o&&(d.height=o),0!=c&&c!=u&&(d.strokeColor=c,d.stroke=u),d.rotation=h,0!=l&&(d.skewX=l),d.x=n,d.y=s,d},e.removeFromParent=function(t){t&&t.parent&&t.parent.removeChild(t)},e.removeAllChildren=function(t){for(;t&&t.numChildren&&t.numChildren>0;)this.removeFromParent(t.getChildAt(0))},e.catchScreen=function(t,e){var i=new egret.RenderTexture;return i.drawToTexture(t),i.toDataURL("image/png",e?e:new egret.Rectangle(0,0,t.width,t.height))},e.catchScreenToTex=function(t,e,i){var n=new egret.RenderTexture;return n.drawToTexture(t,e,i),n},e.lightArea=function(e,i){void 0===i&&(i=.8);var n=new egret.DisplayObjectContainer,s=t.DisplayUtils.createShape(i,t.Global.screenWidth,t.Global.screenHeight);n.addChild(s),n.addChild(e),e.blendMode=egret.BlendMode.ERASE;var r=new egret.RenderTexture;r.drawToTexture(n);var o=new egret.Bitmap;return o.texture=r,o},e.ticketStarted=!1,e}();t.DisplayUtils=e,__reflect(e.prototype,"xlLib.DisplayUtils")}(xlLib||(xlLib={}));var EffectUtils;!function(t){function e(t,e){if(void 0===e&&(e=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[t.hashCode]){null!=this.rotationArr[t.hashCode]&&this.rotationArr[t.hashCode]||(this.rotationArr[t.hashCode]=!0);var i=function(){this.rotationArr[t.hashCode]&&null!=t&&(t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(i,this))};t.rotation=0,egret.Tween.get(t).to({rotation:360},e).call(i,this)}}function i(t,e){void 0===e&&(e=1e3);var i=function(){egret.Tween.get(t).to({alpha:0},e).call(n)},n=function(){egret.Tween.get(t).to({alpha:1},e).call(i)};egret.Tween.get(t).to({alpha:0},e).call(n)}function n(t){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[t.hashCode]=!1}function s(t){var e=80,i=t.x;egret.Tween.get(t).to({x:t.x-10},e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,2*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x-20},e)},this,3*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:t.x+20},e)},this,4*e),egret.setTimeout(function(){egret.Tween.get(t).to({x:i},e)},this,5*e)}function r(e){void 0===e&&(e=1);var i=t.curPanel,n=40,s=i.x,r=i.y;1==e?(egret.Tween.get(i).to({x:i.x-10},n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x+20},n)},this,2*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x-20},n)},this,3*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x+20},n)},this,4*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:s},n)},this,5*n)):(egret.Tween.get(i).to({x:i.x-10,y:i.y},n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x+20,y:i.y},n)},this,2*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x,y:i.y+15},n)},this,3*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x,y:i.y-20},n)},this,4*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x,y:i.y+10},n)},this,5*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:s,y:r},n)},this,6*n))}function o(t,e,i){switch(void 0===t&&(t=""),void 0===e&&(e=1),void 0===i&&(i=!1),e){case 1:break;case 2:xlLib.TipsUtils.showTipsLeftOrRight(t,i,!0);break;case 3:xlLib.TipsUtils.showTipsLeftOrRight(t,i,!1);break;case 4:xlLib.TipsUtils.showTipsFromCenter(t,i);break;case 5:xlLib.TipsUtils.showTipsBigToSmall(t,i)}}function a(t,e,i){var n=this;if(!this.isPlayEffectPlay){var s=t.anchorOffsetX,r=t.anchorOffsetY;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2;var o=t.anchorOffsetX-s,a=t.anchorOffsetY-r;t.x+=o,t.y+=a;var h=function(){t.anchorOffsetX=s,t.anchorOffsetY=r,t.x-=o,t.y-=a,t.scaleX=1,t.scaleY=1,null!=e&&e.call(i),egret.Tween.removeTweens(t),n.isPlayEffectPlay=!1},l=function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},100).call(h,this)};egret.Tween.get(t).to({scaleX:.8,scaleY:.8},100,egret.Ease.sineIn).call(l,this)}}function h(t,e,i){if(void 0===e&&(e=1),void 0===i&&(i=null),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var n=function(){this.isPlayEffectPlay=!1,i()},s=function(){1==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.elasticOut).call(n,this):2==e?egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.backOut).call(n,this):3==e&&egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},100).call(n,this)};egret.Tween.get(t).to({scaleX:.5,scaleY:.5,x:t.x+t.width/4,y:t.y+t.height/4},100,egret.Ease.sineIn).call(s,this)}}function l(t,e){void 0===e&&(e=function(){});var i=function(){egret.Tween.get(t).to({scaleX:1,scaleY:1,x:t.x-t.width/4,y:t.y-t.height/4},500,egret.Ease.elasticOut).call(e,this)};egret.Tween.get(t).to({scaleX:.5,scaleY:.5,x:t.x+t.width/4,y:t.y+t.height/4},100,egret.Ease.sineIn).call(i,this)}function c(t,e,i){void 0===e&&(e=800),void 0===i&&(i=function(){}),t.alpha=0,t.scaleX=4,t.scaleY=4;var n=function(){i()};egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){n()},this,e)}function u(t,e){void 0===e&&(e=function(){}),t.scaleX=.1,t.scaleY=.1;var i=function(){e()};egret.Tween.get(t).to({scaleX:1,scaleY:1},800,egret.Ease.elasticOut).call(i,this)}function d(t,e,i,n,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=function(){}),void 0===s&&(s=200);var r=t.x,o=t.y;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x+=t.anchorOffsetX,t.y+=t.anchorOffsetY-10,t.parent&&t.parent.setChildIndex(t,t.parent.numChildren-1);var a=function(){egret.Tween.get(t).to({x:r,y:o},s),n()},h=function(){t.anchorOffsetX=0,t.anchorOffsetY=0,t.x-=t.width/2,t.y-=t.height/2-10,t.scaleX=1,t.scaleY=1,egret.Tween.get(t).to({x:e-10,y:i},s).call(a,this)};egret.Tween.get(t).to({scaleX:1.2,scaleY:1.2},s).call(h,this)}function p(t,e,i){void 0===e&&(e=function(){}),void 0===i&&(i=400);t.x,t.y;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x+=t.anchorOffsetX,t.y+=t.anchorOffsetY-10,t.parent&&t.parent.setChildIndex(t,t.parent.numChildren-1);var n=function(){t.anchorOffsetX=0,t.anchorOffsetY=0,t.x-=t.width/2,t.y-=t.height/2-10,t.scaleX=1,t.scaleY=1,e()};egret.Tween.get(t).to({scaleX:1.4,scaleY:1.4},i).call(n,this)}function g(t,e,i){void 0===e&&(e=800),void 0===i&&(i=function(){}),t.alpha=0,t.scaleX=4,t.scaleY=4;var n=function(){i()},s=function(){egret.Tween.get(t).to({alpha:0},800).call(n,this)};egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){s()},this,e)}function _(t){var e=function(){if(null!=t){var i=function(){t.scaleX=1,t.scaleY=1,egret.Tween.get(t).to({alpha:1},1e3).call(e,self)};t.alpha=1,egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(i,self)}};e()}function f(t,e,i){void 0===i&&(i=50);var n=function(){if(null!=t){var s=function(){egret.Tween.get(t).to({y:t.y-i},e).call(n,this)};egret.Tween.get(t).to({y:t.y+i},e).call(s,this)}};n()}function v(t,e,i){void 0===i&&(i=20);var n=function(){if(null!=t){var s=function(){egret.Tween.get(t).to({rotation:-i},e).call(n,this)};egret.Tween.get(t).to({rotation:i},e).call(s,this)}};n()}function m(t,e,i){void 0===e&&(e=""),void 0===i&&(i=200);for(var n=e.split(""),s=n.length,r=0;s>r;r++)egret.setTimeout(function(){t.appendText(n[Number(this)])},r,i*r)}function y(t,e){for(var i=[[20,300],[15,300],[10,300],[5,300]],n="egret.Tween.get("+t+")",s=0,r=i.length;r>s;s++)n+=".to({'y':"+e+"-"+i[s][0]+"}, "+i[s][1]+")",n+=".to({'y':"+e+"}, "+i[s][1]+")";return n+=";"}function b(t,e){t.alpha=1,egret.Tween.get(t).to({alpha:0},e).to({alpha:1},e).call(this.startFlicker,this,[t])}function E(t){egret.Tween.removeTweens(t)}function C(t,e,i,n,s){var r=0,o=0,a=0,h=[],l=function(){clearInterval(a),a=0;for(var t=0;t<h.length;t++)egret.Tween.removeTweens(h[t]),h[t].parent.removeChild(h[t])},c=function(){if(o>8)return clearInterval(r),r=0,o=0,void(a=setInterval(l.bind(this),1200));o++;for(var c=Math.round(10*Math.random()+5),u=0;c>u;u++){var d=new eui.Image("gold");d.x=e+Math.round(150*Math.random()+10),d.y=i+Math.round(150*Math.random()+10),d.scaleX=.8,d.scaleY=.8,t.addChild(d),h.push(d);var p=n+Math.round(60*Math.random()+1),g=s+Math.round(60*Math.random()+1);egret.Tween.get(d).to({x:p,y:g},1e3).wait(100).call(function(){},[t,d])}};r=setInterval(c.bind(this),50)}t.rotationEffect=e,t.blinkEffect=i,t.removeRotationEffect=n,t.shakeObj=s,t.shakeScreen=r,t.showTips=o,t.playButtonEffect=a;t.playEffect=h,t.playEffect2=l,t.playEffect3=c,t.playEffect4=u,t.playRoleActionEffect1=d,t.playRoleActionEffect2=p,t.playEffect5=g,t.playScaleEffect=_,t.flyObj=f,t.rockObj=v,t.typerEffect=m,t.macIconShake=y,t.startFlicker=b,t.stopFlicker=E,t.coinsFly=C}(EffectUtils||(EffectUtils={}));var xlLib;!function(t){var e=function(){function e(){}return e.checkJsIsExist=function(e){if(1==t.Global.isH5){document.body.setAttribute("style","");for(var i=document.getElementsByTagName("script"),n=0;n<i.length;n++)if(i[n].src.indexOf(e)>-1)return!0}return!1},e.isLobbyMode=function(){return"LobbyScene"==egret.getQualifiedClassName(t.SceneMgr.instance.currentScene)?!0:!1},e.LoadGame=function(i,n,s,r,o,a){t.ScreenUtils.landscape&&(this.defaultDirect=t.ScreenUtils.landscape),i=RES.getVersionController().getVirtualUrl(i);var h=function(i){r&&(s.preloadUI=r);var h=e.getGameStage(n,s);if(h&&(r&&(h.preLoadCallBack=function(){t.UIMgr.instance.hideLoading(r)}),o?o.call(a,h):t.SoundMgr.instance.stopBgMusic(),0==t.Global.isInGame)){t.Global.isInGame=!0,t.SceneMgr.instance.currentScene.addGame(h);try{var l={};l.gameId=s.gameId,l.time=(new Date).getTime(),t.Utils.setLocalStorage(CommonConsts.LOBBY_LASTGAME,JSON.stringify(l))}catch(c){t.Console.error("设置游戏GameId失败")}}};t.UIMgr.instance.clearOldSceneUis(),null==this.lbscene&&(this.lbscene=t.getQualifiedClassName(t.SceneMgr.instance.currentScene)),this.checkJsIsExist(i)?h():(r&&t.UIMgr.instance.showLoadingTimeout(r,"",0),this.LoadGameJs(i,h))},e.LoadLobby=function(e,i,n,s,r,o){null==e&&(e="resource/main.min.js"),e=RES.getVersionController().getVirtualUrl(e),null==i&&(i="AppMain");var a=function(e){var s=egret.getDefinitionByName(i);s&&t.SceneMgr.instance.changeScene(s,n)};this.checkJsIsExist(e)?a():(s&&t.UIMgr.instance.showLoadingTimeout(s,"",0),this.LoadGameJs(e,a))},e.ExitGame=function(){if(t.Global.gameId=t.Global.lobbyGameId,t.Global.isInGame=!1,t.SoundMgr.instance.stopSounds(),t.SoundMgr.instance.stopBgMusic(),t.ScreenUtils.landscape&&this.defaultDirect!=t.ScreenUtils.landscape&&(t.ScreenUtils.landscape=!t.ScreenUtils.landscape),t.SceneMgr.instance.currentScene.removeGame)t.SceneMgr.instance.currentScene.removeGame(),t.SceneMgr.instance.currentScene.uiLayer.visible=!0;else{var e=t.getDefinitionByName(this.lbscene);t.SceneMgr.instance.changeScene(e)}t.delDefinitionByName("Cmd"),this.removeGameJs(),t.UIMgr.instance.clearOldSceneUis(),t.Utils.setLocalStorage(CommonConsts.LOBBY_LASTGAME,null),t.Global.dispatchEvent(t.ZqEvent.UPDATE_USER_INFO),t.Global.dispatchEvent(t.ZqEvent.CHECK_VERSION_UPDATE)},e.reloadGame=function(e,i,n,s,r,o){1==t.Global.lobbyMode&&(t.Global.gameId=t.Global.lobbyGameId,t.Global.isInGame=!1,t.ScreenUtils.landscape&&this.defaultDirect!=t.ScreenUtils.landscape&&(t.ScreenUtils.landscape=!t.ScreenUtils.landscape),t.SoundMgr.instance.stopSounds(),t.SoundMgr.instance.stopBgMusic(),t.SceneMgr.instance.currentScene.removeGame?(t.SceneMgr.instance.currentScene.removeGame(),t.SceneMgr.instance.currentScene.uiLayer.visible=!0):t.SceneMgr.instance.changeScene(t.LobbyScene),t.delDefinitionByName("Cmd"),this.removeGameJs(),t.UIMgr.instance.clearOldSceneUis(),t.Utils.setLocalStorage(CommonConsts.LOBBY_LASTGAME,null),t.Global.dispatchEvent(t.ZqEvent.UPDATE_USER_INFO),t.Global.dispatchEvent(t.ZqEvent.CHECK_VERSION_UPDATE),this.LoadGame(e,i,n,s,r,o))},Object.defineProperty(e,"lastGame",{get:function(){var t;
return t=0},enumerable:!0,configurable:!0}),e.LoadGameJs=function(t,e,i){},e.getGameStage=function(t,e){var i=egret.getDefinitionByName(t);return i?new i(e):void 0},e.removeGameJs=function(){if(1==t.Global.isH5){var e=document.getElementById("lobbygame"),i=document.getElementsByTagName("HEAD").item(0);e&&i.removeChild(e)}},e.egretLoaded=function(){var t=document.getElementById("loading");document.body.removeChild(t)},e}();t.GameModuleUtils=e,__reflect(e.prototype,"xlLib.GameModuleUtils")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){}return e.init=function(t,i){egret.ExternalInterface.addCallback(e.SENDTOJS,function(t){e.onNativeMessage(t)})},e.setRTMPUrl=function(i,n,s){var r=new t.YHVideoObj;r.cmd=e.livePlayer,r.main=i,r.sub=n,r.hall=s,egret.ExternalInterface.call(t.AndroidSDK.SENDTONATIVE,JSON.stringify(r))},e.showVideo=function(){var i=new t.YHGameObj;i.cmd=e.showPlayer,i.data="xixi",egret.ExternalInterface.call(t.AndroidSDK.SENDTONATIVE,JSON.stringify(i))},e.setPlayerNull=function(){var i=new t.YHGameObj;i.cmd=e.clearPlayer,i.data="xixi",egret.ExternalInterface.call(e.SENDTONATIVE,JSON.stringify(i))},e.setGotoURL=function(i){var n=new t.YHGameObj;n.cmd=e.gotoURL,n.data=i,egret.ExternalInterface.call(e.SENDTONATIVE,JSON.stringify(n))},e.setGameStatus=function(i){var n=new t.YHGameObj;n.cmd=e.gameStatus,i?n.data="ingame":n.data="outgame",egret.ExternalInterface.call(e.SENDTONATIVE,JSON.stringify(n))},e.onNativeMessage=function(t){var e=JSON.parse(t);switch(e.cmd){case"netinfo":var i=e.value;GlobalData.hasNetwork=i}},e.SENDTONATIVE="sendToNative",e.SENDTOJS="sendToJS",e.livePlayer="livePlayer",e.clearPlayer="clearPlayer",e.showPlayer="showPlayer",e.gotoURL="gotoURL",e.gameStatus="gameStatus",e}();t.IosSDK=e,__reflect(e.prototype,"xlLib.IosSDK")}(xlLib||(xlLib={}));var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var i=this.rstr2binl(t);i.length>16&&(i=this.binl_md5(i,8*t.length));for(var n=Array(16),s=Array(16),r=0;16>r;r++)n[r]=909522486^i[r],s[r]=1549556828^i[r];var o=this.binl_md5(n.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(s.concat(o),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",s="",r=0;r<t.length;r++)i=t.charCodeAt(r),s+=n.charAt(i>>>4&15)+n.charAt(15&i);return s},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",s=t.length,r=0;s>r;r+=3)for(var o=t.charCodeAt(r)<<16|(s>r+1?t.charCodeAt(r+1)<<8:0)|(s>r+2?t.charCodeAt(r+2):0),a=0;4>a;a++)n+=8*r+6*a>8*t.length?this.b64pad:i.charAt(o>>>6*(3-a)&63);return n},t.prototype.rstr2any=function(t,e){var i,n,s,r,o,a=e.length,h=Array(Math.ceil(t.length/2));for(i=0;i<h.length;i++)h[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(l);for(n=0;l>n;n++){for(o=Array(),r=0,i=0;i<h.length;i++)r=(r<<16)+h[i],s=Math.floor(r/a),r-=s*a,(o.length>0||s>0)&&(o[o.length]=s);c[n]=r,h=o}var u="";for(i=c.length-1;i>=0;i--)u+=e.charAt(c[i]);return u},t.prototype.str2rstr_utf8=function(t){for(var e,i,n="",s=-1;++s<t.length;)e=t.charCodeAt(s),i=s+1<t.length?t.charCodeAt(s+1):0,e>=55296&&56319>=e&&i>=56320&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),s++),127>=e?n+=String.fromCharCode(e):2047>=e?n+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n},t.prototype.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},t.prototype.binl2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,n=-271733879,s=-1732584194,r=271733878,o=0;o<t.length;o+=16){var a=i,h=n,l=s,c=r;i=this.md5_ff(i,n,s,r,t[o+0],7,-680876936),r=this.md5_ff(r,i,n,s,t[o+1],12,-389564586),s=this.md5_ff(s,r,i,n,t[o+2],17,606105819),n=this.md5_ff(n,s,r,i,t[o+3],22,-1044525330),i=this.md5_ff(i,n,s,r,t[o+4],7,-176418897),r=this.md5_ff(r,i,n,s,t[o+5],12,1200080426),s=this.md5_ff(s,r,i,n,t[o+6],17,-1473231341),n=this.md5_ff(n,s,r,i,t[o+7],22,-45705983),i=this.md5_ff(i,n,s,r,t[o+8],7,1770035416),r=this.md5_ff(r,i,n,s,t[o+9],12,-1958414417),s=this.md5_ff(s,r,i,n,t[o+10],17,-42063),n=this.md5_ff(n,s,r,i,t[o+11],22,-1990404162),i=this.md5_ff(i,n,s,r,t[o+12],7,1804603682),r=this.md5_ff(r,i,n,s,t[o+13],12,-40341101),s=this.md5_ff(s,r,i,n,t[o+14],17,-1502002290),n=this.md5_ff(n,s,r,i,t[o+15],22,1236535329),i=this.md5_gg(i,n,s,r,t[o+1],5,-165796510),r=this.md5_gg(r,i,n,s,t[o+6],9,-1069501632),s=this.md5_gg(s,r,i,n,t[o+11],14,643717713),n=this.md5_gg(n,s,r,i,t[o+0],20,-373897302),i=this.md5_gg(i,n,s,r,t[o+5],5,-701558691),r=this.md5_gg(r,i,n,s,t[o+10],9,38016083),s=this.md5_gg(s,r,i,n,t[o+15],14,-660478335),n=this.md5_gg(n,s,r,i,t[o+4],20,-405537848),i=this.md5_gg(i,n,s,r,t[o+9],5,568446438),r=this.md5_gg(r,i,n,s,t[o+14],9,-1019803690),s=this.md5_gg(s,r,i,n,t[o+3],14,-187363961),n=this.md5_gg(n,s,r,i,t[o+8],20,1163531501),i=this.md5_gg(i,n,s,r,t[o+13],5,-1444681467),r=this.md5_gg(r,i,n,s,t[o+2],9,-51403784),s=this.md5_gg(s,r,i,n,t[o+7],14,1735328473),n=this.md5_gg(n,s,r,i,t[o+12],20,-1926607734),i=this.md5_hh(i,n,s,r,t[o+5],4,-378558),r=this.md5_hh(r,i,n,s,t[o+8],11,-2022574463),s=this.md5_hh(s,r,i,n,t[o+11],16,1839030562),n=this.md5_hh(n,s,r,i,t[o+14],23,-35309556),i=this.md5_hh(i,n,s,r,t[o+1],4,-1530992060),r=this.md5_hh(r,i,n,s,t[o+4],11,1272893353),s=this.md5_hh(s,r,i,n,t[o+7],16,-155497632),n=this.md5_hh(n,s,r,i,t[o+10],23,-1094730640),i=this.md5_hh(i,n,s,r,t[o+13],4,681279174),r=this.md5_hh(r,i,n,s,t[o+0],11,-358537222),s=this.md5_hh(s,r,i,n,t[o+3],16,-722521979),n=this.md5_hh(n,s,r,i,t[o+6],23,76029189),i=this.md5_hh(i,n,s,r,t[o+9],4,-640364487),r=this.md5_hh(r,i,n,s,t[o+12],11,-421815835),s=this.md5_hh(s,r,i,n,t[o+15],16,530742520),n=this.md5_hh(n,s,r,i,t[o+2],23,-995338651),i=this.md5_ii(i,n,s,r,t[o+0],6,-198630844),r=this.md5_ii(r,i,n,s,t[o+7],10,1126891415),s=this.md5_ii(s,r,i,n,t[o+14],15,-1416354905),n=this.md5_ii(n,s,r,i,t[o+5],21,-57434055),i=this.md5_ii(i,n,s,r,t[o+12],6,1700485571),r=this.md5_ii(r,i,n,s,t[o+3],10,-1894986606),s=this.md5_ii(s,r,i,n,t[o+10],15,-1051523),n=this.md5_ii(n,s,r,i,t[o+1],21,-2054922799),i=this.md5_ii(i,n,s,r,t[o+8],6,1873313359),r=this.md5_ii(r,i,n,s,t[o+15],10,-30611744),s=this.md5_ii(s,r,i,n,t[o+6],15,-1560198380),n=this.md5_ii(n,s,r,i,t[o+13],21,1309151649),i=this.md5_ii(i,n,s,r,t[o+4],6,-145523070),r=this.md5_ii(r,i,n,s,t[o+11],10,-1120210379),s=this.md5_ii(s,r,i,n,t[o+2],15,718787259),n=this.md5_ii(n,s,r,i,t[o+9],21,-343485551),i=this.safe_add(i,a),n=this.safe_add(n,h),s=this.safe_add(s,l),r=this.safe_add(r,c)}return[i,n,s,r]},t.prototype.md5_cmn=function(t,e,i,n,s,r){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,r)),s),i)},t.prototype.md5_ff=function(t,e,i,n,s,r,o){return this.md5_cmn(e&i|~e&n,t,e,s,r,o)},t.prototype.md5_gg=function(t,e,i,n,s,r,o){return this.md5_cmn(e&n|i&~n,t,e,s,r,o)},t.prototype.md5_hh=function(t,e,i,n,s,r,o){return this.md5_cmn(e^i^n,t,e,s,r,o)},t.prototype.md5_ii=function(t,e,i,n,s,r,o){return this.md5_cmn(i^(e|~n),t,e,s,r,o)},t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var xlLib;!function(t){var e=function(){function e(){}return e.randomInt=function(t,e){if(0>=e-t)return 0;var i=e-t;return Math.floor(Math.random()*i)+t},e.inRange=function(t,e,i){return t>=e&&i>=t},e.div=function(t,e){return Math.floor(t/e)},e.getZeroTimeStamp=function(){var t=new Date,e=t.getUTCFullYear()+"/"+(t.getUTCMonth()+1)+"/"+t.getUTCDate();return new Date(e).getTime()/1e3},e.getTimeStamp=function(){var t=(new Date).getTime()/1e3;return parseInt(t.toString())},e.getAngle=function(t,e,i,n){var s=i-t,r=n-e,o=Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),a=s/o,h=Math.acos(a),l=180/(Math.PI/h);return 0>r?l=-l:0==r&&0>s&&(l=180),l},e.getCurrencyUnitByLen=function(t){var e="";switch(t){case 2:e="百";break;case 3:e="千";break;case 4:e="万";break;case 5:e="十万";break;case 6:e="百万";break;case 7:e="千万";break;case 8:e="亿";break;case 9:e="十亿";break;case 10:e="百亿";break;case 11:e="千亿";break;case 12:e="兆"}return e},e.getFormatCurrentStr=function(e){var i="";if(e>=1e4){var n=parseFloat(""+e/1e4);return t.NumberUtils.toFixed(n,2)+"万"}if(e>=1e3&&1e4>e){var n=parseFloat(""+e/1e3);return t.NumberUtils.toFixed(n,2)+"千"}return i=e+""},e.toFixed=function(t,e){t=t.toString();var i=t.lastIndexOf(".");return-1==i?t:t.substring(0,i+e+1)},e}();t.NumberUtils=e,__reflect(e.prototype,"xlLib.NumberUtils")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){}return e.resetSoundLoadTimes=function(){for(var t in this._resRequestSoundLoadTimes)this._resRequestSoundLoadTimes[t]=null,delete this._resRequestSoundLoadTimes[t]},e.setMustRes=function(e){try{this._mustResList=[];for(var i in e){var n=e[i];n&&n.resName&&-1==this._mustResList.indexOf(n.resName)&&this._mustResList.push(n.resName)}}catch(s){t.Console.warn("setMustRes:必须资源列表出错,请检查必须资源列表格式")}},e.init=function(){0==this.inited&&(this.inited=!0,RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),egret.startTick(this.onDragonBonesTick,egret.MainContext.instance.stage))},e.onDragonBonesTick=function(t){return dragonBones.WorldClock.clock.advanceTime(-1),!0},e.onItemLoadError=function(e){this._mustResList.indexOf(e.resItem.name)>=0&&t.Utils.restart(e.resItem.name+"资源加载失败,请重新启动游戏","确定")},e.getRes=function(e,i,n,s){function r(t){if(h._needLoadDicCallBack[e]){for(;h._needLoadDicCallBack[e].length>0;){var s=h._needLoadDicCallBack[e].shift();s[0].call(s[1],t,e)}delete h._needLoadDicCallBack[e]}else null!=n?i.call(n,t,e):i&&i(t,e);if(-1!=h._loadingDic.indexOf(e)&&(h._asynLoadLevel--,h._loadingDic.splice(h._loadingDic.indexOf(e),1)),h._needloadDic.length>0&&this._asynLoadLevel<this.MAX_LOAD_LEVEL){var o=h._needloadDic.shift();h.getRes(o,r,h)}}function o(t){h._resRequestSoundLoadTimes[e]=0;var n=t.target;n.removeEventListener(egret.Event.COMPLETE,o,h),n.removeEventListener(egret.IOErrorEvent.IO_ERROR,a,h);var s=n.data;i&&i(s,e)}function a(i){var n=i.target;if(n.removeEventListener(egret.Event.COMPLETE,o,h),n.removeEventListener(egret.IOErrorEvent.IO_ERROR,a,h),t.Console.error("加载资源失败："+e),null!=h._resRequestSoundLoadTimes[e]&&h._resRequestSoundLoadTimes[e]>0){h._resRequestSoundLoadTimes[e]--;var s=new egret.URLLoader;s.dataFormat=egret.URLLoaderDataFormat.SOUND,s.once(egret.Event.COMPLETE,o,h),s.once(egret.IOErrorEvent.IO_ERROR,a,h)}}var h=this;if(s==egret.URLLoaderDataFormat.SOUND){if(null!=this._resRequestSoundLoadTimes[e])return 0==this._resRequestSoundLoadTimes[e]?void 0:void this._resRequestSoundLoadTimes[e]++;this._resRequestSoundLoadTimes[e]=1;var l=new egret.URLLoader;l.dataFormat=egret.URLLoaderDataFormat.SOUND,l.once(egret.Event.COMPLETE,o,h),l.once(egret.IOErrorEvent.IO_ERROR,a,h);RES.configInstance}else if(RES.hasRes(e)){var c=RES.getRes(e);if(c)r(c);else{if(this._loadingDic.indexOf(e)>=0){var u=[i,n];return null==this._needLoadDicCallBack[e]&&(this._needLoadDicCallBack[e]=[]),void this._needLoadDicCallBack[e].push(u)}if(this._asynLoadLevel<this.MAX_LOAD_LEVEL)this._loadingDic.push(e),this._asynLoadLevel++,RES.getResAsync(e,r,this);else{var u=[i,n];-1==this._needloadDic.indexOf(e)&&this._needloadDic.push(e),null==this._needLoadDicCallBack[e]&&(this._needLoadDicCallBack[e]=[]),this._needLoadDicCallBack[e].push(u)}}}else RES.getResByUrl(e,r,this)},e.clearResConfigByConfigName=function(t){var e=RES.configInstance;for(var i in e.groupDic){var n=e.groupDic[i];for(var s in n)t.indexOf(s)>=0&&e.keyMap[n[s].name]&&(n[s].name=null,delete n[s].name);e.groupDic[i]=null,delete e.groupDic[i]}},e.clearResConfigByGroupName=function(t){for(var e=RES.configInstance,i=0;i<t.length;i++){for(var n=RES.getGroupByName(t[i]),s=0;s<n.length;s++)e.keyMap[n[s].name]=null,delete e.keyMap[n[s].name];e.groupDic[t[i]]&&(e.groupDic[t[i]]=null,delete e.groupDic[t[i]])}},e.getMovieClip=function(t,e,i,n,s){function r(s,r){if(o++,o==a.length){var h=new egret.MovieClipDataFactory(RES.getRes(t+"_json"),RES.getRes(t+"_png")),l=new egret.MovieClip(h.generateMovieClipData(e));return void i.call(n,l)}}void 0===s&&(s=!1);var o=0;null==e&&(e="");var a=[t+"_json",t+"_png"];for(var h in a)this.getRes(a[h],r,this)},e.freeMovieClip=function(t,e,i){},e.loadResConfig=function(t){},e.loadGameGroupReses=function(t,e,n,s,r,o){void 0===o&&(o="resource/");var a=function(o){o.groupName==t&&(this.loadedConfig[t].status=i.LOADED,RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,a,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,n,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,s,this),e.call(r,o))},h=function(e){e.groupName==t&&n&&n.call(r,e)},l=function(e){e.groupName==t&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,a,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,n,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,s,this),s&&s.call(r,e))},c=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,c,this);var i=[];for(var n in e.target.resConfig.groupDic)i.push(n);RES.createGroup(t,i),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,a,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,h,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,l,this),RES.loadGroup(t)};null==this.loadedConfig[t]?(this.loadedConfig[t]={},this.loadedConfig[t].status=i.LOADDING,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,c,this),RES.loadConfig(t,o)):this.loadedConfig[t].status==i.LOADED&&e.call(r)},e.MAX_LOAD_LEVEL=1,e._asynLoadLevel=0,e._loadingDic=[],e._needloadDic=[],e._needLoadDicCallBack={},e._resRequestSoundLoadTimes={},e._mustResList=[],e.inited=!1,e.loadedConfig={},e}();t.ResUtils=e,__reflect(e.prototype,"xlLib.ResUtils");var i;!function(t){t[t.LOADDING=0]="LOADDING",t[t.LOADED=1]="LOADED"}(i=t.GROUP_LOAD_STATUS||(t.GROUP_LOAD_STATUS={}))}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){}return e.init=function(e){this.scaleMode=e,t.Global.screenWidth=egret.MainContext.instance.stage.stageWidth,t.Global.screenHeight=egret.MainContext.instance.stage.stageHeight,egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResizeNotify,this),this.resetScaleMode(),this.scaleFactor=t.Global.screenHeight/t.Global.designHeight},e.onDeactive=function(e){t.Global.isActive=!1,egret.Tween.pauseTweens(egret.MainContext.instance.stage),t.SoundMgr.instance.onDeActive(e)},e.onActive=function(e){t.Global.isActive=!0,egret.Tween.resumeTweens(egret.MainContext.instance.stage),t.SoundMgr.instance.onActive(e)},e.onResizeNotify=function(){1==t.Global.isH5?(t.Global.screenWidth=egret.MainContext.instance.stage.stageWidth,t.Global.screenHeight=egret.MainContext.instance.stage.stageHeight):1==this._landscape?(t.Global.screenWidth=egret.MainContext.instance.stage.stageHeight,t.Global.screenHeight=egret.MainContext.instance.stage.stageWidth):(t.Global.screenWidth=egret.MainContext.instance.stage.stageWidth,t.Global.screenHeight=egret.MainContext.instance.stage.stageHeight),this.scaleFactor=t.Global.screenHeight/t.Global.designHeight,t.SceneMgr.instance.currentScene&&t.SceneMgr.instance.currentScene.resize(),t.PopUpMgr.resize(),t.UIMgr.instance.resize()},e.resetScaleMode=function(){this.scaleMode?egret.MainContext.instance.stage.scaleMode=this.scaleMode:egret.Capabilities.isMobile?egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH:egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.SHOW_ALL},Object.defineProperty(e,"landscape",{get:function(){return this._landscape},set:function(e){if(this._landscape=e,1==t.Global.isH5)1==this._landscape?(egret.MainContext.instance.stage.orientation=egret.OrientationMode.LANDSCAPE,egret.MainContext.instance.stage.setContentSize(t.Global.designHeight,t.Global.designWidth)):(egret.MainContext.instance.stage.orientation=egret.OrientationMode.AUTO,egret.MainContext.instance.stage.setContentSize(t.Global.designWidth,t.Global.designHeight));else if(1==this._landscape){var i=0,n=0;if(t.Global.screenWidth<t.Global.screenHeight){i=t.Global.screenWidth/t.Global.designWidth,n=(t.Global.screenHeight-i*t.Global.designHeight)/2;var s=t.Global.screenWidth;t.Global.screenWidth=t.Global.screenHeight,t.Global.screenHeight=s}else i=t.Global.screenHeight/t.Global.designWidth,n=(t.Global.screenWidth-i*t.Global.designHeight)/2;t.SceneMgr.instance.currentScene.x=t.Global.designWidth,t.SceneMgr.instance.currentScene.y=n,t.SceneMgr.instance.currentScene.rotation=90}else{var s=t.Global.screenWidth;t.Global.screenWidth=t.Global.screenHeight,t.Global.screenHeight=s,t.SceneMgr.instance.currentScene.rotation=0,t.SceneMgr.instance.currentScene.x=0,t.SceneMgr.instance.currentScene.y=0}this.onResizeNotify()},enumerable:!0,configurable:!0}),e.scaleFactor=1,e}();t.ScreenUtils=e,__reflect(e.prototype,"xlLib.ScreenUtils")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){}return e.stringIsNullOrEmpty=function(t){return null==t||0==t.length},e.ltrim=function(t){return t.replace(/(^\s*)/g,"")},e.rtrim=function(t){return t.replace(/(\s*$)/g,"")},e.trim=function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},e.sTrim=function(t){return t.replace(/\s/g,"")},e.checkPhone=function(t){return/^1[34578]\d{9}$/.test(t)?!0:!1},e.checkEmail=function(t){return/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(t)?!0:!1},e.getPosition=function(t,e,i){void 0===i&&(i=1);for(var n=new RegExp(e,"g");i--;)n.test(t);var s=n.lastIndex-e.length;return 0>s?null:s},e.formatCurrency=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=5);var s="";isNaN(t)&&(t=0);var r=t+"";null!=e&&"万"==e&&(n?5>n&&(n=5):n=5,r.length>=n?r=r.slice(0,r.length-4):e="");var o=r.split("."),a=!1,h="",l=r;if(o.length>=2&&(a=!0,h=o[1],l=o[0]),1==i){for(var c="",u=l.length,d=Math.ceil(u/3),p=1;d>=p;p++){var g=u-3*p;0>g&&(g=0);var _=u-3*p+3,f=l.substring(g,_)+(1==i?",":"");c=f+c}c=c.substr(0,c.length-1)}else c=l;var v="";return v=a?""+s+c+"."+h:""+s+c,null!=e&&(v+=e),v},e.md5=function(t){return this.md5Object=this.md5Object||new md5,this.md5Object.hex_md5(t)},e.formatCurrencyToUnit=function(e,i,n){void 0===i&&(i=4),void 0===n&&(n=!0);var s,r="",o="";4>i&&(i=4);var a=e.toString().split("."),h=!1,l="",c="";if(a.length>=2&&(h=!0,l=a[1]),c=a[0],c.length>i&&(s=c.length-i),s>=i&&(c=c.replace(c.substr(i,c.length),""),r=t.NumberUtils.getCurrencyUnitByLen(s)),c.length>=4&&1==n){for(var u="",d=c.length,p=Math.ceil(d/3),g=1;p>=g;g++){var _=d-3*g;0>_&&(_=0);var f=d-3*g+3,v=c.substring(_,f)+(1==n?",":"");u=v+u}u=u.substr(0,u.length-1)}else u=c;return o=u+r},e.formatCurrencyByTotalLen=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=8),5>i&&(i=5);var n="";isNaN(t)&&(t=0);var s=Number(t)+"",r="";s.length>=i?s.length-4>=i?(s=s.slice(0,s.length-8),r="亿"):(s=s.slice(0,s.length-4),r="万"):r="";var o=s.split("."),a=!1,h="",l=s;if(o.length>=2&&(a=!0,h=o[1],l=o[0]),1==e){for(var c="",u=l.length,d=Math.ceil(u/3),p=1;d>=p;p++){var g=u-3*p;0>g&&(g=0);var _=u-3*p+3,f=l.substring(g,_)+(1==e?",":"");c=f+c}c=c.substr(0,c.length-1)}else c=l;var v="";return v=a?""+n+c+"."+h:""+n+c,null!=r&&(v+=r),v},e.formatCurrencyNomal=function(t){if(t.indexOf("万")>=0&&(t=t.slice(0,t.length-1),t+="0000"),t.indexOf(",")>=0){var e=t.split(",");t="";for(var i=0;i<e.length;i++)t+=e[i]}return t},e.formatMMSS=function(t){var e=Math.floor(t/60)+"",i=t%60+"";return e.length<2&&(e="0"+e),i.length<2&&(i="0"+i),e+":"+i},e.formatHHMMSS=function(t,e){void 0===e&&(e=":");var i=Math.floor(t/60/60)+"",n=Math.floor(t/60)-60*parseInt(i)+"",s=t%60+"";return i.length<2&&(i="0"+i),n.length<2&&(n="0"+n),s.length<2&&(s="0"+s),i+e+n+e+s},e.formatDDHHMMSS=function(t,e){void 0===e&&(e=":");var i=t,n="",s="",r="",o="",a="天",h="时",l="分";return n=Math.floor(i/60/60/24)+"",i-=24*parseInt(n)*60*60,i>0&&(s=Number(i/60/60)+""),i-=60*parseInt(s)*60,i>0&&(r=Math.floor(i/60)+""),i-=60*parseInt(r),i>0&&(o=t%60+""),n.length<2&&(n="0"+n),s.length<2&&(s="0"+s),r.length<2&&(r="0"+r),o.length<2&&(o="0"+o),"天"==e?n+a+s+h+r+l+o:n+e+s+e+r+e+o},e.getVariables=function(t){for(var e=t.split("="),i={},n=0;n<e.length;)i[e[n]]=e[n+1],n+=2;return i},e.prototype.getStrRealLngth=function(t){var e=t.length,i=0;if(e){for(var n=0;e>n;n++)i+=t.charCodeAt(n)>255?2:1;return i}return 0},e}();t.StringUtils=e,__reflect(e.prototype,"xlLib.StringUtils")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function t(t,e,i,n){void 0===n&&(n=0),this.loopLimit=0,this.last=0,this.jumped=0,this.isStart=!1,this.begin=0,this.delay=t,this.callFun=e,this._thisObj=i,this.loopLimit=n}return t.prototype.stop=function(){-1!=t.timerlists.indexOf(this)&&(this.isStart=!1,t.timerlists.splice(t.timerlists.indexOf(this),1))},t.prototype.start=function(){null==t.timer&&(t.timerNumber=0,t.timer=new egret.Timer(10),t.timer.addEventListener(egret.TimerEvent.TIMER,t.timerHandler,t),t.timer.start()),this.isStart=!0,this.current=this.delay,this.last=egret.getTimer(),this.begin=this.last,this.jumped=0,t.timerlists.push(this)},t.prototype.remain=function(){return this.current},t.prototype.needRender=function(){if(!this.isStart)return 0;this.current=this.current-(egret.getTimer()-this.last),this.last=egret.getTimer();var t=(this.last-this.begin)/this.delay;return t-this.jumped},t.prototype.excute=function(){this.jumped++,0!=this.loopLimit&&this.jumped>this.loopLimit&&this.stop(),this.current=this.delay,this.callFun.call(this._thisObj)},t.timerHandler=function(){for(var e,i=0,n=0,s=0;s<t.timerlists.length;)for(e=t.timerlists[s],s++,i=e.needRender(),i>30&&(i=1),n=0,i>50&&(i=1);i>n;)n++,e.excute()},t.TIMERBASE_DELAY=10,t.timerNumber=0,t.timerlists=[],t}();t.TimerBase=e,__reflect(e.prototype,"xlLib.TimerBase")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){}return e.showTipsDownToUp=function(e,i,n,s){void 0===e&&(e=""),void 0===s&&(s=!1);var r;"string"==typeof e?(r=new egret.TextField,r.size=32,s?r.textColor=t.Global.TextColors.red:r.textColor=t.Global.TextColors.green,r.alpha=0,r.text=e,r.strokeColor=16776960,r.stroke=2,r.textAlign=egret.HorizontalAlign.CENTER):r=e,r.y=n,r.x=i,null!=t.SceneMgr.instance.currentScene&&null!=t.SceneMgr.instance.currentScene.tipsLayer?t.SceneMgr.instance.currentScene.tipsLayer.contains(r)||t.SceneMgr.instance.currentScene.tipsLayer.addChild(r):egret.MainContext.instance.stage.addChild(r);var o=function(){t.DisplayUtils.removeFromParent(r),r=null},a=function(){egret.Tween.get(r).to({y:r.y-50,alpha:0},500).call(o,this)};r.visible=!0,egret.Tween.get(r).to({y:r.y-120,alpha:1},800,egret.Ease.backOut).wait(2e3).call(a,this)},e.showFloatWordTips=function(e){this._tips?(egret.Tween.removeTweens(this._tips),t.DisplayUtils.removeFromParent(this._tips)):this._tips=new t.FloatTips,this._tips.alpha=1,this._tips.setTipsText(e),this._tips.x=t.Global.screenWidth-this._tips.width>>1,this._tips.y=t.Global.screenHeight-this._tips.height>>1,t.SceneMgr.instance.currentScene.tipsLayer.addChild(this._tips),egret.Tween.get(this._tips).wait(500).to({y:this._tips.y-50,alpha:0},1e3).call(function(){this._tips.alpha=1,t.DisplayUtils.removeFromParent(this._tips)},this)},e.showTipsLeftOrRight=function(e,i,n){void 0===e&&(e=""),void 0===i&&(i=!1),void 0===n&&(n=!0);var s;"string"==typeof e?(s=new egret.TextField,s.size=24,i?s.textColor=t.Global.TextColors.red:s.textColor=t.Global.TextColors.green,s.alpha=0,s.text=e,s.strokeColor=0,s.stroke=2,s.bold=!0,s.textAlign=egret.HorizontalAlign.CENTER):s=e,n?s.x=-s.width:s.x=t.Global.screenWidth,s.y=t.Global.screenHeight/2,t.SceneMgr.instance.currentScene.tipsLayer.contains(s)||t.SceneMgr.instance.currentScene.tipsLayer.addChild(s),n?egret.Tween.get(s).to({x:t.Global.screenWidth/2-s.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(s).to({x:t.Global.screenHeight/2-s.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){n?egret.Tween.get(s).to({x:s.x+100},500):egret.Tween.get(s).to({x:s.x-100},500)},this,300),egret.setTimeout(function(){n?egret.Tween.get(s).to({x:t.Global.screenWidth},300,egret.Ease.sineIn):egret.Tween.get(s).to({x:-s.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){t.SceneMgr.instance.currentScene.tipsLayer.contains(s)&&(t.SceneMgr.instance.currentScene.tipsLayer.removeChild(s),s=null)},this,1100)},e.showTipsFromCenter=function(e,i){void 0===e&&(e=""),void 0===i&&(i=!1);var n;"string"==typeof e?(n=new egret.TextField,n.size=24,i?n.textColor=t.Global.TextColors.red:n.textColor=t.Global.TextColors.green,n.alpha=0,n.text=e,n.strokeColor=0,n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER):n=e,n.y=t.Global.screenHeight/2,n.scaleX=0,n.scaleY=0,n.anchorOffsetX=n.width>>1,n.anchorOffsetY=n.height>>1,n.x=t.Global.screenWidth/2,t.SceneMgr.instance.currentScene.tipsLayer.contains(n)||t.SceneMgr.instance.currentScene.tipsLayer.addChild(n);var s=function(){t.SceneMgr.instance.currentScene.tipsLayer.contains(n)&&(t.SceneMgr.instance.currentScene.tipsLayer.removeChild(n),n=null)};egret.Tween.get(n).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(n).to({alpha:0},500).call(s,this)},this,1e3)},e.showTipsBigToSmall=function(e,i){void 0===e&&(e=""),void 0===i&&(i=!1);var n;"string"==typeof e?(n=new egret.TextField,n.size=24,i?n.textColor=t.Global.TextColors.red:n.textColor=t.Global.TextColors.green,n.alpha=0,n.text=e,n.strokeColor=0,n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER):n=e,n.y=t.Global.screenHeight/2,n.anchorOffsetX=n.width>>1,n.anchorOffsetY=n.height>>1,n.scaleX=4,n.scaleY=4,n.x=t.Global.screenWidth/2,t.SceneMgr.instance.currentScene.tipsLayer.contains(n)||t.SceneMgr.instance.currentScene.tipsLayer.addChild(n);var s=function(){t.SceneMgr.instance.currentScene.tipsLayer.contains(n)&&(t.SceneMgr.instance.currentScene.tipsLayer.removeChild(n),n=null)};egret.Tween.get(n).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(n).to({alpha:0},500).call(s,this)},this,1e3)},e}();t.TipsUtils=e,__reflect(e.prototype,"xlLib.TipsUtils")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(){function e(){}return e.setLocalStorage=function(e,i){t.Global.nativeStorage?t.Global.nativeStorage.save({key:e,id:e,rawData:i,expires:null}):window.localStorage?localStorage.setItem(e,i):window.document&&window.document.cookie||egret&&egret.localStorage.setItem(e,i)},e.getLocalStorage=function(e,i){if(t.Global.nativeStorage)t.Global.nativeStorage.load({key:e,id:e,autoSync:!0,syncInBackground:!0}).then(function(t){i(t)})["catch"](function(t){i(null)});else if(window.localStorage){if(!i)return localStorage.getItem(e);i(localStorage.getItem(e))}else if(window.document&&window.document.cookie);else if(egret){if(!i)return egret.localStorage.getItem(e);i(egret.localStorage.getItem(e))}else{if(!i)return null;i(null)}},e.clearLocalStorage=function(e){try{if(1==t.Global.lobbyMode&&1==t.Global.isInGame)return;e?t.Global.nativeStorage?t.Global.nativeStorage.remove({key:e}):window.localStorage?localStorage.removeItem(e):window.document&&window.document.cookie||egret&&egret.localStorage.removeItem(e):t.Global.nativeStorage?t.Global.nativeStorage.clearMap():window.localStorage?localStorage.clear():window.document&&window.document.cookie||egret&&egret.localStorage.clear()}catch(i){}},e.isIOS=function(){return 0==t.Global.isH5&&"iOS"==egret.Capabilities.os?!0:!1},e.isAndroid=function(){return 0==t.Global.isH5&&"Android"==egret.Capabilities.os?!0:!1},e.isWindowsPC=function(){return 0==t.Global.isH5&&"Windows PC"==egret.Capabilities.os?!0:!1},e.restart=function(e,i){var n=this,s=n.isrebooting;if(n.isrebooting=!0,1==t.Global.isH5){var r=confirm(e);1==r||(n.isrebooting=!1)}else s||t.Global.dispatchEvent(t.ZqEvent.ON_RESTART,[e,i])},e.getDistance=function(t,e,i,n){if(Math.abs(t)>90||Math.abs(i)>90)return 0;if(Math.abs(e)>180||Math.abs(n)>180)return 0;var s=this.rad(t),r=this.rad(i),o=s-r,a=this.rad(e)-this.rad(n),h=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(s)*Math.cos(r)*Math.pow(Math.sin(a/2),2)));return h*=this.EARTH_RADIUS,h=Math.round(1e4*h)/1e4},e.rad=function(t){return t*Math.PI/180},e.cloneObj=function(t){var i;if("object"==typeof t){for(var n in t)i[n]="object"==typeof t[n]?e.cloneObj(t[n]):t[n];return i}},e.formatDate=function(t,e){var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return e},e.isrebooting=!1,e.EARTH_RADIUS=6378137,e}();t.Utils=e,__reflect(e.prototype,"xlLib.Utils")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(e){function i(i){void 0===i&&(i="assets");var n=e.call(this)||this;return n.w=0,n.h=0,n.assets=RES.getRes(i),n.w=t.Global.screenWidth,n.h=t.Global.screenHeight,n.initPanel(),n}return __extends(i,e),i.prototype.initPanel=function(){},i.prototype.initData=function(){},i.prototype.onEnter=function(){},i.prototype.onExit=function(){},i.prototype.closePanel=function(){t.PopUpMgr.removePopUp(this)},i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i}(egret.DisplayObjectContainer);t.BasePanel=e,__reflect(e.prototype,"xlLib.BasePanel")}(xlLib||(xlLib={}));var xlLib;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.init(),t}return __extends(i,e),i.prototype.init=function(){this.tipsBg=t.DisplayUtils.createBitmapByName("tipsBg");var e=new egret.Rectangle(190,10,2,2);this.tipsBg.scale9Grid=e,this.addChild(this.tipsBg),this._tips_tf=t.DisplayUtils.createTextLabel("",16777215,22),this.addChild(this._tips_tf)},i.prototype.setTipsText=function(t){this._tips_tf.text=t,this.tipsBg.width=this._tips_tf.width+80,this.width=this.tipsBg.width,this._tips_tf.x=this.width-this._tips_tf.width>>1,this._tips_tf.y=this.height-this._tips_tf.height>>1,this.tipsBg.x=this.width-this.tipsBg.width>>1},i}(egret.DisplayObjectContainer);t.FloatTips=e,__reflect(e.prototype,"xlLib.FloatTips")}(xlLib||(xlLib={}));var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"
},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e.isSocketSuc=!1,e.isResLoadEnd=!1,e}return __extends(e,t),e.prototype.start=function(){t.prototype.start.call(this),egret.lifecycle.onPause=function(){egret.ticker.pause(),xlLib.SoundMgr.instance.musicOpen=!1,xlLib.SoundMgr.instance.soundOpen=!1},egret.lifecycle.onResume=function(){egret.ticker.resume(),xlLib.SoundMgr.instance.musicOpen=!0,xlLib.SoundMgr.instance.soundOpen=!0};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.setMaxLoadingThread(4);var i=new xlLib.initOptions;i.debug=!1,xlLib.init(i),xlLib.UIMgr.instance.commonLoadUI=LodingView,xlLib.UIMgr.instance.tipsLoadUI=TipsLoading,xlLib.ReceiveMessageMgr.getInstance().initPushMessage()},e.prototype.onLodingComplete=function(t,e){this.loadingIcon||(this.loadingIcon=new egret.Bitmap,this.loadingIcon.texture=t,this.loadingIcon.x=xlLib.Global.screenWidth>>1,this.loadingIcon.y=xlLib.Global.screenHeight>>1,this.loadingIcon.anchorOffsetX=this.loadingIcon.width/2,this.loadingIcon.anchorOffsetY=this.loadingIcon.height/2),this.addChild(this.loadingIcon),this.starRotation(),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.starRotation=function(){egret.Tween.get(this.loadingIcon).to({rotation:this.loadingIcon.rotation+40},100).call(this.starRotation,this)},e.prototype.removeLodingIcon=function(){egret.Tween.removeTweens(this.loadingIcon),this.loadingIcon&&this.loadingIcon.parent&&this.loadingIcon.parent.removeChild(this.loadingIcon),this.loadingIcon=null,RES.destroyRes("resource/loading.png")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName},e.prototype.startCreateScene=function(){xlLib.Utils.isAndroid?xlLib.AndroidSDK.init():xlLib.Utils.isIOS&&xlLib.IosSDK.init(),this.removeLodingIcon(),xlLib.ResLoadMgr.instance.load("hall",this.onLoadComplete,this.onResourceLoadError,this,LodingView,!0)},e.prototype.onLoadComplete=function(t){this.isResLoadEnd=!0,this.isSocketSuc=!0,this.startEnterGame()},e.prototype.startEnterGame=function(){this.isSocketSuc&&this.isResLoadEnd&&(this.loginView=new LoginView,this.uiLayer.addChild(this.loginView))},e.prototype.resize=function(){this.loginView&&this.loginView.resize()},e}(xlLib.GameDoc);__reflect(Main.prototype,"Main");var SafeBoxView=function(t){function e(){var e=t.call(this)||this;return e.skinName="SafeBoxViewSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickCloBtn,this);var e=[{name:"存入",down_url:"deposit_down_btn_png",up_url:"deposit_up_btn_png"},{name:"取出",down_url:"out_down_btn_png",up_url:"out_up_btn_png"},{name:"自动存入",down_url:"autodeposit_down_btn_png",up_url:"autodeposit_up_btn_png"}];this._safebox_meun.dataProvider=new eui.ArrayCollection(e),this._safebox_meun.useVirtualLayout=!0,this._safebox_meun.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBarItemTap,this),this.toggle=new EToggleSwitch(this,"ts_off_bg_png","ts_on_bg_png","toggleswitch_btn_png"),this.toggle.x=350,this.toggle.y=65,this.group_autodeposit.addChild(this.toggle),this.toggle.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnToggleSwitch,this)},e.prototype.onBarItemTap=function(t){this._viewstack_safebox.selectedIndex=t.itemIndex,xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},e.prototype.OnToggleSwitch=function(t){this.toggle.getSelected()?console.log("关闭"):console.log("打开")},e.prototype.OnClickCloBtn=function(t){xlLib.SoundMgr.instance.playSound("Special_menu_mp3"),xlLib.PopUpMgr.removePopUp(e,1)},e.prototype._MaxBtnHid=function(){this.group_deposit.visible=!1,this.group_out.visible=!1,this.group_autodeposit.visible=!1},e.prototype._MinBtnHid=function(){},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.destroy=function(){this.btn_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClickCloBtn,this)},e}(eui.Component);__reflect(SafeBoxView.prototype,"SafeBoxView");