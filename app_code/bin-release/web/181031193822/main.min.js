var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},xlLib;!function(e){var t=function(t){function i(i){var n=t.call(this)||this;return n.uiLayer=new egret.DisplayObjectContainer,n.topLayer=new egret.DisplayObjectContainer,n.effectLayer=new egret.DisplayObjectContainer,n.mainUILayer=new egret.DisplayObjectContainer,n.maskLayer=new egret.DisplayObjectContainer,n.tipsLayer=new egret.DisplayObjectContainer,n.gameLayer=new egret.DisplayObjectContainer,e.SceneMgr.instance.init(n),n.initBaseLayers(),n.addEventListener(egret.Event.ADDED_TO_STAGE,n.start,n),n}return __extends(i,t),i.prototype.initBaseLayers=function(){this.addChild(this.uiLayer),this.addChild(this.topLayer),this.addChild(this.effectLayer),this.addChild(this.mainUILayer),this.addChild(this.maskLayer),this.addChild(this.tipsLayer),this.awake()},i.prototype.awake=function(){},i.prototype.start=function(e){void 0===e&&(e=null)},i.prototype.resize=function(){},i.prototype.destroy=function(){},i.prototype.reConnectFail=function(){},i.prototype.addGame=function(t){this.currentGame=t,null==this._bgMask&&(this._bgMask=new egret.Sprite,this._bgMask.graphics.clear(),this._bgMask.graphics.beginFill(0,0),this._bgMask.graphics.drawRect(0,0,e.Global.screenWidth,e.Global.screenHeight),this._bgMask.graphics.endFill(),this._bgMask.width=e.Global.screenWidth,this._bgMask.height=e.Global.screenHeight,this._bgMask.touchEnabled=!0,this._bgMask.visible=!0),this.gameLayer.addChild(this._bgMask),this.gameLayer.addChild(t),this.addChildAt(this.gameLayer,1)},i.prototype.removeGame=function(t){void 0===t&&(t=null);var i=e.SceneMgr.instance.currentScene.currentGame;i&&(i.parent&&i.parent.removeChild(i),i.destroy(),i=null),e.DisplayUtils.removeFromParent(this.gameLayer),this.gameLayer.removeChildren(),this.currentGame=null},i}(egret.DisplayObjectContainer);e.LobbyScene=t,__reflect(t.prototype,"xlLib.LobbyScene",["xlLib.IScene"])}(xlLib||(xlLib={}));var Const=function(){function e(){}return e}();Const.GAME_HOST="192.168.1.36",Const.GAME_PORT="9081",Const.httpUrl="http://192.168.1.36",__reflect(Const.prototype,"Const");var xlLib;!function(e){var t=function(){function e(){this._funcMap={}}return e.prototype.dispatch=function(e,t){void 0===t&&(t=null);var i=this._funcMap[e],n=0;if(null!=i){for(;n<i.length;)i[n]&&i[n][0].call(i[n][1],t),n++;return!0}},e.prototype.addListener=function(e,t,i){if(this._funcMap[e]){var n=this.getNoticeIndex(e,t,i);-1==n&&this._funcMap[e].push([t,i])}else this._funcMap[e]=[],this._funcMap[e].push([t,i])},e.prototype.hasListener=function(e){return this._funcMap[e]&&this._funcMap[e].length>0?!0:!1},e.prototype.removeListener=function(e,t,i){if(this._funcMap[e]){var n=this.getNoticeIndex(e,t,i);-1!=n&&this._funcMap[e].splice(n,1)}},e.prototype.getNoticeIndex=function(e,t,i){var n=-1;for(var r in this._funcMap[e])if(this._funcMap[e][r][0]==t&&this._funcMap[e][r][1]==i){n=parseInt(r);break}return n},e}();e.Dispatcher=t,__reflect(t.prototype,"xlLib.Dispatcher")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(t){function i(i){var n=t.call(this)||this;return n.uiLayer=new egret.DisplayObjectContainer,n.topLayer=new egret.DisplayObjectContainer,n.effectLayer=new egret.DisplayObjectContainer,n.mainUILayer=new egret.DisplayObjectContainer,n.maskLayer=new egret.DisplayObjectContainer,n.tipsLayer=new egret.DisplayObjectContainer,n.thmLoaded=!1,n.resLoaded=!1,i&&(n._gameInfo=i),e.SceneMgr.instance.init(n),n.initBaseLayers(),n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n}return __extends(i,t),i.prototype.initBaseLayers=function(){this.addChild(this.uiLayer),this.addChild(this.topLayer),this.addChild(this.effectLayer),this.addChild(this.mainUILayer),this.addChild(this.maskLayer),this.addChild(this.tipsLayer),this.awake()},i.prototype.awake=function(){},i.prototype.onAddToStage=function(e){void 0===e&&(e=null),this._gameInfo?this.preLoadAndInit():this.start(e)},i.prototype.preLoadAndInit=function(){if(this._gameInfo.gameTheme&&""!=this._gameInfo.gameTheme){var e=new eui.Theme(this._gameInfo.gameTheme,this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.loadedthm,this)}else this.thmLoaded=!0;RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.loadedCfg,this),RES.loadConfig(this._gameInfo.gameResConfigUrl,this._gameInfo.gameResRoot)},i.prototype.loadedthm=function(e){this.thmLoaded=!0,this.cfgComplete()},i.prototype.loadedCfg=function(e){this.resLoaded=!0,RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.loadedCfg,this),this.cfgComplete()},i.prototype.start=function(e){void 0===e&&(e=null)},i.prototype.cfgComplete=function(){1==this.thmLoaded&&1==this.resLoaded&&(this._gameInfo.preLoad&&""!=this._gameInfo.preLoad?e.ResLoadMgr.instance.load(this._gameInfo.preLoad,this.onResComplete,this.onResError,this,this._gameInfo.preloadUI):(this.preLoadEnd(),this.preLoadCallBack&&this.preLoadCallBack()))},i.prototype.onResComplete=function(e){e.groupName==this._gameInfo.preLoad&&(this.preLoadEnd(),this.preLoadCallBack&&this.preLoadCallBack())},i.prototype.preLoadEnd=function(){},i.prototype.resize=function(){},i.prototype.destroy=function(){},i.prototype.onResError=function(e){console.warn("Group:"+e.groupName+" has failed to load")},i.prototype.backToLobby=function(){"LobbyScene"==egret.getQualifiedSuperclassName(e.SceneMgr.instance.currentScene)&&e.SceneMgr.instance.currentScene.removeGame()},i}(egret.DisplayObjectContainer);e.GameDoc=t,__reflect(t.prototype,"xlLib.GameDoc",["xlLib.IGameDoc"])}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i.uiLayer=new egret.DisplayObjectContainer,i.topLayer=new egret.DisplayObjectContainer,i.effectLayer=new egret.DisplayObjectContainer,i.mainUILayer=new egret.DisplayObjectContainer,i.maskLayer=new egret.DisplayObjectContainer,i.tipsLayer=new egret.DisplayObjectContainer,i.initBaseLayers(),i.addEventListener(egret.Event.ADDED_TO_STAGE,i.start,i),i}return __extends(t,e),t.prototype.initBaseLayers=function(){this.addChild(this.uiLayer),this.addChild(this.effectLayer),this.addChild(this.topLayer),this.addChild(this.mainUILayer),this.addChild(this.maskLayer),this.addChild(this.tipsLayer),this.awake()},t.prototype.awake=function(){},t.prototype.start=function(e){void 0===e&&(e=null)},t.prototype.resize=function(){},t.prototype.destroy=function(){},t.prototype.reConnectFail=function(){},t}(egret.DisplayObjectContainer);e.GameScene=t,__reflect(t.prototype,"xlLib.GameScene",["xlLib.IScene"])}(xlLib||(xlLib={}));var AlertDialog=function(e){function t(){var t=e.call(this)||this;return t.skinName="AlertDialogSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.resize(),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},t.prototype.resize=function(){this.close_rect&&(this.close_rect.width=xlLib.Global.screenWidth,this.close_rect.height=xlLib.Global.screenHeight)},t.prototype.showAlertDialog=function(e,t,i){this.des_txt.text=e,this.cb=t,this.thisArg=i},t.prototype.onTouchHandler=function(e){e.target==this.qd_btn&&(this.cb&&this.cb.call(this.thisArg),xlLib.UIMgr.instance.hideUI(this))},t.prototype.destroy=function(){this.cb=null,this.thisArg=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)},t}(eui.Component);__reflect(AlertDialog.prototype,"AlertDialog");var ComBoxData=function(){function e(e){this.id=e.id,this.name=e.name,this.data=e.data}return e}();__reflect(ComBoxData.prototype,"ComBoxData");var GlobalData=function(){function e(){}return e.clearData=function(e){void 0===e&&(e=!1)},e}();GlobalData.md5PassWord="",GlobalData.isReConnect=!1,GlobalData.gameVersion="2018050905",GlobalData.isOutLogin=!1,GlobalData.hasNetwork=!0,GlobalData.recNum=0,__reflect(GlobalData.prototype,"GlobalData");var UserInfo=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"userType",{get:function(){return this.puserType},set:function(e){this.puserType=e},enumerable:!0,configurable:!0}),e}();__reflect(UserInfo.prototype,"UserInfo");var HttpAddress=function(){function e(){}return e}();HttpAddress.guestUrl=Const.httpUrl+"/api/guest",HttpAddress.sendmsgUrl=Const.httpUrl+"/api/sendmsg",HttpAddress.login=Const.httpUrl+"/api/login",__reflect(HttpAddress.prototype,"HttpAddress");var Lobby=function(e){function t(){var t=e.call(this)||this;return t.lobbyView=new LobbyView,t.uiLayer.addChild(t.lobbyView),t}return __extends(t,e),t.prototype.destroy=function(){this.lobbyView.destroy(),e.prototype.destroy.call(this)},t.prototype.resize=function(){this.lobbyView&&this.lobbyView.resize()},t}(xlLib.LobbyScene);__reflect(Lobby.prototype,"Lobby");var LobbyView=function(e){function t(){var t=e.call(this)||this;t.skinName="LobbyViewSkin",t._btn_wanfa.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnWanfa,t),t._btn_pk.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnPk,t),t._btn_mahjong.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnMahjong,t),t._btn_game.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnGame,t),t._set.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick2,t),t._service.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick2,t),t._information.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick2,t),t._generalize.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick2,t),t._safebox.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick2,t),t._challenge.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick2,t),t._welfare.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick2,t),t._shoppingmall.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick2,t),t._topup.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick2,t);var i=["bgMain_mp3"];return xlLib.SoundMgr.instance.playBgMusic(i),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.createGameBtn()},t.prototype.createGameBtn=function(){for(var e=["btn_niuniu_png","btn_jinhua_png","btn_baijiale_png"],t=["btn_niuniu_png","btn_jinhua_png","btn_baijiale_png"],i=["btn_28_png","btn_28_png","btn_28_png"],n=["btn_jinhua_png","btn_jinhua_png","btn_jinhua_png","btn_jinhua_png","btn_jinhua_png","btn_jinhua_png"],r=10,o=0;o<e.length;o++){var s=new eui.Image(e[o]);this._wanfa_btn_area.addChild(s);var a=o%3;s.x=70+340*a,0==a&&0!=o&&(r=265),s.y=r,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}for(var o=0;o<t.length;o++){var s=new eui.Image(t[o]);this._pk_btn_area.addChild(s);var a=o%3;s.x=70+340*a,0==a&&0!=o&&(r=265),s.y=r,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}for(var o=0;o<i.length;o++){var s=new eui.Image(i[o]);this._mahjong_btn_area.addChild(s);var a=o%3;s.x=70+340*a,0==a&&0!=o&&(r=265),s.y=r,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}for(var o=0;o<n.length;o++){var s=new eui.Image(n[o]);this._game_btn_area.addChild(s);var a=o%3;s.x=70+340*a,0==a&&0!=o&&(r=265),s.y=r,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}this._head_label.text=UserInfo.getInstance().username,this._coin_label.text=""+UserInfo.getInstance().goldcoins},t.prototype.onClick=function(e){EffectUtils.playButtonEffect(e.target,null),this.playClickSound()},t.prototype.onClick2=function(e){this.playClickSound()},t.prototype.onBtnWanfa=function(e){this._btnHide(),this._dis_wanfa.visible=!0,this._group_wanfa.visible=!0},t.prototype.onBtnPk=function(e){this._btnHide(),this._dis_pk.visible=!0,this._group_pk.visible=!0},t.prototype.onBtnMahjong=function(e){this._btnHide(),this._dis_mahjong.visible=!0,this._group_mahjong.visible=!0},t.prototype.onBtnGame=function(e){this._btnHide(),this._dis_game.visible=!0,this._group_game.visible=!0},t.prototype._btnHide=function(){this._dis_wanfa.visible=!1,this._dis_pk.visible=!1,this._dis_mahjong.visible=!1,this._dis_game.visible=!1,this._group_wanfa.visible=!1,this._group_pk.visible=!1,this._group_mahjong.visible=!1,this._group_game.visible=!1,this.playClickSound()},t.prototype.onTouchHandler=function(e){},t.prototype.resize=function(){this.bgImg&&(this.bgImg.width=xlLib.Global.screenWidth,this.bgImg.height=xlLib.Global.screenHeight)},t.prototype.onSocketClose=function(e){},t.prototype.onNotify=function(e){},t.prototype.destroy=function(){EventUtil.removeEventListener(EventConst.ON_SOCKET_CLOSE,this.onSocketClose,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),egret.Tween.removeTweens(this)},t.prototype.playClickSound=function(){xlLib.SoundMgr.instance.playSound("Special_menu_mp3")},t}(eui.Component);__reflect(LobbyView.prototype,"LobbyView");var LodingView=function(e){function t(){var t=e.call(this)||this;return t.skinName="LodingViewSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.resize()},t.prototype.resize=function(){this.bg_img&&(this.bg_img.width=xlLib.Global.screenWidth,this.bg_img.height=xlLib.Global.screenHeight)},t.prototype.setProgress=function(e,t,i,n,r){if(void 0===r&&(r=!1),t&&0!=t){var o=Math.floor(598*(e/t));this.load_rec.width=o,this.load_img.mask=this.load_rec}},t}(eui.Component);__reflect(LodingView.prototype,"LodingView");var LoginView=function(e){function t(){var t=e.call(this)||this;return t.bjlSubscription=!1,t.lfSubscription=!1,t.xjSubscription=!1,t.nnSubscription=!0,t.skinName="LoginViewSkin",t.once(egret.Event.REMOVED_FROM_STAGE,t.destroy,t),t.resize(),t}return __extends(t,e),t.prototype.resize=function(){this.bgImg&&(this.bgImg.width=xlLib.Global.screenWidth,this.bgImg.height=xlLib.Global.screenHeight)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.bjlSubscription=!1,this.lfSubscription=!1,this._btn_visitor.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onVisitorLogin,this),this._btn_account.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onAccountLogin,this),this._btn_continue.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onContinueLogin,this),this._btn_register.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onRegister,this),this._btn_login.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onLogin,this),this._btn_verify.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetCode,this),EventUtil.addEventListener(EventConst.ON_SOCKET_SUC,this.onSocketSuc,this),EventUtil.addEventListener(EventConst.ON_SOCKET_FAIL,this.onSocketFail,this)},t.prototype._onVisitorLogin=function(e){this._group_btn_0.visible=!1,this._group_btn_1.visible=!0},t.prototype._onAccountLogin=function(e){this._group_btn_0.visible=!1,this._group_btn_2.visible=!0},t.prototype._onContinueLogin=function(e){xlLib.UIMgr.instance.showLoading(TipsLoading),xlLib.HttpManager.getInstance().send(HttpAddress.guestUrl,null,null,this.onLoginSucess,this.onLoginFail)},t.prototype._onRegister=function(e){},t.prototype.onGetCode=function(e){xlLib.HttpManager.getInstance().send(HttpAddress.sendmsgUrl,{mobile:this._phone_txt.text},null,function(e){xlLib.TipsUtils.showFloatWordTips("发送验证码成功！")},function(e){xlLib.TipsUtils.showFloatWordTips("发送验证码失败！")})},t.prototype._onLogin=function(e){return""==this._phone_txt.text||""==this._verify_code_txt.text?void xlLib.TipsUtils.showFloatWordTips("手机号或验证码不能为空！"):GlobalData.hasNetwork?(xlLib.UIMgr.instance.showLoading(TipsLoading),void xlLib.HttpManager.getInstance().send(HttpAddress.login,{mobile:this._phone_txt.text,verifyCode:this._verify_code_txt.text},null,this.onLoginSucess,this.onLoginFail)):void xlLib.TipsUtils.showFloatWordTips("连接失败 请检查网络环境！")},t.prototype.onLoginFail=function(e){xlLib.UIMgr.instance.hideLoading(TipsLoading),xlLib.TipsUtils.showFloatWordTips("登录失败 请检查网络环境！")},t.prototype.onLoginSucess=function(e){var t=e.data;UserInfo.getInstance().uid=t.id,UserInfo.getInstance().username=t.username,UserInfo.getInstance().goldcoins=t.goldcoins,xlLib.WebSocketMgr.getInstance().connect(Const.GAME_HOST,Const.GAME_PORT,t.id)},t.prototype.onSocketFail=function(e){xlLib.UIMgr.instance.hideLoading(TipsLoading),xlLib.TipsUtils.showFloatWordTips("登录失败 请检查网络环境！")},t.prototype.onSocketSuc=function(e){xlLib.UIMgr.instance.hideLoading(TipsLoading),xlLib.SceneMgr.instance.changeScene(Lobby),xlLib.TipsUtils.showFloatWordTips("登录成功！")},t.prototype.initGameData=function(e){},t.prototype.initPlayerData=function(e){UserInfo.getInstance().uid=e.uid,UserInfo.getInstance().userType=e.userType},t.prototype.destroy=function(){this._btn_visitor.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onVisitorLogin,this),this._btn_account.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onAccountLogin,this),this._btn_continue.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onContinueLogin,this),this._btn_register.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onRegister,this),this._btn_login.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onLogin,this),this._btn_verify.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetCode,this),EventUtil.removeEventListener(EventConst.ON_SOCKET_SUC,this.onSocketSuc,this),EventUtil.removeEventListener(EventConst.ON_SOCKET_FAIL,this.onSocketFail,this)},t}(eui.Component);__reflect(LoginView.prototype,"LoginView");var NNCardView=function(e){function t(){var t=e.call(this)||this;return t.skinName="NNCardViewSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},t.prototype.destroy=function(){},t}(eui.Component);__reflect(NNCardView.prototype,"NNCardView");var NNGameItem=function(e){function t(){var t=e.call(this)||this;return t.currLen=-1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.ItemRenderer);__reflect(NNGameItem.prototype,"NNGameItem");var NNGameList=function(e){function t(){var t=e.call(this)||this;return t.dataSource=[],t.skinName="NNGameListSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData(),this.arrayCollection=new eui.ArrayCollection(this.dataSource),this.list.dataProvider=this.arrayCollection,this.list.itemRenderer=NNGameItem,this.scroller.viewport=this.list,this.scroller.bounces=!1,this.initEventListener()},t.prototype.initEventListener=function(){this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},t.prototype.onGameStatusChange=function(e){},t.prototype.initData=function(){this.dataSource=[]},t.prototype.freshData=function(){var e=this.dataSource[0];e.isNew=!1,this.arrayCollection.itemUpdated(e)},t.prototype.listAutoScroll=function(e){this.scroller.validateNow();var t=this.scroller.viewport.contentWidth-this.scroller.viewport.width;t>0&&(this.scroller.viewport.scrollH=t)},t.prototype.newData=function(){var e=this.dataSource[0];e.isNew=!0,this.arrayCollection.itemUpdated(e)},t.prototype.destroy=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},t}(eui.Component);__reflect(NNGameList.prototype,"NNGameList");var NNGameView=function(e){function t(t){void 0===t&&(t=!1);var i=e.call(this)||this;return i.view=new NNView(t),i.uiLayer.addChild(i.view),i}return __extends(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.resize=function(){this.view&&this.view.resize()},t}(xlLib.GameScene);__reflect(NNGameView.prototype,"NNGameView");var NNListView=function(e){function t(){var t=e.call(this)||this;return t.dataSource=[],t.skinName="NNListViewSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initEventListener(),this.init(),this.resize()},t.prototype.resize=function(){this.bgImg&&(this.bgImg.width=xlLib.Global.screenWidth,this.bgImg.height=xlLib.Global.screenHeight),this.scroller&&(this.scroller.height=xlLib.Global.screenHeight-72)},t.prototype.initEventListener=function(){this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)},t.prototype.init=function(){this.itemArrayCollection=new eui.ArrayCollection(this.dataSource),this.table_list.dataProvider=this.itemArrayCollection,this.scroller.viewport=this.table_list},t.prototype.onTouchHandler=function(e){e.target==this.rt_btn&&xlLib.SceneMgr.instance.changeScene(Lobby)},t.prototype.destroy=function(){xlLib.UIMgr.instance.hideLoading(TipsLoading),this.table_list.removeChildren(),this.scroller.stopAnimation(),this.scroller.removeChildren(),this.table_list=null,this.dataSource=null,this.itemArrayCollection=null,this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)},t}(eui.Component);__reflect(NNListView.prototype,"NNListView");var NNScene=function(e){function t(){var t=e.call(this)||this;return t.nnlistView=new NNListView,t.uiLayer.addChild(t.nnlistView),t}return __extends(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.resize=function(){this.nnlistView&&this.nnlistView.resize()},t}(xlLib.GameScene);__reflect(NNScene.prototype,"NNScene");var NNView=function(e){function t(t){void 0===t&&(t=!1);var i=e.call(this)||this;return i.skinName="NNViewSkin",i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.setScreenSize=function(e){egret.MainContext.instance.stage.scaleMode=e,xlLib.ScreenUtils.onResizeNotify()},t.prototype.resize=function(){this.bgImg&&(this.bgImg.width=xlLib.Global.screenWidth,this.bgImg.height=xlLib.Global.screenHeight)},t.prototype.destroy=function(){this.clearTime(),xlLib.SoundMgr.instance.stopSounds()},t.prototype.clearTime=function(){},t.prototype.startCountDown=function(e){},t}(eui.Component);__reflect(NNView.prototype,"NNView");var EventConst=function(){function e(){}return e}();EventConst.ON_SOCKET_SUC="onSocketSuc",EventConst.ON_SOCKET_FAIL="onSocketFail",EventConst.ON_SOCKET_CLOSE="onSocketClose",__reflect(EventConst.prototype,"EventConst");var EventUtil=function(){function e(){}return e.Event=function(e,t,i,n){return void 0===t&&(t=null),void 0===i&&(i=!1),void 0===n&&(n=!1),new xlLib.ZqEvent(e,t)},e.dispatchEvent=function(e,t,i,n){void 0===t&&(t=null),void 0===i&&(i=!1),void 0===n&&(n=!1);var r=new xlLib.ZqEvent(e,t,i,n);xlLib.ZqListener.getInstance().dispatchEvent(r)},e.hasEventListener=function(e){return xlLib.ZqListener.getInstance().hasEventListener(e)},e.addEventListener=function(e,t,i,n,r){void 0===n&&(n=!1),void 0===r&&(r=0),xlLib.ZqListener.getInstance().addEventListener(e,t,i,n,r)},e.removeEventListener=function(e,t,i,n){void 0===n&&(n=!1),xlLib.ZqListener.getInstance().removeEventListener(e,t,i,n)},e}();__reflect(EventUtil.prototype,"EventUtil");var GlobalFunction=function(){function e(){}return e.tweenHideView=function(e,t,i,n,r,o){void 0===t&&(t=0),void 0===i&&(i=1e3),e.visible=!0,e.alpha=1,egret.Tween.get(e).wait(t).to({alpha:0},i,egret.Ease.circOut).call(function(){e.visible=!1,e.alpha=1,n&&n.call(r,o)})},e.tweenShowView=function(e,t,i,n,r,o){void 0===t&&(t=0),void 0===i&&(i=1e3),e.visible=!1,e.alpha=0,egret.Tween.get(e).wait(t).to({alpha:1},i,egret.Ease.circOut).call(function(){e.visible=!0,e.alpha=1,n&&n.call(r,o)})},e.getDateString=function(e){var t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();return t},e}();__reflect(GlobalFunction.prototype,"GlobalFunction");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?n(r):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var CommonConsts=function(){function e(){}return e}();CommonConsts.LOBBY_LASTGAME="lobby_lastGame",__reflect(CommonConsts.prototype,"CommonConsts");var ComBoxItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ComBoxItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){this.des_txt.text=this.data.name},t}(eui.ItemRenderer);__reflect(ComBoxItem.prototype,"ComBoxItem");var xlLib;!function(e){var t=function(){function t(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.CLASS_NAME="ZqEvent",this.type=e,this._obj=t}return t.prototype.clone=function(e){return new t(this.type,e?e:this._obj)},t.prototype.toString=function(){e.Console.log(this.CLASS_NAME,"type","bubbles","cancelable")},Object.defineProperty(t.prototype,"param",{get:function(){return this._obj},enumerable:!0,configurable:!0}),t}();t.CHAT_ROOM="chat_room",t.CHAT_PRIVATE="chat_private",t.CHAT_SYSTEM="chat_system",t.CHAT_IMPORTANT="chat_important",t.EVENT_L2G_NOTICE="event_l2g_notice",t.CHAT_GM="chat_gm",t.GM_BEFORE="gm_before",t.GM_END="gm_end",t.CHAT_HORN="chat_horn",t.USER_INFO="user_info",t.UPDATE_USER_INFO="update_user_info",t.CHECK_VERSION_UPDATE="check_version_update",t.COMMON_MODEL="common_model",t.EVENT_L2G="event_l2g",t.EVENT_G2L="event_g2l",t.EVENT_ACTIVE_SOCKET_CACHE_OK="on_active_socket_cache_ok",t.EVENT_SERVER_SHUTDOWN="on_server_shutdown",t.EVENT_SERVER_DEBUG_LEVEL="on_server_debug_level",t.GM_INFO="gm_info",t.KICK_OUT="kick_out",t.ON_RECONNEC="on_reconnect",t.ON_SERVER_SHUTDOWN="on_server_shutdown",t.ON_GETZONEINFO="on_get_zoneinfo",t.ON_RESTART="on_restart",t.RECONNECT_FAIL="reconnect_fail",t.NET_ERRER="net_error",t.SHARE="share",t.TASK_EVENT="task_event",t.ONLINE_NUM="online_num",t.HIDE_SLIP_GAME_GUIDE="hide_slip_game_guide",t.NATIVE_TO_EGERET="native_to_egret",e.ZqEvent=t,__reflect(t.prototype,"xlLib.ZqEvent")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){this.CLASS_NAME="ZqListener",this.isInit=!1,this.isInit,null==this._dispatcher&&(this._dispatcher=new e.Dispatcher,this.isInit=!0)}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.addEventListener=function(e,t,i,n,r){void 0===n&&(n=!1),void 0===r&&(r=0),this._dispatcher.addListener(e,t,i)},t.prototype.hasEventListener=function(e){return this._dispatcher.hasListener(e)},t.prototype.removeEventListener=function(e,t,i,n){void 0===n&&(n=!1),this._dispatcher.removeListener(e,t,i)},t.prototype.dispatchEvent=function(e){return this._dispatcher.dispatch(e.type,e)},t.prototype.toString=function(){return this._dispatcher.toString()},t}();e.ZqListener=t,__reflect(t.prototype,"xlLib.ZqListener")}(xlLib||(xlLib={}));var xlLib;!function(e){function t(t){t instanceof Object&&(e.Console.init(t.debug,t.logLevel),e.ScreenUtils&&e.ScreenUtils.init(t.scaleMode),n.lobbyMode=t.lobbyMode,t.nativeStorage&&(n.nativeStorage=t.nativeStorage),t.platId&&(n.platId=t.platId),t.appId&&(n.appId=t.appId))}var i=function(){function e(){this.logLevel=7,this.lobbyMode=!1,this.scaleMode="exactFit"}return e}();e.initOptions=i,__reflect(i.prototype,"xlLib.initOptions"),e.init=t;var n=function(){function t(){}return t.PhoneCallStatus=function(t){"callDisconnected"==t.data.callState&&egret.Capabilities.supportVersion<"3.2.6"&&setTimeout(function(){e.ZQGameSdk&&e.ZQGameSdk.speakerActive()},4e3)},t.Event=function(t,i,n,r){return void 0===i&&(i=null),void 0===n&&(n=!1),void 0===r&&(r=!1),new e.ZqEvent(t,i)},t.dispatchEvent=function(t,i,n,r){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=new e.ZqEvent(t,i,n,r);e.ZqListener.getInstance().dispatchEvent(o)},t.hasEventListener=function(t){return e.ZqListener.getInstance().hasEventListener(t)},t.addEventListener=function(t,i,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0),e.ZqListener.getInstance().addEventListener(t,i,n,r,o)},t.removeEventListener=function(t,i,n,r){void 0===r&&(r=!1),e.ZqListener.getInstance().removeEventListener(t,i,n,r)},Object.defineProperty(t,"lobbyMode",{get:function(){return this._lobbyMode},set:function(e){this._lobbyMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"resVersion",{get:function(){var t="";if(e.Global.isH5){var i=document.querySelector('meta[name="res-version"]');null!=i&&(t=i.getAttribute("content")),null!=t&&""!=t&&(t="_"+t)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"thmVersion",{get:function(){var t="";if(e.Global.isH5){var i=document.querySelector('meta[name="thm-version"]');null!=i&&(t=i.getAttribute("content")),null!=t&&""!=t&&(t="_"+t)}return t},enumerable:!0,configurable:!0}),t.setPlatInfo=function(t,i,n){e.Utils.setLocalStorage(n+"|"+i+"|platToken",t)},t.setPlatToken=function(i,n,r){t.platId=n,t.gameId=r,e.Utils.setLocalStorage(r+"|"+n+"|platToken",i)},t.openAgent=function(t,i,n,r,o){var s=t+"?code="+i+"&platid="+n+"&gameid="+r;e.ZQGameSdk&&e.ZQGameSdk.openWeb(s,o)},t.isIos=function(){return"ios"==this.sys_type?!0:!1},t}();n.isActive=!0,n.debugLevel=0,n.version="v1.1.1_161128235600",n.designWidth=1280,n.designHeight=720,n.isRestarting=!1,n.gameId=0,n.lobbyGameId=0,n.is_sandbox=0,n.sys_type="",n.mtype="unknown",n.appId="wx0e52b1eba8f9fb14",n.thirdPlatDir="thirdPlatDir/",n.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},n.isTestModul=!1,n.isInGame=!1,n.bundleId="",n._lobbyMode=!1,n.isCacheToken=!0,n.logUrl="http://server.login.bwgame.com.cn:8020/logger/clientlog",n.platId=0,n.zoneId=0,e.Global=n,__reflect(n.prototype,"xlLib.Global")}(xlLib||(xlLib={}));var global,testh5=function(){var e;e=this.navigator?!0:!1;try{global&&(e=!1)}catch(t){}return e};xlLib.Global.isH5=testh5();var xlLib;!function(e){var t=function(){function e(){this.showBack=!0,this.defaultOrientation="auto",this.hasTestChips=!1}return e}();e.IGameConfig=t,__reflect(t.prototype,"xlLib.IGameConfig")}(xlLib||(xlLib={}));var ComBox=function(e){function t(t){void 0===t&&(t=16777215);var i=e.call(this)||this;return i.skinName="ComBoxSkin",i.tab_txt.textColor=t,i.initEventListener(),i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.isShowMenu(!1)},t.prototype.initEventListener=function(){egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchStageHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.table_list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClickHandler,this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},t.prototype.isShowMenu=function(e){this.isShow=e,this.scroller.visible=e,this.table_list.visible=e,this.bgImg.visible=e},t.prototype.onTouchStageHandler=function(e){e.target!=this.sel_btn&&e.target!=this.combox_grp&&e.target!=this.scroller&&e.target!=this.table_list&&this.isShowMenu(!1)},t.prototype.itemClickHandler=function(e){var t=e.target;t&&(this.cb&&this.cb.call(this.thisArg,t.data),t.data&&(this.tab_txt.text=t.data.name),this.isShowMenu(!1))},t.prototype.onTouchHandler=function(e){(e.target==this.sel_btn||e.target==this.combox_grp)&&this.isShowMenu(!this.isShow)},t.prototype.setComBoxData=function(e,t,i){this.cb=t,this.thisArg=i,this.arrayCollection=new eui.ArrayCollection(e),this.table_list.dataProvider=this.arrayCollection,this.table_list.itemRenderer=ComBoxItem,this.scroller.viewport=this.table_list,this.tab_txt.text=e[0].name},t.prototype.destroy=function(){this.cb=null,this.thisArg=null,this.scroller.stopAnimation(),this.table_list.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.itemClickHandler,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchStageHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)
},t}(eui.Component);__reflect(ComBox.prototype,"ComBox");var xlLib;!function(e){var t=function(){function e(){}return e}();e.IUserInfo=t,__reflect(t.prototype,"xlLib.IUserInfo")}(xlLib||(xlLib={}));var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t.isSocketSuc=!1,t.isResLoadEnd=!1,t}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.setMaxLoadingThread(4);var i=new xlLib.initOptions;i.debug=!1,xlLib.init(i),xlLib.UIMgr.instance.commonLoadUI=LodingView,xlLib.UIMgr.instance.tipsLoadUI=TipsLoading,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName},t.prototype.startCreateScene=function(){xlLib.Utils.isAndroid?xlLib.AndroidSDK.init():xlLib.Utils.isIOS&&xlLib.IosSDK.init(),xlLib.ResLoadMgr.instance.load("game",this.onLoadComplete,this.onResourceLoadError,this,LodingView,!0)},t.prototype.onLoadComplete=function(e){this.isResLoadEnd=!0,this.isSocketSuc=!0,this.startEnterGame()},t.prototype.startEnterGame=function(){this.isSocketSuc&&this.isResLoadEnd&&(this.loginView=new LoginView,this.uiLayer.addChild(this.loginView))},t.prototype.resize=function(){this.loginView&&this.loginView.resize()},t}(xlLib.GameDoc);__reflect(Main.prototype,"Main");var xlLib;!function(e){var t=function(){function t(){this._models={}}return Object.defineProperty(t,"Instance",{get:function(){return null==this._self&&(this._self=new t),this._self},enumerable:!0,configurable:!0}),t.prototype.addEvents=function(){},t.prototype.registerCommonModel=function(t,i,n){null==this._models[t]?(this._models[t]=i,this._models["loadName_"+t]=n):e.Console.warn("registerCommonModel:公用模块只能注册一次")},t.prototype.openCommonModel=function(t,i,n,r,o){function s(){r?(a=new l._models[t](n),r.call(o,a)):0==i?(a=new l._models[t](n),e.PopUpMgr.addPopUp(a,null,!0,!0)):e.UIMgr.instance.showUI(l._models[t],n)}void 0===i&&(i=0);var a;if(this._models[t]){var l=this;return this._models["loadName_"+t]?e.ResLoadMgr.instance.load(this._models["loadName_"+t],s,function(){e.Console.error("加载资源组失败:loadName_"+t)},null,e.UIMgr.instance.tipsLoadUI,!0,!0):s(),a}},t.prototype.showCommonUI=function(t,i){return this._models[t]?e.UIMgr.instance.showUI(this._models[t],i):void 0},t.prototype.getCommonUI=function(e,t){if(this._models[e]){var i=new this._models[e](t);return i}},t}();t._self=null,e.CommonModelMgr=t,__reflect(t.prototype,"xlLib.CommonModelMgr")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){this.loadList={}}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.send=function(t,i,n,r,o,s,a){void 0===a&&(a=!0),i=i||{},n=n||egret.URLRequestMethod.GET;var l=this.dataToString(i),c=t+"?"+this.dataToString(i);if(!this.loadList[c]){var h=new egret.URLLoader;h.dataFormat=egret.URLLoaderDataFormat.TEXT;var u=new egret.URLRequest(t);u.method=n;var d=new egret.URLVariables(l);d.variables=i,u.data=d,h.addEventListener(egret.Event.COMPLETE,this.onComplete,this),h.addEventListener(egret.HTTPStatusEvent.HTTP_STATUS,this.onHTTPStatus,this),h.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this);var g={urlLoader:h,sucessFunc:r,errorFunc:o,thisObject:s,isJson:!0,showError:a};this.loadList[c]=g,h.load(u),e.Console.log("发送http请求："+c)}},t.prototype.cancel=function(e,t){t=t||{};var i=e+this.dataToString(t);if(this.loadList[i]){this.loadList[i].urlLoader;delete this.loadList[i]}},t.prototype.getKeyByCallBack=function(e){for(var t in this.loadList){var i=this.loadList[t];if(i.sucessFunc==e||i.errorFunc==e)return t}return null},t.prototype.cancelAll=function(){this.loadList={}},t.prototype.onComplete=function(t){var i=t.currentTarget;for(var n in this.loadList)if(this.loadList[n].urlLoader==i){var r=this.loadList[n].sucessFunc,o=this.loadList[n].showError,s=JSON.parse(i.data);e.Console.log("收到http数据："+i.data),o?200==parseInt(s.code)?r.call(this.loadList[n].thisObject,this.loadList[n].isJson?s:i.data):e.TipsUtils.showFloatWordTips(s.message):r.call(this.loadList[n].thisObject,this.loadList[n].isJson?s:i.data),delete this.loadList[n]}},t.prototype.onIOError=function(e){this.loadError(e.currentTarget,e)},t.prototype.onHTTPStatus=function(e){200!=e.status&&this.loadError(e.currentTarget,e.status)},t.prototype.loadError=function(e,t){for(var i in this.loadList)if(this.loadList[i].urlLoader==e){var n=this.loadList[i].errorFunc;n&&n.call(this.loadList[i].thisObject,t),delete this.loadList[i]}},t.prototype.dataToString=function(e){var t="";for(var i in e)t+=encodeURI(i)+"="+encodeURI(e[i])+"&";return t=t.slice(0,t.length-1)},t}();e.HttpManager=t,__reflect(t.prototype,"xlLib.HttpManager")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){}return t.init=function(t){t?this._container=t:e.SceneMgr.instance.currentScene.topLayer?this._container=e.SceneMgr.instance.currentScene.topLayer:this._container=e.SceneMgr.instance.currentScene},t.addPopUp=function(t,n,r,o,s,a,l,c,h){void 0===n&&(n=null),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=0),void 0===l&&(l=0),void 0===c&&(c=0);var u=e.Global.screenWidth,d=e.Global.screenHeight;t.prototype&&(t=new t(h));var g=egret.getQualifiedClassName(t);null==this.popupDic[g]&&(this.popupDic[g]=[]),this.popupDic[g].push(t),(null==this._container||null==this._container.parent)&&e.SceneMgr.instance.currentScene&&(e.SceneMgr.instance.currentScene.topLayer?this._container=e.SceneMgr.instance.currentScene.topLayer:this._container=e.SceneMgr.instance.currentScene),1!=e.SceneMgr.instance.currentScene.scaleX&&(u=e.Global.designHeight/e.SceneMgr.instance.currentScene.scaleX,d=e.Global.designWidth/e.SceneMgr.instance.currentScene.scaleY);var p=null==n?this._container:n;if(!p.contains(t)){if(o){var f=egret.getQualifiedClassName(t)+t.hashCode;this.darkSpriteDic[f]=e.DisplayUtils.createMask(.7,u,d),p.contains(this.darkSpriteDic[f])||p.addChild(this.darkSpriteDic[f]),this.darkSpriteDic[f].touchEnabled=!0,egret.Tween.get(this.darkSpriteDic[f]).to({alpha:1},150),this.darkSpriteDic[f].visible=!0}if(p&&p.stage){s?p.addChildAt(t,s):p.addChild(t),this.curPanel=t,0!=l&&p?(t.x=u/2-l/2,t.y=d/2-c/2):0==t.anchorOffsetX&&(l=t.width,c=t.height);var _=u/2-l/2,v=d/2-c/2;switch(a){case i.NOMAL:r&&(t.x=_,t.y=v);break;case i.CENTER:r&&(t.x=_,t.y=v),t.alpha=0,t.scaleX=.5,t.scaleY=.5,t.x=t.x+l/4,t.y=t.y+c/4,egret.Tween.get(t).to({alpha:1,scaleX:1,scaleY:1,x:t.x-l/4,y:t.y-c/4},300,egret.Ease.backOut);break;case i.CENTER_S:t.alpha=0,t.scaleX=.5,t.scaleY=.5,t.x=t.x+l/4,t.y=t.y+c/4,egret.Tween.get(t).to({alpha:1,scaleX:1,scaleY:1,x:t.x-l/4,y:t.y-c/4},600,egret.Ease.elasticOut);break;case i.LEFT:r?(t.x=-l,egret.Tween.get(t).to({x:_},500,egret.Ease.cubicOut)):(t.x=-l,egret.Tween.get(t).to({x:0},500,egret.Ease.cubicOut));break;case i.RIGHT:r?(t.x=l,egret.Tween.get(t).to({x:_},500,egret.Ease.cubicOut)):(t.x=l,egret.Tween.get(t).to({x:0},500,egret.Ease.cubicOut));break;case i.TOP:r?(t.y=-c,egret.Tween.get(t).to({y:v},500,egret.Ease.cubicOut)):(t.y=-c,egret.Tween.get(t).to({y:0},500,egret.Ease.cubicOut));break;case i.BOTTOM:r?(t.y=p.stage.stageHeight,egret.Tween.get(t).to({y:v},500,egret.Ease.cubicOut)):(t.y=c,egret.Tween.get(t).to({y:0},500,egret.Ease.cubicOut))}return t}}},t.removePopUp=function(e,t){void 0===t&&(t=0);var i=!0;i=e.prototype?!1:!0;var n=egret.getQualifiedClassName(e);if(this.popupDic[n])if(i)for(var r=0;r<this.popupDic[n].length;r++)this.popupDic[n][r]==e&&(this.removePanel(this.popupDic[n][r],t),this.popupDic[n].splice(r,1));else for(var r=0;r<this.popupDic[n].length;r++)this.removePanel(this.popupDic[n][r],t),this.popupDic[n].shift()},t.clearPopus=function(){if(this.popupDic)for(var e in this.popupDic)for(var t=0;t<this.popupDic[e].length;t++)this.removePanel(this.popupDic[e][t]),this.popupDic[e].shift()},t.removePanel=function(t,n){void 0===n&&(n=0);var r=egret.getQualifiedClassName(t)+t.hashCode,o=function(){this.darkSpriteDic[r]&&this.darkSpriteDic[r].parent&&this.darkSpriteDic[r].parent.removeChild(this.darkSpriteDic[r]),this.darkSpriteDic[r]=null,delete this.darkSpriteDic[r]};this.darkSpriteDic[r]&&egret.Tween.get(this.darkSpriteDic[r]).to({alpha:0},100).call(o,this);var s=600;switch(n){case i.NOMAL:s=0;break;case i.CENTER:egret.Tween.get(t).to({alpha:0,scaleX:0,scaleY:0,x:t.x+t.width/2,y:t.y+t.height/2},300);break;case i.CENTER_S:egret.Tween.get(t).to({alpha:0,scaleX:0,scaleY:0,x:t.x+t.width/2,y:t.y+t.height/2},600,egret.Ease.elasticOut);break;case i.LEFT:egret.Tween.get(t).to({x:-t.width},600,egret.Ease.cubicOut);break;case i.RIGHT:egret.Tween.get(t).to({x:t.width},600,egret.Ease.cubicOut);break;case i.TOP:egret.Tween.get(t).to({y:-t.height},600,egret.Ease.cubicOut);break;case i.BOTTOM:egret.Tween.get(t).to({y:t.height},600,egret.Ease.cubicOut)}egret.setTimeout(function(){e.DisplayUtils.removeFromParent(t)},this,s)},t.hasPopup=function(t){var i=!0,n=egret.getQualifiedClassName(t);if(i="object"==typeof t&&t.prototype?!0:!1){if(!t.stage)return!1;for(var r=0;r<this.popupDic[n].length;r++)if(this.popupDic[n][r]==t)return!0}else if(this.popupDic[n]&&this.popupDic[n].length>0)for(var r=0;r<this.popupDic[n].length;r++){if(this.popupDic[n][r].stage)return!0;e.DisplayUtils.removeFromParent(this.popupDic[n][r])}return!1},t.resize=function(){if(this.popupDic)for(var e in this.popupDic){var t=this.popupDic[e];t&&t.parent&&t.resize&&t.resize()}},t}();t.darkSpriteDic={},t.popupDic=new Object,e.PopUpMgr=t,__reflect(t.prototype,"xlLib.PopUpMgr");var i;!function(e){e[e.NOMAL=0]="NOMAL",e[e.CENTER=1]="CENTER",e[e.CENTER_S=2]="CENTER_S",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT",e[e.TOP=5]="TOP",e[e.BOTTOM=6]="BOTTOM"}(i=e.PopUpEffect||(e.PopUpEffect={}))}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function e(){}return e.prototype.initPushMessage=function(){},e.prototype.onMessage=function(e){},e}();e.ReceiveMessageMgr=t,__reflect(t.prototype,"xlLib.ReceiveMessageMgr")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._autoHide=!0,e._curLoadingId=0,e._currentLoadIndex=0,e}return __extends(i,t),Object.defineProperty(i,"instance",{get:function(){return null==this._self&&(this._self=new i,this._self.initLoadingUI()),this._self},enumerable:!0,configurable:!0}),i.prototype.initLoadingUI=function(){this._loadingMap={},this._thisObj={},this._loadSucc={},this._loadError={}},i.prototype.load=function(t,i,n,r,o,s,a,l){void 0===s&&(s=!0),void 0===a&&(a=!0),a&&null!=a||(a=!0),o?(this._loadingClass=o,a?e.UIMgr.instance.showProcessBar(o):e.UIMgr.instance.showLoadingTimeout(o)):this._loadingClass=e.UIMgr.instance.commonLoadUI,l&&e.ResUtils.setMustRes(l),i&&(this._loadSucc[t]=i),n&&(this._loadError[t]=n),r&&(this._thisObj[t]=r),this._autoHide=s,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onxlLibResLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onxlLibResLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onxlLibResProgress,this),RES.loadGroup(t)},i.prototype.loadArr=function(e,t,i,n,r){this._currentLoadArr&&this._currentLoadArr.length>0?this._currentLoadArr.concat(e):(this._currentLoadArr=e,this._currentLoadIndex=0)},i.prototype.onxlLibResLoadComplete=function(t){var i=t.groupName;t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onxlLibResLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onxlLibResLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onxlLibResProgress,this)),this._loadingClass&&1==this._autoHide&&e.UIMgr.instance.hideLoading(this._loadingClass),this._loadingClass&&(this._loadingClass=null),this._loadSucc[i]&&this._loadSucc[i].call(this._thisObj[i],t),this.removeLoadDic(i)},i.prototype.onxlLibResLoadError=function(t){var i=t.groupName;e.Console.warn("Group:"+t.groupName+" has failed to load"),t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onxlLibResLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onxlLibResLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onxlLibResProgress,this),this._loadError[i]&&this._loadError[i].call(this._thisObj[i],t),this.removeLoadDic(i))},i.prototype.removeLoadDic=function(e){this._loadError[e]=null,delete this._loadError[e],this._thisObj[e]=null,delete this._thisObj[e],this._loadSucc[e]=null,delete this._loadSucc[e]},i.prototype.onxlLibResProgress=function(t){this._loadingClass&&e.UIMgr.instance.showProcessBar(this._loadingClass,t.itemsLoaded,t.itemsTotal,"",t.groupName)},i.prototype.removeRefrence=function(){this._loadSucc&&(this._loadSucc=null),this._loadingClass&&(this._loadingClass=null),this._loadError&&(this._loadSucc=null),this._thisObj&&(this._thisObj=null)},i}(egret.EventDispatcher);t._self=null,e.ResLoadMgr=t,__reflect(t.prototype,"xlLib.ResLoadMgr")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){this._currentScene=null,this._lastScene=null}return Object.defineProperty(t,"instance",{get:function(){return null==this._self&&(this._self=new t),this._self},enumerable:!0,configurable:!0}),t.prototype.init=function(e){null==this._currentScene&&(this._currentScene=e)},t.prototype.changeScene=function(t,i,n){var r=this,o=function(e){e.currentTarget.removeEventListener(egret.Event.ADDED_TO_STAGE,o,this),r._lastScene&&(r._lastScene.destroy(),r._lastScene=null)};if(n&&e.Global.isInGame){var s=this._currentScene.currentGame;return null!=s&&(s.parent&&s.parent.removeChild(s),s.destroy()),s=new t(i),(s.width>e.Global.designWidth||s.height>e.Global.designHeight)&&(s.scaleX=e.Global.designWidth/s.width,s.scaleY=e.Global.designHeight/s.height),this._currentScene.currentGame=s,this._currentScene.gameLayer.addChild(s),e.PopUpMgr.init(),s}var a=new t(i);return a.width>a.height?a.width>e.Global.designHeight&&a.height>e.Global.designWidth&&(a.scaleX=.8875,a.scaleY=640/720):a.width>e.Global.designWidth&&a.height>e.Global.designHeight&&(a.scaleX=640/720,a.scaleY=.8875),null!=this._currentScene&&(this._lastScene=this._currentScene,e.DisplayUtils.removeFromParent(this._lastScene)),this._currentScene=a,this._currentScene.addEventListener(egret.Event.ADDED_TO_STAGE,o,this),egret.MainContext.instance.stage.addChild(this._currentScene),e.PopUpMgr.init(),this._currentScene},Object.defineProperty(t.prototype,"currentScene",{get:function(){return this._currentScene},enumerable:!0,configurable:!0}),t.prototype.lastSceneLeave=function(){null!=this._lastScene&&(this._lastScene.parent&&this._lastScene.parent.removeChild(this._lastScene),this._lastScene.destroy(),this._lastScene=null)},t}();t._self=null,e.SceneMgr=t,__reflect(t.prototype,"xlLib.SceneMgr")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function e(){this.isStopped=!1,this.isMusic=!1,this.name="",this.position=0,this.egret_channel=null}return e.prototype.stop=function(){this.egret_channel&&(this.position=this.egret_channel.position,this.egret_channel.stop(),this.isStopped=!0,this.egret_channel=null)},e}();__reflect(t.prototype,"MySoundChannel");var i=function(){function i(){this._soundRes={},this._musicVolume=.8,this._soundVolume=1,this._musicOpen=!0,this._soundOpen=!0,this._activeSound={},this._activeSoundLoop={},this.loadTimeDic={},this._currentMusicIndex=0,this._currentMusicChanel=null}return Object.defineProperty(i,"instance",{get:function(){var t=this;return null==this._instance&&(this._instance=new i,e.Utils.getLocalStorage(i.SOUND_TOGGLE,function(e){null!=e&&(t._instance.soundOpen=Boolean(Number(e)))}),e.Utils.getLocalStorage(i.MUSIC_TOGGLE,function(e){null!=e&&(t._instance.musicOpen=Boolean(Number(e)))}),egret.Capabilities.supportVersion<"3.2.6"&&setTimeout(function(){},1e4)),this._instance},enumerable:!0,configurable:!0}),i.prototype.onActive=function(e){this._musicOpen&&egret.Capabilities.supportVersion<"3.2.6"&&setTimeout(function(){i.instance.resumeBgMusic()},2e3)},i.prototype.onDeActive=function(e){egret.Capabilities.supportVersion<"3.2.6"&&i.instance.pauseBgMusic()},i.prototype.playSound=function(e,t,i,n,r){if(void 0===t&&(t=1),this._soundOpen){var o,s=this;if(!this._activeSound[e]||0!=this._activeSound[e].$loops){if(n){var a=function(e,t){t.stop(),s.stopSound(e),n&&n.call(r)};o=this.play(e,t,i,[a],!1)}else o=this.play(e,t,i,[],!1);return null!=o&&(this._activeSound[e]=o),o}}},i.prototype.stopSounds=function(){for(var t in this._activeSound)null!=this._activeSound[t]&&void 0!=this._activeSound[t]&&(this._activeSound[t].stop(),this._activeSound[t]=null,delete this._activeSound[t]);for(var t in this._soundRes)this._soundRes[t]=null,delete this._soundRes[t];e.ResUtils.resetSoundLoadTimes()},i.prototype.stopSound=function(e){null!=this._activeSound[e]&&void 0!=this._activeSound[e]&&(this._activeSound[e].stop(),this._activeSound[e].dispatchEventWith(egret.Event.SOUND_COMPLETE),this._activeSound[e]=null,delete this._activeSound[e])},i.prototype.play=function(t,i,n,r,o){void 0===i&&(i=1),void 0===o&&(o=!0);var s,a=this;r&&r.length>0&&(s=function(e){var i=e.currentTarget;null!=i&&void 0!=i&&(i.removeEventListener(egret.Event.SOUND_COMPLETE,s,a),null!=r&&void 0!=r&&(r.length>1?r[0].call(r[1],t,i):r[0](t,i)))});var l=function(e){if(a._soundRes[t]=e,1==o){var s=!0;if(a._currentMusicChanel&&null!=a.loadTimeDic[a._currentMusicChanel.name]&&null!=a.loadTimeDic[t]&&a.loadTimeDic[a._currentMusicChanel.name]>a.loadTimeDic[t]&&(s=!1),1==s){var l=a.play(t,i,n,r,o);a.resetCurrentMusic(l,t)}}else(new Date).getTime()-a.loadTimeDic[t]<=1e3&&(a.loadTimeDic[t]=0,a._activeSound[t]=a.play(t,i,n,r,o))},c=0;if(null!=this.loadTimeDic[t]&&(c=this.loadTimeDic[t]),this.loadTimeDic[t]=(new Date).getTime(),null==this._soundRes[t]||void 0==this._soundRes[t]){if(RES.hasRes(t)){var h=RES.getRes(t);null!=h||void 0!=h?l(h):(e.Console.log("sound声音资源没有预加载到本地,建议进行预加载:"+t),e.ResUtils.getRes(t,l,null,egret.URLLoaderDataFormat.SOUND))}else e.ResUtils.getRes(t,l,null,egret.URLLoaderDataFormat.SOUND);return null}if(this._soundRes[t]){if(0==o&&(new Date).getTime()-c<30)return this.loadTimeDic[t]=c,null;var u=this._soundRes[t].play(n,i);if(null!=u&&void 0!=u){s&&u.addEventListener(egret.Event.SOUND_COMPLETE,s,a);var d=1==o?this._musicVolume:this._soundVolume;return u.volume=d,u}return null}return null},i.prototype.randomSounds=function(e){e&&(this._bgMusics=e);var t=Math.floor(this._bgMusics.length*Math.random());this.play(this._bgMusics[t],0)},i.prototype.playBgMusic=function(e,t){var i=this;if(i._bgMusics=e,t&&(i._currentMusicIndex=t),i._musicOpen&&i._bgMusics.length>0&&(i._currentMusicIndex>=i._bgMusics.length&&(i._currentMusicIndex=0),null==i._currentMusicChanel||i._bgMusics[i._currentMusicIndex]!=i._currentMusicChanel.name)){var n=i.play(i._bgMusics[i._currentMusicIndex],1,t,[i.onMusicEnd,i]);i.resetCurrentMusic(n,i._bgMusics[i._currentMusicIndex])}},i.prototype.onMusicEnd=function(e){var t=this;if(t._currentMusicIndex++,t._currentMusicIndex==t._bgMusics.length&&(t._currentMusicIndex=0),t._musicOpen&&t._bgMusics.length>0){var i=t.play(t._bgMusics[t._currentMusicIndex],1,0,[t.onMusicEnd,t]);t.resetCurrentMusic(i,t._bgMusics[t._currentMusicIndex])}},i.prototype.resetCurrentMusic=function(e,i){if(null!=e&&void 0!=e){var n=new t;n.name=i,n.isMusic=!0,n.egret_channel=e,n.res=this._soundRes[i],null!=this._currentMusicChanel&&this._currentMusicChanel!=n&&this._currentMusicChanel.name!=n.name&&this.stopBgMusic(),this._currentMusicChanel=n,this._currentMusicChanel.isStopped=!1,this._currentMusicChanel.egret_channel.volume=this._musicVolume}},i.prototype.stopBgMusic=function(){this._currentMusicChanel&&(this._currentMusicChanel.stop(),this.loadTimeDic[this._currentMusicChanel.name]=0,this._currentMusicChanel=null)},i.prototype.pauseBgMusic=function(){this._currentMusicChanel&&this._currentMusicChanel.stop()},i.prototype.resumeBgMusic=function(){if(this._musicOpen&&(!this._currentMusicChanel||this._currentMusicChanel.isStopped)){var e=this,t=0;if(this._currentMusicChanel&&(t=this._currentMusicChanel.position),this._bgMusics&&this._bgMusics.length>0){var i=this.play(this._bgMusics[this._currentMusicIndex],1,t,[e.onMusicEnd,e]);this.resetCurrentMusic(i,this._bgMusics[this._currentMusicIndex])}}},i.prototype.isPlayingBgMusic=function(){return this._currentMusicChanel&&0==this._currentMusicChanel.isStopped?!0:!1},i.prototype.isSoundPlaying=function(e){return this._activeSound[e]&&this._activeSound[e].position?!0:!1},Object.defineProperty(i.prototype,"musicVolume",{get:function(){return this._musicVolume},set:function(e){this._musicVolume=e,this._currentMusicChanel.egret_channel.volume=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundVolume",{get:function(){return this._soundVolume},set:function(e){this._soundVolume=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"musicOpen",{get:function(){return this._musicOpen},set:function(t){this._musicOpen=t,t?this.resumeBgMusic():this.pauseBgMusic(),e.Utils.setLocalStorage(i.MUSIC_TOGGLE,Number(this._musicOpen))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundOpen",{get:function(){return this._soundOpen},set:function(t){this._soundOpen=t,e.Utils.setLocalStorage(i.SOUND_TOGGLE,Number(this._soundOpen))},enumerable:!0,configurable:!0}),i}();i.SOUND_TOGGLE="sound_toggle",i.MUSIC_TOGGLE="music_toggle",e.SoundMgr=i,__reflect(i.prototype,"xlLib.SoundMgr")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),Object.defineProperty(i,"instance",{get:function(){return null==this._self&&(this._self=new i),this._self},enumerable:!0,configurable:!0}),i.prototype.init=function(){this.sendedKb=0,this.receiveKb=0,this.sendB=0,this.receiveB=0,this.secondTimer=new egret.Timer(1e3,0),this.secondTimer.addEventListener(egret.TimerEvent.TIMER,this.dispatchSecondEvent,this),this.secondTimer.start(),this.requestPing()},i.prototype.dispatchSecondEvent=function(t){e.Console.isDevMode||(this.dispatchEventWith(i.SENDANDRECEIVE,!1,{send:this.sendB,receive:this.receiveB}),this.sendB=this.receiveB=0)},i.prototype.requestPing=function(){},Object.defineProperty(i.prototype,"socketStatus",{set:function(e){this.dispatchEventWith(i.SOCKETSTATUS,!1,e)},enumerable:!0,configurable:!0}),i.prototype.messageCharStatistics=function(t,n,r){if(void 0===r&&(r="utf-8"),!e.Console.isDevMode){var o,s,a,l=0;if(r=r?r.toLowerCase():"","utf-16"===r||"utf16"===r)for(s=0,a=t.length;a>s;s++)o=t.charCodeAt(s),l+=65535>=o?2:4;else for(s=0,a=t.length;a>s;s++)o=t.charCodeAt(s),l+=127>=o?1:2047>=o?2:65535>=o?3:4;"send"==n?(this.sendB+=l,this.sendedKb+=l/1024):(this.receiveB+=l,this.receiveKb+=l/1024),this.dispatchEventWith(i.SENDEDANDRECEIVED,!1,{sended:this.sendedKb,received:this.receiveKb})}},i.prototype.destroy=function(){this.secondTimer&&(this.secondTimer.removeEventListener(egret.TimerEvent.TIMER,this.dispatchSecondEvent,this),this.secondTimer.stop())},i}(egret.EventDispatcher);t.PING="ping",t.SENDANDRECEIVE="sendAndReceive",t.SENDEDANDRECEIVED="sendedAndReceived",t.SOCKETSTATUS="socketStatus",t._self=null,e.StatistcsMgr=t,__reflect(t.prototype,"xlLib.StatistcsMgr")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){this._uis=new Object,this._loadings=new Object,this._effects={}}return Object.defineProperty(t,"instance",{get:function(){return null==this._self&&(this._self=new t),this._self},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DefaultLoading",{set:function(e){this.defaultLoadingView=e},enumerable:!0,configurable:!0}),t.prototype.showUI=function(t,i,n,r){void 0===r&&(r=!1);var o=this,s=egret.getQualifiedClassName(t),a=function(e){o._uis[s]&&o._uis[s].hasEventListener(egret.Event.REMOVED_FROM_STAGE,a,o)&&o._uis[s].removeEventListener(egret.Event.REMOVED_FROM_STAGE,a,o),o._uis[s]&&o._uis[s].destroy&&o._uis[s].destroy(),0==r&&(o._uis[s]=null,delete o._uis[s])};return null==this._uis[s]?this._uis[s]=new t(i):this._uis[s].updateUIData&&this._uis[s].updateUIData(i),this._uis[s]?(0==r&&(this._uis[s].hasEventListener(egret.Event.REMOVED_FROM_STAGE,a,this)||this._uis[s].addEventListener(egret.Event.REMOVED_FROM_STAGE,a,this)),(null==this._uis[s].stage||null==this._uis[s].parent)&&(e.SceneMgr.instance.currentScene&&e.SceneMgr.instance.currentScene.topLayer?e.SceneMgr.instance.currentScene.topLayer.addChild(this._uis[s]):egret.MainContext.instance.stage.addChild(this._uis[s])),this._uis[s]):void 0},Object.defineProperty(t.prototype,"commonLoadUI",{get:function(){return this._commonLoadUI},set:function(e){this._commonLoadUI=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tipsLoadUI",{get:function(){return this._tipsLoadUI},set:function(e){this._tipsLoadUI=e},enumerable:!0,configurable:!0}),t.prototype.showProcessBar=function(e,t,i,n,r,o){return void 0===o&&(o=!1),this.showLoading(e,t,i,n,r,o)},t.prototype.showLoadingTimeout=function(e,t,i,n){void 0===t&&(t=""),void 0===i&&(i=3e4),void 0===n&&(n=""),this.showLoading(e,null,null,n,null,!1,t);var r=this;i&&setTimeout(function(){r.hideLoading(e,t)},i)},t.prototype.showLoading=function(t,i,n,r,o,s,a){void 0===s&&(s=!1),void 0===a&&(a=""),""==a?t&&null!=t?a=egret.getQualifiedClassName(t):(a=egret.getQualifiedClassName(this._commonLoadUI),t=this._commonLoadUI):null==t&&(a=egret.getQualifiedClassName(this._tipsLoadUI),t=this._tipsLoadUI),e.StringUtils.stringIsNullOrEmpty(a)||null==t||(null==this._loadings[a]&&(this._loadings[a]=new t),this._loadings[a].setProgress&&this._loadings[a].setProgress(2,100),null==this._loadings[a].stage&&(e.SceneMgr.instance.currentScene?e.SceneMgr.instance.currentScene.currentGame&&e.SceneMgr.instance.currentScene.currentGame.parent?e.SceneMgr.instance.currentScene.currentGame.addChild(this._loadings[a]):e.SceneMgr.instance.currentScene.tipsLayer&&e.SceneMgr.instance.currentScene.tipsLayer.addChild(this._loadings[a]):egret.MainContext.instance.stage.addChild(this._loadings[a])),this._loadings[a].setProgress&&this._loadings[a].setProgress(i,n,r,o,s))},t.prototype.hideLoading=function(t,i,n){void 0===i&&(i=""),void 0===n&&(n=!0),""==i&&(t&&null!=t?i=egret.getQualifiedClassName(t):(i=egret.getQualifiedClassName(this._commonLoadUI),t=this._commonLoadUI)),null!=this._loadings[i]&&(this._loadings[i].setProgress&&this._loadings[i].setProgress(2,100),e.DisplayUtils.removeFromParent(this._loadings[i]),n&&(this._loadings[i]=null,delete this._loadings[i]))},t.prototype.hideUI=function(t,i){void 0===i&&(i=!0);var n=egret.getQualifiedClassName(t);e.DisplayUtils.removeFromParent(this._uis[n]),i&&(this._uis[n]=null,delete this._uis[n])},t.prototype.destroyUI=function(t){var i=egret.getQualifiedClassName(t);null!=this._uis[i]&&void 0!=this._uis[i]&&(e.DisplayUtils.removeFromParent(this._uis[i]),delete this._uis[i])},t.prototype.resize=function(){if(this._uis)for(var e in this._uis){var t=this._uis[e];t&&t.parent&&t.resize&&t.resize()}},t.prototype.clearOldSceneUis=function(){if(this._uis)for(var e in this._uis){var t=this._uis[e];t&&null==t.parent&&delete this._uis[e]}if(this._loadings)for(var e in this._loadings){var t=this._loadings[e];t&&null==t.parent&&delete this._loadings[e]}},t}();t._self=null,e.UIMgr=t,__reflect(t.prototype,"xlLib.UIMgr")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){this._isConnecting=!1,this._connected=!1,this.useLog=!0,this._host="",this._port="",this.handlers=[],this.isPinging=!1,this.actionTimeout=null,this.resetWebSocket()}return t.prototype.resetWebSocket=function(){this.ws&&(this.ws.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.ws.removeEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.ws.removeEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.ws.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketClose,this)),this.ws=new egret.WebSocket,this.ws.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.ws.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.ws.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.ws.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketClose,this)},t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"isConnecting",{get:function(){return this._isConnecting},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connected",{get:function(){return this._connected},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this._port},enumerable:!0,configurable:!0}),t.prototype.connect=function(t,i,n){if(!this._connected&&!this._isConnecting){this._host=t,this._port=i,this.resetWebSocket(),this._isConnecting=!0,this._connected=!1;var r="ws://",o=r+t+":"+i+"?userid="+n;this.ws.connectByUrl(o),e.Console.log("连接: "+o+"  time："+e.Utils.formatDate(new Date,"yyyy-MM-dd hh:mm:ss"))}},t.prototype.close=function(){this.actionTimeout&&(egret.clearTimeout(this.actionTimeout),this.actionTimeout=null),this.ws.connected&&(this.ws.close(),this._isConnecting=!1,this._connected=!1),this.ws&&(this.ws.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.ws.removeEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.ws.removeEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.ws.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketClose,this)),this.ws=null},t.prototype.registerMsgHandler=function(e,t,i){var n=this;if(void 0===i&&(i=!0),this.handlers[e])return void console.log("消息ID为:"+e+"已经注册了相同的处理回调函数");var r=function(r){"disconnect"!=e&&"string"==typeof r&&(r=JSON.parse(r)),t(r),i&&delete n.handlers[e]};this.handlers[e]=r},t.prototype.send=function(t,i,n,r,o,s){void 0===s&&(s=!0),this.ws.connected?(null!=i&&"object"==typeof i&&(i.command=t,i=JSON.stringify(i)),this.registerMsgHandler(t,function(e){console.log("-----------------收到消息"+e+"---",e),n.call(r,e)},!1),this.ws.writeUTF(i),this.ws.flush(),console.log("开始发送消息---------------")):e.TipsUtils.showFloatWordTips("服务器已断开，请检查网络环境")
},t.prototype.onReceiveMessage=function(e){var t=this.ws.readUTF(),i=JSON.parse(t);this.handlers[i.event]?(console.log("收到消息 = "+t),this.handlers[i.event](t)):"socket_pong"==i.event&&(console.log("socket_pong"),this.lastRecieveTime=this.appTimeStamp)},t.prototype.onSocketOpen=function(t){this._isConnecting=!1,this._connected=!0,EventUtil.dispatchEvent(EventConst.ON_SOCKET_SUC,{}),e.Console.log("网络已连接  time："+e.Utils.formatDate(new Date,"yyyy-MM-dd hh:mm:ss"))},t.prototype.onSocketClose=function(t){(this._connected||this._isConnecting)&&(this._isConnecting=!1,this._connected=!1,EventUtil.dispatchEvent(EventConst.ON_SOCKET_CLOSE,{}),e.Console.log("网络已断开  time："+e.Utils.formatDate(new Date,"yyyy-MM-dd hh:mm:ss")))},t}();e.WebSocketMgr=t,__reflect(t.prototype,"xlLib.WebSocketMgr")}(xlLib||(xlLib={}));var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function r(e){t.call(n,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var xlLib;!function(e){var t=function(){function e(){}return e.init=function(t,i){egret.ExternalInterface.addCallback(e.SENDTOJS,function(t){e.onNativeMessage(t)})},e.setRTMPUrl=function(t,i,r){var o=new n;o.cmd=e.livePlayer,o.main=t,o.sub=i,o.hall=r,egret.ExternalInterface.call(e.SENDTONATIVE,JSON.stringify(o))},e.showVideo=function(){var t=new i;t.cmd=e.showPlayer,t.data="xixi",egret.ExternalInterface.call(e.SENDTONATIVE,JSON.stringify(t))},e.setPlayerNull=function(){var t=new i;t.cmd=e.clearPlayer,t.data="xixi",egret.ExternalInterface.call(e.SENDTONATIVE,JSON.stringify(t))},e.setGotoURL=function(t){var n=new i;n.cmd=e.gotoURL,n.data=t,egret.ExternalInterface.call(e.SENDTONATIVE,JSON.stringify(n))},e.setGameStatus=function(t){var n=new i;n.cmd=e.gameStatus,t?n.data="ingame":n.data="outgame",egret.ExternalInterface.call(e.SENDTONATIVE,JSON.stringify(n))},e.onNativeMessage=function(e){var t=JSON.parse(e);switch(t.cmd){case"netinfo":var i=t.value;GlobalData.hasNetwork=i}},e}();t.SENDTONATIVE="sendToNative",t.SENDTOJS="sendToJS",t.livePlayer="livePlayer",t.clearPlayer="clearPlayer",t.showPlayer="showPlayer",t.gotoURL="gotoURL",t.gameStatus="gameStatus",e.AndroidSDK=t,__reflect(t.prototype,"xlLib.AndroidSDK");var i=function(){function e(){}return e}();e.YHGameObj=i,__reflect(i.prototype,"xlLib.YHGameObj");var n=function(){function e(){}return e}();e.YHVideoObj=n,__reflect(n.prototype,"xlLib.YHVideoObj")}(xlLib||(xlLib={}));var xlLib;!function(e){var t;!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.DEBUG_SERVER=4]="DEBUG_SERVER",e[e.INFO_SERVER=5]="INFO_SERVER",e[e.WARN_SERVER=6]="WARN_SERVER",e[e.ERROR_SERVER=7]="ERROR_SERVER"}(t=e.LOGLEVEL||(e.LOGLEVEL={}));var i=function(){function i(){}return i.setLogLevel=function(e){1==this.isDevMode?this.LogLevel=t.DEBUG:(this.LogLevel=e,egret.Logger.logLevel=egret.Logger.INFO)},i.init=function(t,i){e.Global.isH5?this.isDevMode=t:this.isDevMode=t,this.setLogLevel(i)},i.getLocalLevel=function(e){return e>=t.DEBUG_SERVER&&(e=this.LogLevel-t.DEBUG_SERVER),e},i.log=function(i){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getLocalLevel(this.LogLevel);o<=t.DEBUG&&((null==i||void 0==i||"string"==typeof i&&""==i)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),e.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"LOG",i,n):console.log(i,n),o!=this.LogLevel)},i.debug=function(i){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getLocalLevel(this.LogLevel);o<=t.DEBUG&&((null==i||void 0==i||"string"==typeof i&&""==i)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),e.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"DEBUG",i,n):console.log(i,n),o!=this.LogLevel)},i.info=function(i){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getLocalLevel(this.LogLevel);o<=t.INFO&&((null==i||void 0==i||"string"==typeof i&&""==i)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),e.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"INFO",i,n):console.log(i,n),o!=this.LogLevel)},i.warn=function(i){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getLocalLevel(this.LogLevel);o<=t.WARN&&((null==i||void 0==i||"string"==typeof i&&""==i)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),e.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"WARN",i,n):console.log(i,n),o!=this.LogLevel)},i.error=function(i){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getLocalLevel(this.LogLevel);o<=t.ERROR&&((null==i||void 0==i||"string"==typeof i&&""==i)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),e.Global.isH5?console.error((new Date).toTimeString().split(" ")[0],"ERROR",i,n):console.log(i,n),o!=this.LogLevel);var s=i;n&&n.forEach(function(e){e&&(s+=e)}),e.DebugView&&e.DebugView.Instance.addLog(s)},i}();i.isDevMode=!1,i.LOG_LEVEL_STR=["[DEBUG]","[INFO]","[WARN]","[ERROR]"],i.LogLevel=7,e.Console=i,__reflect(i.prototype,"xlLib.Console")}(xlLib||(xlLib={})),onerror=function(e,t,i,n,r){var o="异常捕获:"+e+"url:"+t+"line:"+i;xlLib.Console.error(o),xlLib.DebugView.Instance.addLog(o)};var xlLib;!function(e){function t(e){if(!e)return null;var t=s[e];if(t)return t;var i=e.split("."),n=i.length;t=__uglobal;for(var r=0;n>r;r++){var o=i[r];if(t=t[o],!t)return null}return s[e]=t,t}function i(e){var t="^"+e+".";for(var i in s)i.match(t)&&console.error("匹配成功:"+i)}function n(e){if(!e)return null;var t="^"+e+".";if(-1==e.indexOf("."))for(var i in s)i.match(t)&&(s[i]=null,delete s[i]);else s[e]=null,delete s[e]}function r(e){if(!e||"object"!=typeof e&&!e.prototype)return null;var t=e.prototype?e.prototype:Object.getPrototypeOf(e),i=Object.getPrototypeOf(t);if(!i)return null;var n=o(i.constructor);return n?n:null}function o(e){var t=typeof e;if(!e||"object"!=t&&!e.prototype)return t;var i=e.prototype?e.prototype:Object.getPrototypeOf(e);if(i.hasOwnProperty("__class__"))return i.__class__;var n=i.constructor.toString().trim(),r=n.indexOf("("),o=n.substring(9,r);return Object.defineProperty(i,"__class__",{value:o,enumerable:!1,writable:!0}),o}var s={};e.getDefinitionByName=t,e.test=i,e.delDefinitionByName=n,e.getQualifiedSuperclassName=r,e.getQualifiedClassName=o}(xlLib||(xlLib={}));var __uglobal=__uglobal||this,xlLib;!function(e){var t=function(){function e(){}return e.vibrate=function(e){void 0===e&&(e=1e3),navigator.vibrate?navigator.vibrate(e):navigator.webkitVibrate&&navigator.webkitVibrate(e)},e.getMic=function(){},e.getScreen=function(){},e.callPhone=function(e){try{window.open("tel:"+e,"_self")}catch(t){}},e.sendMessage=function(e){try{window.open("sms:"+e,"_self")}catch(t){}},e.getCurUrl=function(){try{return location.href}catch(e){}},e}();t.curAngle=Number(window.orientation),e.DeviceUtils=t,__reflect(t.prototype,"xlLib.DeviceUtils")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){}return t.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.createMovieClicp=function(e,t){var i=RES.getRes(e+"_json"),n=RES.getRes(e+"_png"),r=new egret.MovieClipDataFactory(i,n),o=new egret.MovieClip(r.generateMovieClipData(t));return o},t.createMask=function(t,i,n,r){void 0===t&&(t=.3),void 0===r&&(r=0);var o=new egret.Sprite;return o.graphics.clear(),o.graphics.beginFill(r,t),o.graphics.drawRect(0,0,i?i:e.Global.screenWidth,n?n:e.Global.screenHeight),o.graphics.endFill(),o},t.createShape=function(t,i,n,r){void 0===t&&(t=.3),void 0===r&&(r=0);var o=new egret.Shape;return o.graphics.clear(),o.graphics.beginFill(r,t),o.graphics.drawRect(0,0,i?i:e.Global.screenWidth,n?n:e.Global.screenHeight),o.graphics.endFill(),o},t.createCircle=function(e,t,i){void 0===e&&(e=.3),void 0===i&&(i=0);var n=new egret.Sprite;return n.graphics.clear(),n.graphics.beginFill(i,e),n.graphics.drawCircle(0,0,t),n.graphics.endFill(),n},t.createDragonBonesDisplay=function(t,i,n,r,o){var s=RES.getRes(t);if(n&&null!=n)var a=RES.getRes(i),l=RES.getRes(n);else var a=RES.getRes(i+"_json"),l=RES.getRes(i+"_png");e.StringUtils.stringIsNullOrEmpty(r)&&(r="armature");var c;if(dragonBones){var h=new dragonBones.EgretFactory;h.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(s)),h.addTextureAtlas(new dragonBones.EgretTextureAtlas(l,a)),o?(c=h.buildFastArmature(r),c.enableAnimationCache(o)):c=h.buildArmature(r)}return c},t.runDragonBonesArmature=function(t,i,n,r){return void 0===r&&(r=!0),null==t?void e.Console.error("armature不能为空"):(dragonBones.WorldClock.clock.add(t),void(r?t.animation.gotoAndPlay(i,0,-1,n,0):t.animation.gotoAndStop(i,0)))},t.destoryDragonBonesArmature=function(t,i){return null==t?void e.Console.error("armature不能为空"):(dragonBones.WorldClock.clock.remove(t),t.animation.stop(),void t.dispose())},t.createTextLabel=function(e,t,i,n,r,o,s,a,l,c,h,u){void 0===e&&(e="none"),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a="left"),void 0===l&&(l=0),void 0===c&&(c=0),void 0===h&&(h=0),void 0===u&&(u=0);var d=new egret.TextField;return d.textColor=t,d.textAlign=a,d.fontFamily="微软雅黑",d.text=e,d.size=i,0!=o&&(d.width=o),0!=s&&(d.height=s),0!=h&&h!=u&&(d.strokeColor=h,d.stroke=u),d.rotation=l,0!=c&&(d.skewX=c),d.x=n,d.y=r,d},t.createEuiTextLabel=function(e,t,i,n,r,o,s,a,l,c,h,u){void 0===e&&(e="none"),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a="left"),void 0===l&&(l=0),void 0===c&&(c=0),void 0===h&&(h=0),void 0===u&&(u=0);var d=new eui.Label;return d.textColor=t,d.textAlign=a,d.fontFamily="微软雅黑",d.text=e,d.size=i,0!=o&&(d.width=o),0!=s&&(d.height=s),0!=h&&h!=u&&(d.strokeColor=h,d.stroke=u),d.rotation=l,0!=c&&(d.skewX=c),d.x=n,d.y=r,d},t.removeFromParent=function(e){e&&e.parent&&e.parent.removeChild(e)},t.removeAllChildren=function(e){for(;e&&e.numChildren&&e.numChildren>0;)this.removeFromParent(e.getChildAt(0))},t.catchScreen=function(e,t){var i=new egret.RenderTexture;return i.drawToTexture(e),i.toDataURL("image/png",t?t:new egret.Rectangle(0,0,e.width,e.height))},t.catchScreenToTex=function(e,t,i){var n=new egret.RenderTexture;return n.drawToTexture(e,t,i),n},t.lightArea=function(t,i){void 0===i&&(i=.8);var n=new egret.DisplayObjectContainer,r=e.DisplayUtils.createShape(i,e.Global.screenWidth,e.Global.screenHeight);n.addChild(r),n.addChild(t),t.blendMode=egret.BlendMode.ERASE;var o=new egret.RenderTexture;o.drawToTexture(n);var s=new egret.Bitmap;return s.texture=o,s},t}();t.ticketStarted=!1,e.DisplayUtils=t,__reflect(t.prototype,"xlLib.DisplayUtils")}(xlLib||(xlLib={}));var EffectUtils;!function(e){function t(e,t){if(void 0===t&&(t=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[e.hashCode]){null!=this.rotationArr[e.hashCode]&&this.rotationArr[e.hashCode]||(this.rotationArr[e.hashCode]=!0);var i=function(){this.rotationArr[e.hashCode]&&null!=e&&(e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(i,this))};e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(i,this)}}function i(e,t){void 0===t&&(t=1e3);var i=function(){egret.Tween.get(e).to({alpha:0},t).call(n)},n=function(){egret.Tween.get(e).to({alpha:1},t).call(i)};egret.Tween.get(e).to({alpha:0},t).call(n)}function n(e){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[e.hashCode]=!1}function r(e){var t=80,i=e.x;egret.Tween.get(e).to({x:e.x-10},t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},t)},this,2*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x-20},t)},this,3*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},t)},this,4*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:i},t)},this,5*t)}function o(t){void 0===t&&(t=1);var i=e.curPanel,n=40,r=i.x,o=i.y;1==t?(egret.Tween.get(i).to({x:i.x-10},n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x+20},n)},this,2*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x-20},n)},this,3*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x+20},n)},this,4*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:r},n)},this,5*n)):(egret.Tween.get(i).to({x:i.x-10,y:i.y},n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x+20,y:i.y},n)},this,2*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x,y:i.y+15},n)},this,3*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x,y:i.y-20},n)},this,4*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:i.x,y:i.y+10},n)},this,5*n),egret.setTimeout(function(){egret.Tween.get(i).to({x:r,y:o},n)},this,6*n))}function s(e,t){var i=this;if(void 0===t&&(t=null),!this.isPlayEffectPlay){var n=e.anchorOffsetX,r=e.anchorOffsetY;e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2;var o=e.anchorOffsetX-n,s=e.anchorOffsetY-r;e.x+=o,e.y+=s;var a=function(){e.anchorOffsetX=n,e.anchorOffsetY=r,e.x-=o,e.y-=s,e.scaleX=1,e.scaleY=1,null!=t&&t(),egret.Tween.removeTweens(e),i.isPlayEffectPlay=!1},l=function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100).call(a,this)};egret.Tween.get(e).to({scaleX:.8,scaleY:.8},100,egret.Ease.sineIn).call(l,this)}}function a(e,t,i){if(void 0===t&&(t=1),void 0===i&&(i=null),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var n=function(){this.isPlayEffectPlay=!1,i()},r=function(){1==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.elasticOut).call(n,this):2==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.backOut).call(n,this):3==t&&egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},100).call(n,this)};egret.Tween.get(e).to({scaleX:.5,scaleY:.5,x:e.x+e.width/4,y:e.y+e.height/4},100,egret.Ease.sineIn).call(r,this)}}function l(e,t){void 0===t&&(t=function(){});var i=function(){egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.elasticOut).call(t,this)};egret.Tween.get(e).to({scaleX:.5,scaleY:.5,x:e.x+e.width/4,y:e.y+e.height/4},100,egret.Ease.sineIn).call(i,this)}function c(e,t,i){void 0===t&&(t=800),void 0===i&&(i=function(){}),e.alpha=0,e.scaleX=4,e.scaleY=4;var n=function(){i()};egret.Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){n()},this,t)}function h(e,t){void 0===t&&(t=function(){}),e.scaleX=.1,e.scaleY=.1;var i=function(){t()};egret.Tween.get(e).to({scaleX:1,scaleY:1},800,egret.Ease.elasticOut).call(i,this)}function u(e,t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=function(){}),void 0===r&&(r=200);var o=e.x,s=e.y;e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x+=e.anchorOffsetX,e.y+=e.anchorOffsetY-10,e.parent&&e.parent.setChildIndex(e,e.parent.numChildren-1);var a=function(){egret.Tween.get(e).to({x:o,y:s},r),n()},l=function(){e.anchorOffsetX=0,e.anchorOffsetY=0,e.x-=e.width/2,e.y-=e.height/2-10,e.scaleX=1,e.scaleY=1,egret.Tween.get(e).to({x:t-10,y:i},r).call(a,this)};egret.Tween.get(e).to({scaleX:1.2,scaleY:1.2},r).call(l,this)}function d(e,t,i){void 0===t&&(t=function(){}),void 0===i&&(i=400);e.x,e.y;e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x+=e.anchorOffsetX,e.y+=e.anchorOffsetY-10,e.parent&&e.parent.setChildIndex(e,e.parent.numChildren-1);var n=function(){e.anchorOffsetX=0,e.anchorOffsetY=0,e.x-=e.width/2,e.y-=e.height/2-10,e.scaleX=1,e.scaleY=1,t()};egret.Tween.get(e).to({scaleX:1.4,scaleY:1.4},i).call(n,this)}function g(e,t,i){void 0===t&&(t=800),void 0===i&&(i=function(){}),e.alpha=0,e.scaleX=4,e.scaleY=4;var n=function(){i()},r=function(){egret.Tween.get(e).to({alpha:0},800).call(n,this)};egret.Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){r()},this,t)}function p(e){var t=function(){if(null!=e){var i=function(){e.scaleX=1,e.scaleY=1,egret.Tween.get(e).to({alpha:1},1e3).call(t,self)};e.alpha=1,egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(i,self)}};t()}function f(e,t,i){void 0===i&&(i=50);var n=function(){if(null!=e){var r=function(){egret.Tween.get(e).to({y:e.y-i},t).call(n,this)};egret.Tween.get(e).to({y:e.y+i},t).call(r,this)}};n()}function _(e,t,i){void 0===i&&(i=20);var n=function(){if(null!=e){var r=function(){egret.Tween.get(e).to({rotation:-i},t).call(n,this)};egret.Tween.get(e).to({rotation:i},t).call(r,this)}};n()}function v(e,t,i){void 0===t&&(t=""),void 0===i&&(i=200);for(var n=t.split(""),r=n.length,o=0;r>o;o++)egret.setTimeout(function(){e.appendText(n[Number(this)])},o,i*o)}function m(e,t){for(var i=[[20,300],[15,300],[10,300],[5,300]],n="egret.Tween.get("+e+")",r=0,o=i.length;o>r;r++)n+=".to({'y':"+t+"-"+i[r][0]+"}, "+i[r][1]+")",n+=".to({'y':"+t+"}, "+i[r][1]+")";return n+=";"}function b(e,t){e.alpha=1,egret.Tween.get(e).to({alpha:0},t).to({alpha:1},t).call(this.startFlicker,this,[e])}function E(e){egret.Tween.removeTweens(e)}function L(e,t,i,n,r){void 0===n&&(n=140),void 0===r&&(r=64);var o=0,s=0,a=function(){if(s>8)return clearInterval(o),void(s=0);s++;var a=new eui.Image("gold");a.x=t,a.y=i,a.scaleX=.6,a.scaleY=.6,e.addChild(a),egret.Tween.get(a).to({x:n,y:r,scaleX:1.1,scaleY:1.1},600).wait(100).call(function(){e.removeChild(a)},[e,a])};o=setInterval(a.bind(this),100)}e.rotationEffect=t,e.blinkEffect=i,e.removeRotationEffect=n,e.shakeObj=r,e.shakeScreen=o,e.playButtonEffect=s;e.playEffect=a,e.playEffect2=l,e.playEffect3=c,e.playEffect4=h,e.playRoleActionEffect1=u,e.playRoleActionEffect2=d,e.playEffect5=g,e.playScaleEffect=p,e.flyObj=f,e.rockObj=_,e.typerEffect=v,e.macIconShake=m,e.startFlicker=b,e.stopFlicker=E,e.coinsFly=L}(EffectUtils||(EffectUtils={}));var xlLib;!function(e){var t=function(){function t(){}return t.checkJsIsExist=function(t){if(1==e.Global.isH5){document.body.setAttribute("style","");for(var i=document.getElementsByTagName("script"),n=0;n<i.length;n++)if(i[n].src.indexOf(t)>-1)return!0}return!1},t.isLobbyMode=function(){return"LobbyScene"==egret.getQualifiedClassName(e.SceneMgr.instance.currentScene)?!0:!1},t.LoadGame=function(i,n,r,o,s,a){e.ScreenUtils.landscape&&(this.defaultDirect=e.ScreenUtils.landscape),i=RES.getVersionController().getVirtualUrl(i);var l=function(i){o&&(r.preloadUI=o);var l=t.getGameStage(n,r);if(l&&(o&&(l.preLoadCallBack=function(){e.UIMgr.instance.hideLoading(o)}),s?s.call(a,l):e.SoundMgr.instance.stopBgMusic(),0==e.Global.isInGame)){e.Global.isInGame=!0,e.SceneMgr.instance.currentScene.addGame(l);try{var c={};c.gameId=r.gameId,c.time=(new Date).getTime(),e.Utils.setLocalStorage(CommonConsts.LOBBY_LASTGAME,JSON.stringify(c))}catch(h){e.Console.error("设置游戏GameId失败")}}};e.UIMgr.instance.clearOldSceneUis(),null==this.lbscene&&(this.lbscene=e.getQualifiedClassName(e.SceneMgr.instance.currentScene)),this.checkJsIsExist(i)?l():(o&&e.UIMgr.instance.showLoadingTimeout(o,"",0),this.LoadGameJs(i,l))},t.LoadLobby=function(t,i,n,r,o,s){null==t&&(t="resource/main.min.js"),t=RES.getVersionController().getVirtualUrl(t),null==i&&(i="AppMain");var a=function(t){var r=egret.getDefinitionByName(i);r&&e.SceneMgr.instance.changeScene(r,n)};this.checkJsIsExist(t)?a():(r&&e.UIMgr.instance.showLoadingTimeout(r,"",0),this.LoadGameJs(t,a))},t.ExitGame=function(){if(e.Global.gameId=e.Global.lobbyGameId,e.Global.isInGame=!1,e.SoundMgr.instance.stopSounds(),e.SoundMgr.instance.stopBgMusic(),e.ScreenUtils.landscape&&this.defaultDirect!=e.ScreenUtils.landscape&&(e.ScreenUtils.landscape=!e.ScreenUtils.landscape),e.SceneMgr.instance.currentScene.removeGame)e.SceneMgr.instance.currentScene.removeGame(),e.SceneMgr.instance.currentScene.uiLayer.visible=!0;else{var t=e.getDefinitionByName(this.lbscene);e.SceneMgr.instance.changeScene(t)}e.delDefinitionByName("Cmd"),this.removeGameJs(),e.UIMgr.instance.clearOldSceneUis(),e.Utils.setLocalStorage(CommonConsts.LOBBY_LASTGAME,null),e.Global.dispatchEvent(e.ZqEvent.UPDATE_USER_INFO),e.Global.dispatchEvent(e.ZqEvent.CHECK_VERSION_UPDATE)},t.reloadGame=function(t,i,n,r,o,s){1==e.Global.lobbyMode&&(e.Global.gameId=e.Global.lobbyGameId,e.Global.isInGame=!1,e.ScreenUtils.landscape&&this.defaultDirect!=e.ScreenUtils.landscape&&(e.ScreenUtils.landscape=!e.ScreenUtils.landscape),e.SoundMgr.instance.stopSounds(),e.SoundMgr.instance.stopBgMusic(),e.SceneMgr.instance.currentScene.removeGame?(e.SceneMgr.instance.currentScene.removeGame(),e.SceneMgr.instance.currentScene.uiLayer.visible=!0):e.SceneMgr.instance.changeScene(e.LobbyScene),e.delDefinitionByName("Cmd"),this.removeGameJs(),e.UIMgr.instance.clearOldSceneUis(),e.Utils.setLocalStorage(CommonConsts.LOBBY_LASTGAME,null),e.Global.dispatchEvent(e.ZqEvent.UPDATE_USER_INFO),e.Global.dispatchEvent(e.ZqEvent.CHECK_VERSION_UPDATE),this.LoadGame(t,i,n,r,o,s))},Object.defineProperty(t,"lastGame",{get:function(){var e;return e=0},enumerable:!0,configurable:!0}),t.LoadGameJs=function(e,t,i){},t.getGameStage=function(e,t){var i=egret.getDefinitionByName(e);return i?new i(t):void 0},t.removeGameJs=function(){if(1==e.Global.isH5){var t=document.getElementById("lobbygame"),i=document.getElementsByTagName("HEAD").item(0);t&&i.removeChild(t)}},t.egretLoaded=function(){var e=document.getElementById("loading");document.body.removeChild(e)},t}();e.GameModuleUtils=t,__reflect(t.prototype,"xlLib.GameModuleUtils")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){}return t.init=function(e,i){egret.ExternalInterface.addCallback(t.SENDTOJS,function(e){t.onNativeMessage(e)})},t.setRTMPUrl=function(i,n,r){var o=new e.YHVideoObj;o.cmd=t.livePlayer,o.main=i,o.sub=n,o.hall=r,egret.ExternalInterface.call(e.AndroidSDK.SENDTONATIVE,JSON.stringify(o))},t.showVideo=function(){var i=new e.YHGameObj;i.cmd=t.showPlayer,i.data="xixi",egret.ExternalInterface.call(e.AndroidSDK.SENDTONATIVE,JSON.stringify(i))},t.setPlayerNull=function(){var i=new e.YHGameObj;i.cmd=t.clearPlayer,i.data="xixi",egret.ExternalInterface.call(t.SENDTONATIVE,JSON.stringify(i))},t.setGotoURL=function(i){var n=new e.YHGameObj;n.cmd=t.gotoURL,n.data=i,egret.ExternalInterface.call(t.SENDTONATIVE,JSON.stringify(n))},t.setGameStatus=function(i){var n=new e.YHGameObj;n.cmd=t.gameStatus,i?n.data="ingame":n.data="outgame",egret.ExternalInterface.call(t.SENDTONATIVE,JSON.stringify(n))},t.onNativeMessage=function(e){var t=JSON.parse(e);switch(t.cmd){case"netinfo":var i=t.value;GlobalData.hasNetwork=i}},t}();t.SENDTONATIVE="sendToNative",t.SENDTOJS="sendToJS",t.livePlayer="livePlayer",t.clearPlayer="clearPlayer",t.showPlayer="showPlayer",t.gotoURL="gotoURL",t.gameStatus="gameStatus",e.IosSDK=t,__reflect(t.prototype,"xlLib.IosSDK")}(xlLib||(xlLib={}));var md5=function(){function e(){this.hexcase=0,this.b64pad=""}return e.prototype.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.any_hmac_md5=function(e,t,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),i)},e.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.prototype.rstr_hmac_md5=function(e,t){var i=this.rstr2binl(e);i.length>16&&(i=this.binl_md5(i,8*e.length));for(var n=Array(16),r=Array(16),o=0;16>o;o++)n[o]=909522486^i[o],r[o]=1549556828^i[o];var s=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(r.concat(s),640))},e.prototype.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",r="",o=0;o<e.length;o++)i=e.charCodeAt(o),r+=n.charAt(i>>>4&15)+n.charAt(15&i);return r},e.prototype.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=e.length,o=0;r>o;o+=3)for(var s=e.charCodeAt(o)<<16|(r>o+1?e.charCodeAt(o+1)<<8:0)|(r>o+2?e.charCodeAt(o+2):0),a=0;4>a;a++)n+=8*o+6*a>8*e.length?this.b64pad:i.charAt(s>>>6*(3-a)&63);return n},e.prototype.rstr2any=function(e,t){var i,n,r,o,s,a=t.length,l=Array(Math.ceil(e.length/2));for(i=0;i<l.length;i++)l[i]=e.charCodeAt(2*i)<<8|e.charCodeAt(2*i+1);var c=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),h=Array(c);for(n=0;c>n;n++){for(s=Array(),o=0,i=0;i<l.length;i++)o=(o<<16)+l[i],r=Math.floor(o/a),o-=r*a,(s.length>0||r>0)&&(s[s.length]=r);h[n]=o,l=s}var u="";for(i=h.length-1;i>=0;i--)u+=t.charAt(h[i]);return u},e.prototype.str2rstr_utf8=function(e){for(var t,i,n="",r=-1;++r<e.length;)t=e.charCodeAt(r),i=r+1<e.length?e.charCodeAt(r+1):0,t>=55296&&56319>=t&&i>=56320&&57343>=i&&(t=65536+((1023&t)<<10)+(1023&i),r++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},e.prototype.str2rstr_utf16le=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(255&e.charCodeAt(i),e.charCodeAt(i)>>>8&255);return t},e.prototype.str2rstr_utf16be=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e.charCodeAt(i)>>>8&255,255&e.charCodeAt(i));return t},e.prototype.rstr2binl=function(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t},e.prototype.binl2rstr=function(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t},e.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,n=-271733879,r=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=i,l=n,c=r,h=o;i=this.md5_ff(i,n,r,o,e[s+0],7,-680876936),o=this.md5_ff(o,i,n,r,e[s+1],12,-389564586),r=this.md5_ff(r,o,i,n,e[s+2],17,606105819),n=this.md5_ff(n,r,o,i,e[s+3],22,-1044525330),i=this.md5_ff(i,n,r,o,e[s+4],7,-176418897),o=this.md5_ff(o,i,n,r,e[s+5],12,1200080426),r=this.md5_ff(r,o,i,n,e[s+6],17,-1473231341),n=this.md5_ff(n,r,o,i,e[s+7],22,-45705983),i=this.md5_ff(i,n,r,o,e[s+8],7,1770035416),o=this.md5_ff(o,i,n,r,e[s+9],12,-1958414417),r=this.md5_ff(r,o,i,n,e[s+10],17,-42063),n=this.md5_ff(n,r,o,i,e[s+11],22,-1990404162),i=this.md5_ff(i,n,r,o,e[s+12],7,1804603682),o=this.md5_ff(o,i,n,r,e[s+13],12,-40341101),r=this.md5_ff(r,o,i,n,e[s+14],17,-1502002290),n=this.md5_ff(n,r,o,i,e[s+15],22,1236535329),i=this.md5_gg(i,n,r,o,e[s+1],5,-165796510),o=this.md5_gg(o,i,n,r,e[s+6],9,-1069501632),r=this.md5_gg(r,o,i,n,e[s+11],14,643717713),n=this.md5_gg(n,r,o,i,e[s+0],20,-373897302),i=this.md5_gg(i,n,r,o,e[s+5],5,-701558691),o=this.md5_gg(o,i,n,r,e[s+10],9,38016083),r=this.md5_gg(r,o,i,n,e[s+15],14,-660478335),n=this.md5_gg(n,r,o,i,e[s+4],20,-405537848),i=this.md5_gg(i,n,r,o,e[s+9],5,568446438),o=this.md5_gg(o,i,n,r,e[s+14],9,-1019803690),r=this.md5_gg(r,o,i,n,e[s+3],14,-187363961),n=this.md5_gg(n,r,o,i,e[s+8],20,1163531501),i=this.md5_gg(i,n,r,o,e[s+13],5,-1444681467),o=this.md5_gg(o,i,n,r,e[s+2],9,-51403784),r=this.md5_gg(r,o,i,n,e[s+7],14,1735328473),n=this.md5_gg(n,r,o,i,e[s+12],20,-1926607734),i=this.md5_hh(i,n,r,o,e[s+5],4,-378558),o=this.md5_hh(o,i,n,r,e[s+8],11,-2022574463),r=this.md5_hh(r,o,i,n,e[s+11],16,1839030562),n=this.md5_hh(n,r,o,i,e[s+14],23,-35309556),i=this.md5_hh(i,n,r,o,e[s+1],4,-1530992060),o=this.md5_hh(o,i,n,r,e[s+4],11,1272893353),r=this.md5_hh(r,o,i,n,e[s+7],16,-155497632),n=this.md5_hh(n,r,o,i,e[s+10],23,-1094730640),i=this.md5_hh(i,n,r,o,e[s+13],4,681279174),o=this.md5_hh(o,i,n,r,e[s+0],11,-358537222),r=this.md5_hh(r,o,i,n,e[s+3],16,-722521979),n=this.md5_hh(n,r,o,i,e[s+6],23,76029189),i=this.md5_hh(i,n,r,o,e[s+9],4,-640364487),o=this.md5_hh(o,i,n,r,e[s+12],11,-421815835),r=this.md5_hh(r,o,i,n,e[s+15],16,530742520),n=this.md5_hh(n,r,o,i,e[s+2],23,-995338651),i=this.md5_ii(i,n,r,o,e[s+0],6,-198630844),o=this.md5_ii(o,i,n,r,e[s+7],10,1126891415),r=this.md5_ii(r,o,i,n,e[s+14],15,-1416354905),n=this.md5_ii(n,r,o,i,e[s+5],21,-57434055),i=this.md5_ii(i,n,r,o,e[s+12],6,1700485571),o=this.md5_ii(o,i,n,r,e[s+3],10,-1894986606),r=this.md5_ii(r,o,i,n,e[s+10],15,-1051523),n=this.md5_ii(n,r,o,i,e[s+1],21,-2054922799),i=this.md5_ii(i,n,r,o,e[s+8],6,1873313359),o=this.md5_ii(o,i,n,r,e[s+15],10,-30611744),r=this.md5_ii(r,o,i,n,e[s+6],15,-1560198380),n=this.md5_ii(n,r,o,i,e[s+13],21,1309151649),i=this.md5_ii(i,n,r,o,e[s+4],6,-145523070),o=this.md5_ii(o,i,n,r,e[s+11],10,-1120210379),r=this.md5_ii(r,o,i,n,e[s+2],15,718787259),n=this.md5_ii(n,r,o,i,e[s+9],21,-343485551),i=this.safe_add(i,a),n=this.safe_add(n,l),r=this.safe_add(r,c),o=this.safe_add(o,h)}return[i,n,r,o]},e.prototype.md5_cmn=function(e,t,i,n,r,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,o)),r),i)},e.prototype.md5_ff=function(e,t,i,n,r,o,s){return this.md5_cmn(t&i|~t&n,e,t,r,o,s)},e.prototype.md5_gg=function(e,t,i,n,r,o,s){return this.md5_cmn(t&n|i&~n,e,t,r,o,s)},e.prototype.md5_hh=function(e,t,i,n,r,o,s){return this.md5_cmn(t^i^n,e,t,r,o,s)},e.prototype.md5_ii=function(e,t,i,n,r,o,s){return this.md5_cmn(i^(t|~n),e,t,r,o,s)},e.prototype.safe_add=function(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i},e.prototype.bit_rol=function(e,t){return e<<t|e>>>32-t},e}();__reflect(md5.prototype,"md5");var xlLib;!function(e){var t=function(){function t(){}return t.randomInt=function(e,t){if(0>=t-e)return 0;var i=t-e;return Math.floor(Math.random()*i)+e},t.inRange=function(e,t,i){return e>=t&&i>=e},t.div=function(e,t){return Math.floor(e/t)},t.getZeroTimeStamp=function(){var e=new Date,t=e.getUTCFullYear()+"/"+(e.getUTCMonth()+1)+"/"+e.getUTCDate();return new Date(t).getTime()/1e3},t.getTimeStamp=function(){var e=(new Date).getTime()/1e3;return parseInt(e.toString())},t.getAngle=function(e,t,i,n){var r=i-e,o=n-t,s=Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),a=r/s,l=Math.acos(a),c=180/(Math.PI/l);return 0>o?c=-c:0==o&&0>r&&(c=180),c},t.getCurrencyUnitByLen=function(e){var t="";switch(e){case 2:t="百";break;case 3:t="千";break;case 4:t="万";break;case 5:t="十万";break;case 6:t="百万";break;case 7:t="千万";break;case 8:t="亿";break;case 9:t="十亿";break;case 10:t="百亿";break;case 11:t="千亿";break;case 12:t="兆"}return t},t.getFormatCurrentStr=function(t){var i="";if(t>=1e4){var n=parseFloat(""+t/1e4);return e.NumberUtils.toFixed(n,2)+"万"}if(t>=1e3&&1e4>t){var n=parseFloat(""+t/1e3);return e.NumberUtils.toFixed(n,2)+"千"}return i=t+""},t.toFixed=function(e,t){e=e.toString();var i=e.lastIndexOf(".");return-1==i?e:e.substring(0,i+t+1)},t}();e.NumberUtils=t,__reflect(t.prototype,"xlLib.NumberUtils")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){}return t.resetSoundLoadTimes=function(){for(var e in this._resRequestSoundLoadTimes)this._resRequestSoundLoadTimes[e]=null,delete this._resRequestSoundLoadTimes[e]},t.setMustRes=function(t){try{this._mustResList=[];for(var i in t){var n=t[i];n&&n.resName&&-1==this._mustResList.indexOf(n.resName)&&this._mustResList.push(n.resName)}}catch(r){e.Console.warn("setMustRes:必须资源列表出错,请检查必须资源列表格式")}},t.init=function(){0==this.inited&&(this.inited=!0,RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),egret.startTick(this.onDragonBonesTick,egret.MainContext.instance.stage))},t.onDragonBonesTick=function(e){return dragonBones.WorldClock.clock.advanceTime(-1),!0},t.onItemLoadError=function(t){this._mustResList.indexOf(t.resItem.name)>=0&&e.Utils.restart(t.resItem.name+"资源加载失败,请重新启动游戏","确定")},t.getRes=function(t,i,n,r){function o(e){if(l._needLoadDicCallBack[t]){for(;l._needLoadDicCallBack[t].length>0;){var r=l._needLoadDicCallBack[t].shift();
r[0].call(r[1],e,t)}delete l._needLoadDicCallBack[t]}else null!=n?i.call(n,e,t):i&&i(e,t);if(-1!=l._loadingDic.indexOf(t)&&(l._asynLoadLevel--,l._loadingDic.splice(l._loadingDic.indexOf(t),1)),l._needloadDic.length>0&&this._asynLoadLevel<this.MAX_LOAD_LEVEL){var s=l._needloadDic.shift();l.getRes(s,o,l)}}function s(e){l._resRequestSoundLoadTimes[t]=0;var n=e.target;n.removeEventListener(egret.Event.COMPLETE,s,l),n.removeEventListener(egret.IOErrorEvent.IO_ERROR,a,l);var r=n.data;i&&i(r,t)}function a(i){var n=i.target;if(n.removeEventListener(egret.Event.COMPLETE,s,l),n.removeEventListener(egret.IOErrorEvent.IO_ERROR,a,l),e.Console.error("加载资源失败："+t),null!=l._resRequestSoundLoadTimes[t]&&l._resRequestSoundLoadTimes[t]>0){l._resRequestSoundLoadTimes[t]--;var r=new egret.URLLoader;r.dataFormat=egret.URLLoaderDataFormat.SOUND,r.once(egret.Event.COMPLETE,s,l),r.once(egret.IOErrorEvent.IO_ERROR,a,l);var o=RES.configInstance,c=o.getResourceItem(t),h=RES.getVersionController().getVirtualUrl(c.url),u=new egret.URLRequest(h);r.load(u)}}var l=this;if(r==egret.URLLoaderDataFormat.SOUND){if(null!=this._resRequestSoundLoadTimes[t])return 0==this._resRequestSoundLoadTimes[t]?void 0:void this._resRequestSoundLoadTimes[t]++;this._resRequestSoundLoadTimes[t]=1;var c=new egret.URLLoader;c.dataFormat=egret.URLLoaderDataFormat.SOUND,c.once(egret.Event.COMPLETE,s,l),c.once(egret.IOErrorEvent.IO_ERROR,a,l);var h=RES.configInstance,u=h.getResourceItem(t);if(null!=u){var d=RES.getVersionController().getVirtualUrl(u.url),g=new egret.URLRequest(d);c.load(g)}else e.Console.error("找不到将要加载的资源："+t+"	"+d)}else if(RES.hasRes(t)){var p=RES.getRes(t);if(p)o(p);else{if(this._loadingDic.indexOf(t)>=0){var f=[i,n];return null==this._needLoadDicCallBack[t]&&(this._needLoadDicCallBack[t]=[]),void this._needLoadDicCallBack[t].push(f)}if(this._asynLoadLevel<this.MAX_LOAD_LEVEL)this._loadingDic.push(t),this._asynLoadLevel++,RES.getResAsync(t,o,this);else{var f=[i,n];-1==this._needloadDic.indexOf(t)&&this._needloadDic.push(t),null==this._needLoadDicCallBack[t]&&(this._needLoadDicCallBack[t]=[]),this._needLoadDicCallBack[t].push(f)}}}else RES.getResByUrl(t,o,this)},t.clearResConfigByConfigName=function(e){var t=RES.configInstance;for(var i in t.groupDic){var n=t.groupDic[i];for(var r in n)e.indexOf(r)>=0&&t.keyMap[n[r].name]&&(n[r].name=null,delete n[r].name);t.groupDic[i]=null,delete t.groupDic[i]}},t.clearResConfigByGroupName=function(e){for(var t=RES.configInstance,i=0;i<e.length;i++){for(var n=RES.getGroupByName(e[i]),r=0;r<n.length;r++)n[r].loaded=!1,t.keyMap[n[r].name]=null,delete t.keyMap[n[r].name];t.groupDic[e[i]]&&(t.groupDic[e[i]]=null,delete t.groupDic[e[i]])}},t.getMovieClip=function(e,t,i,n,r){function o(r,o){if(s++,s==a.length){var l=new egret.MovieClipDataFactory(RES.getRes(e+"_json"),RES.getRes(e+"_png")),c=new egret.MovieClip(l.generateMovieClipData(t));return void i.call(n,c)}}void 0===r&&(r=!1);var s=0;null==t&&(t="");var a=[e+"_json",e+"_png"];for(var l in a)this.getRes(a[l],o,this)},t.freeMovieClip=function(e,t,i){},t.loadResConfig=function(e){},t.loadGameGroupReses=function(e,t,n,r,o,s){void 0===s&&(s="resource/");var a=function(s){s.groupName==e&&(this.loadedConfig[e].status=i.LOADED,RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,a,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,n,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,r,this),t.call(o,s))},l=function(t){t.groupName==e&&n&&n.call(o,t)},c=function(t){t.groupName==e&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,a,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,n,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,r,this),r&&r.call(o,t))},h=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,h,this);var i=[];for(var n in t.target.resConfig.groupDic)i.push(n);RES.createGroup(e,i),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,a,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,l,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,c,this),RES.loadGroup(e)};null==this.loadedConfig[e]?(this.loadedConfig[e]={},this.loadedConfig[e].status=i.LOADDING,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,h,this),RES.loadConfig(e,s)):this.loadedConfig[e].status==i.LOADED&&t.call(o)},t}();t.MAX_LOAD_LEVEL=1,t._asynLoadLevel=0,t._loadingDic=[],t._needloadDic=[],t._needLoadDicCallBack={},t._resRequestSoundLoadTimes={},t._mustResList=[],t.inited=!1,t.loadedConfig={},e.ResUtils=t,__reflect(t.prototype,"xlLib.ResUtils");var i;!function(e){e[e.LOADDING=0]="LOADDING",e[e.LOADED=1]="LOADED"}(i=e.GROUP_LOAD_STATUS||(e.GROUP_LOAD_STATUS={}))}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){}return t.init=function(t){this.scaleMode=t,e.Global.screenWidth=egret.MainContext.instance.stage.stageWidth,e.Global.screenHeight=egret.MainContext.instance.stage.stageHeight,egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResizeNotify,this),this.resetScaleMode(),this.scaleFactor=e.Global.screenHeight/e.Global.designHeight},t.onDeactive=function(t){e.Global.isActive=!1,egret.Tween.pauseTweens(egret.MainContext.instance.stage),e.SoundMgr.instance.onDeActive(t)},t.onActive=function(t){e.Global.isActive=!0,egret.Tween.resumeTweens(egret.MainContext.instance.stage),e.SoundMgr.instance.onActive(t)},t.onResizeNotify=function(){1==e.Global.isH5?(e.Global.screenWidth=egret.MainContext.instance.stage.stageWidth,e.Global.screenHeight=egret.MainContext.instance.stage.stageHeight):1==this._landscape?(e.Global.screenWidth=egret.MainContext.instance.stage.stageHeight,e.Global.screenHeight=egret.MainContext.instance.stage.stageWidth):(e.Global.screenWidth=egret.MainContext.instance.stage.stageWidth,e.Global.screenHeight=egret.MainContext.instance.stage.stageHeight),this.scaleFactor=e.Global.screenHeight/e.Global.designHeight,e.SceneMgr.instance.currentScene&&e.SceneMgr.instance.currentScene.resize(),e.PopUpMgr.resize(),e.UIMgr.instance.resize()},t.resetScaleMode=function(){this.scaleMode?egret.MainContext.instance.stage.scaleMode=this.scaleMode:egret.Capabilities.isMobile?egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH:egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.SHOW_ALL},Object.defineProperty(t,"landscape",{get:function(){return this._landscape},set:function(t){if(this._landscape=t,1==e.Global.isH5)1==this._landscape?(egret.MainContext.instance.stage.orientation=egret.OrientationMode.LANDSCAPE,egret.MainContext.instance.stage.setContentSize(e.Global.designHeight,e.Global.designWidth)):(egret.MainContext.instance.stage.orientation=egret.OrientationMode.AUTO,egret.MainContext.instance.stage.setContentSize(e.Global.designWidth,e.Global.designHeight));else if(1==this._landscape){var i=0,n=0;if(e.Global.screenWidth<e.Global.screenHeight){i=e.Global.screenWidth/e.Global.designWidth,n=(e.Global.screenHeight-i*e.Global.designHeight)/2;var r=e.Global.screenWidth;e.Global.screenWidth=e.Global.screenHeight,e.Global.screenHeight=r}else i=e.Global.screenHeight/e.Global.designWidth,n=(e.Global.screenWidth-i*e.Global.designHeight)/2;e.SceneMgr.instance.currentScene.x=e.Global.designWidth,e.SceneMgr.instance.currentScene.y=n,e.SceneMgr.instance.currentScene.rotation=90}else{var r=e.Global.screenWidth;e.Global.screenWidth=e.Global.screenHeight,e.Global.screenHeight=r,e.SceneMgr.instance.currentScene.rotation=0,e.SceneMgr.instance.currentScene.x=0,e.SceneMgr.instance.currentScene.y=0}this.onResizeNotify()},enumerable:!0,configurable:!0}),t}();t.scaleFactor=1,e.ScreenUtils=t,__reflect(t.prototype,"xlLib.ScreenUtils")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){}return t.stringIsNullOrEmpty=function(e){return null==e||0==e.length},t.ltrim=function(e){return e.replace(/(^\s*)/g,"")},t.rtrim=function(e){return e.replace(/(\s*$)/g,"")},t.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},t.sTrim=function(e){return e.replace(/\s/g,"")},t.checkPhone=function(e){return/^1[34578]\d{9}$/.test(e)?!0:!1},t.checkEmail=function(e){return/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(e)?!0:!1},t.getPosition=function(e,t,i){void 0===i&&(i=1);for(var n=new RegExp(t,"g");i--;)n.test(e);var r=n.lastIndex-t.length;return 0>r?null:r},t.formatCurrency=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=5);var r="";isNaN(e)&&(e=0);var o=e+"";null!=t&&"万"==t&&(n?5>n&&(n=5):n=5,o.length>=n?o=o.slice(0,o.length-4):t="");var s=o.split("."),a=!1,l="",c=o;if(s.length>=2&&(a=!0,l=s[1],c=s[0]),1==i){for(var h="",u=c.length,d=Math.ceil(u/3),g=1;d>=g;g++){var p=u-3*g;0>p&&(p=0);var f=u-3*g+3,_=c.substring(p,f)+(1==i?",":"");h=_+h}h=h.substr(0,h.length-1)}else h=c;var v="";return v=a?""+r+h+"."+l:""+r+h,null!=t&&(v+=t),v},t.md5=function(e){return this.md5Object=this.md5Object||new md5,this.md5Object.hex_md5(e)},t.formatCurrencyToUnit=function(t,i,n){void 0===i&&(i=4),void 0===n&&(n=!0);var r,o="",s="";4>i&&(i=4);var a=t.toString().split("."),l=!1,c="",h="";if(a.length>=2&&(l=!0,c=a[1]),h=a[0],h.length>i&&(r=h.length-i),r>=i&&(h=h.replace(h.substr(i,h.length),""),o=e.NumberUtils.getCurrencyUnitByLen(r)),h.length>=4&&1==n){for(var u="",d=h.length,g=Math.ceil(d/3),p=1;g>=p;p++){var f=d-3*p;0>f&&(f=0);var _=d-3*p+3,v=h.substring(f,_)+(1==n?",":"");u=v+u}u=u.substr(0,u.length-1)}else u=h;return s=u+o},t.formatCurrencyByTotalLen=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=8),5>i&&(i=5);var n="";isNaN(e)&&(e=0);var r=Number(e)+"",o="";r.length>=i?r.length-4>=i?(r=r.slice(0,r.length-8),o="亿"):(r=r.slice(0,r.length-4),o="万"):o="";var s=r.split("."),a=!1,l="",c=r;if(s.length>=2&&(a=!0,l=s[1],c=s[0]),1==t){for(var h="",u=c.length,d=Math.ceil(u/3),g=1;d>=g;g++){var p=u-3*g;0>p&&(p=0);var f=u-3*g+3,_=c.substring(p,f)+(1==t?",":"");h=_+h}h=h.substr(0,h.length-1)}else h=c;var v="";return v=a?""+n+h+"."+l:""+n+h,null!=o&&(v+=o),v},t.formatCurrencyNomal=function(e){if(e.indexOf("万")>=0&&(e=e.slice(0,e.length-1),e+="0000"),e.indexOf(",")>=0){var t=e.split(",");e="";for(var i=0;i<t.length;i++)e+=t[i]}return e},t.formatMMSS=function(e){var t=Math.floor(e/60)+"",i=e%60+"";return t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),t+":"+i},t.formatHHMMSS=function(e,t){void 0===t&&(t=":");var i=Math.floor(e/60/60)+"",n=Math.floor(e/60)-60*parseInt(i)+"",r=e%60+"";return i.length<2&&(i="0"+i),n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),i+t+n+t+r},t.formatDDHHMMSS=function(e,t){void 0===t&&(t=":");var i=e,n="",r="",o="",s="",a="天",l="时",c="分";return n=Math.floor(i/60/60/24)+"",i-=24*parseInt(n)*60*60,i>0&&(r=Number(i/60/60)+""),i-=60*parseInt(r)*60,i>0&&(o=Math.floor(i/60)+""),i-=60*parseInt(o),i>0&&(s=e%60+""),n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),o.length<2&&(o="0"+o),s.length<2&&(s="0"+s),"天"==t?n+a+r+l+o+c+s:n+t+r+t+o+t+s},t.getVariables=function(e){for(var t=e.split("="),i={},n=0;n<t.length;)i[t[n]]=t[n+1],n+=2;return i},t.prototype.getStrRealLngth=function(e){var t=e.length,i=0;if(t){for(var n=0;t>n;n++)i+=e.charCodeAt(n)>255?2:1;return i}return 0},t}();e.StringUtils=t,__reflect(t.prototype,"xlLib.StringUtils")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function e(e,t,i,n){void 0===n&&(n=0),this.loopLimit=0,this.last=0,this.jumped=0,this.isStart=!1,this.begin=0,this.delay=e,this.callFun=t,this._thisObj=i,this.loopLimit=n}return e.prototype.stop=function(){-1!=e.timerlists.indexOf(this)&&(this.isStart=!1,e.timerlists.splice(e.timerlists.indexOf(this),1))},e.prototype.start=function(){null==e.timer&&(e.timerNumber=0,e.timer=new egret.Timer(10),e.timer.addEventListener(egret.TimerEvent.TIMER,e.timerHandler,e),e.timer.start()),this.isStart=!0,this.current=this.delay,this.last=egret.getTimer(),this.begin=this.last,this.jumped=0,e.timerlists.push(this)},e.prototype.remain=function(){return this.current},e.prototype.needRender=function(){if(!this.isStart)return 0;this.current=this.current-(egret.getTimer()-this.last),this.last=egret.getTimer();var e=(this.last-this.begin)/this.delay;return e-this.jumped},e.prototype.excute=function(){this.jumped++,0!=this.loopLimit&&this.jumped>this.loopLimit&&this.stop(),this.current=this.delay,this.callFun.call(this._thisObj)},e.timerHandler=function(){for(var t,i=0,n=0,r=0;r<e.timerlists.length;)for(t=e.timerlists[r],r++,i=t.needRender(),i>30&&(i=1),n=0,i>50&&(i=1);i>n;)n++,t.excute()},e}();t.TIMERBASE_DELAY=10,t.timerNumber=0,t.timerlists=[],e.TimerBase=t,__reflect(t.prototype,"xlLib.TimerBase")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){}return t.showTipsDownToUp=function(t,i){void 0===t&&(t=""),void 0===i&&(i=!1);var n;"string"==typeof t?(n=new egret.TextField,n.size=24,i?n.textColor=e.Global.TextColors.red:n.textColor=e.Global.TextColors.green,n.alpha=0,n.text=t,n.strokeColor=0,n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER):n=t,n.y=egret.MainContext.instance.stage.stageHeight/2,n.x=egret.MainContext.instance.stage.stageWidth/2-n.width/2,null!=e.SceneMgr.instance.currentScene&&null!=e.SceneMgr.instance.currentScene.tipsLayer?e.SceneMgr.instance.currentScene.tipsLayer.contains(n)||e.SceneMgr.instance.currentScene.tipsLayer.addChild(n):egret.MainContext.instance.stage.addChild(n);var r=function(){e.DisplayUtils.removeFromParent(n),n=null},o=function(){egret.Tween.get(n).to({y:n.y-50,alpha:0},500).call(r,this)};n.visible=!0,egret.Tween.get(n).to({y:n.y-120,alpha:1},800,egret.Ease.backOut).wait(2e3).call(o,this)},t.showFloatWordTips=function(t){this._tips?(egret.Tween.removeTweens(this._tips),e.DisplayUtils.removeFromParent(this._tips)):this._tips=new e.FloatTips,this._tips.alpha=1,this._tips.setTipsText(t),this._tips.x=e.Global.screenWidth-this._tips.width>>1,this._tips.y=e.Global.screenHeight-this._tips.height>>1,e.SceneMgr.instance.currentScene.tipsLayer.addChild(this._tips),egret.Tween.get(this._tips).wait(500).to({y:this._tips.y-50,alpha:0},1e3).call(function(){this._tips.alpha=1,e.DisplayUtils.removeFromParent(this._tips)},this)},t.showTipsLeftOrRight=function(t,i,n){void 0===t&&(t=""),void 0===i&&(i=!1),void 0===n&&(n=!0);var r;"string"==typeof t?(r=new egret.TextField,r.size=24,i?r.textColor=e.Global.TextColors.red:r.textColor=e.Global.TextColors.green,r.alpha=0,r.text=t,r.strokeColor=0,r.stroke=2,r.bold=!0,r.textAlign=egret.HorizontalAlign.CENTER):r=t,n?r.x=-r.width:r.x=e.Global.screenWidth,r.y=e.Global.screenHeight/2,e.SceneMgr.instance.currentScene.tipsLayer.contains(r)||e.SceneMgr.instance.currentScene.tipsLayer.addChild(r),n?egret.Tween.get(r).to({x:e.Global.screenWidth/2-r.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(r).to({x:e.Global.screenHeight/2-r.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){n?egret.Tween.get(r).to({x:r.x+100},500):egret.Tween.get(r).to({x:r.x-100},500)},this,300),egret.setTimeout(function(){n?egret.Tween.get(r).to({x:e.Global.screenWidth},300,egret.Ease.sineIn):egret.Tween.get(r).to({x:-r.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){e.SceneMgr.instance.currentScene.tipsLayer.contains(r)&&(e.SceneMgr.instance.currentScene.tipsLayer.removeChild(r),r=null)},this,1100)},t.showTipsFromCenter=function(t,i){void 0===t&&(t=""),void 0===i&&(i=!1);var n;"string"==typeof t?(n=new egret.TextField,n.size=24,i?n.textColor=e.Global.TextColors.red:n.textColor=e.Global.TextColors.green,n.alpha=0,n.text=t,n.strokeColor=0,n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER):n=t,n.y=e.Global.screenHeight/2,n.scaleX=0,n.scaleY=0,n.anchorOffsetX=n.width>>1,n.anchorOffsetY=n.height>>1,n.x=e.Global.screenWidth/2,e.SceneMgr.instance.currentScene.tipsLayer.contains(n)||e.SceneMgr.instance.currentScene.tipsLayer.addChild(n);var r=function(){e.SceneMgr.instance.currentScene.tipsLayer.contains(n)&&(e.SceneMgr.instance.currentScene.tipsLayer.removeChild(n),n=null)};egret.Tween.get(n).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(n).to({alpha:0},500).call(r,this)},this,1e3)},t.showTipsBigToSmall=function(t,i){void 0===t&&(t=""),void 0===i&&(i=!1);var n;"string"==typeof t?(n=new egret.TextField,n.size=24,i?n.textColor=e.Global.TextColors.red:n.textColor=e.Global.TextColors.green,n.alpha=0,n.text=t,n.strokeColor=0,n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER):n=t,n.y=e.Global.screenHeight/2,n.anchorOffsetX=n.width>>1,n.anchorOffsetY=n.height>>1,n.scaleX=4,n.scaleY=4,n.x=e.Global.screenWidth/2,e.SceneMgr.instance.currentScene.tipsLayer.contains(n)||e.SceneMgr.instance.currentScene.tipsLayer.addChild(n);var r=function(){e.SceneMgr.instance.currentScene.tipsLayer.contains(n)&&(e.SceneMgr.instance.currentScene.tipsLayer.removeChild(n),n=null)};egret.Tween.get(n).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(n).to({alpha:0},500).call(r,this)},this,1e3)},t}();e.TipsUtils=t,__reflect(t.prototype,"xlLib.TipsUtils")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(){function t(){}return t.setLocalStorage=function(t,i){e.Global.nativeStorage?e.Global.nativeStorage.save({key:t,id:t,rawData:i,expires:null}):window.localStorage?localStorage.setItem(t,i):window.document&&window.document.cookie||egret&&egret.localStorage.setItem(t,i)},t.getLocalStorage=function(t,i){if(e.Global.nativeStorage)e.Global.nativeStorage.load({key:t,id:t,autoSync:!0,syncInBackground:!0}).then(function(e){i(e)})["catch"](function(e){i(null)});else if(window.localStorage){if(!i)return localStorage.getItem(t);i(localStorage.getItem(t))}else if(window.document&&window.document.cookie);else if(egret){if(!i)return egret.localStorage.getItem(t);i(egret.localStorage.getItem(t))}else{if(!i)return null;i(null)}},t.clearLocalStorage=function(t){try{if(1==e.Global.lobbyMode&&1==e.Global.isInGame)return;t?e.Global.nativeStorage?e.Global.nativeStorage.remove({key:t}):window.localStorage?localStorage.removeItem(t):window.document&&window.document.cookie||egret&&egret.localStorage.removeItem(t):e.Global.nativeStorage?e.Global.nativeStorage.clearMap():window.localStorage?localStorage.clear():window.document&&window.document.cookie||egret&&egret.localStorage.clear()}catch(i){}},t.isIOS=function(){return 0==e.Global.isH5&&"iOS"==egret.Capabilities.os?!0:!1},t.isAndroid=function(){return 0==e.Global.isH5&&"Android"==egret.Capabilities.os?!0:!1},t.isWindowsPC=function(){return 0==e.Global.isH5&&"Windows PC"==egret.Capabilities.os?!0:!1},t.restart=function(t,i){var n=this,r=n.isrebooting;if(n.isrebooting=!0,1==e.Global.isH5){var o=confirm(t);1==o||(n.isrebooting=!1)}else r||e.Global.dispatchEvent(e.ZqEvent.ON_RESTART,[t,i])},t.getDistance=function(e,t,i,n){if(Math.abs(e)>90||Math.abs(i)>90)return 0;if(Math.abs(t)>180||Math.abs(n)>180)return 0;var r=this.rad(e),o=this.rad(i),s=r-o,a=this.rad(t)-this.rad(n),l=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(r)*Math.cos(o)*Math.pow(Math.sin(a/2),2)));return l*=this.EARTH_RADIUS,l=Math.round(1e4*l)/1e4},t.rad=function(e){return e*Math.PI/180},t.cloneObj=function(e){var i;if("object"==typeof e){for(var n in e)i[n]="object"==typeof e[n]?t.cloneObj(e[n]):e[n];return i}},t.formatDate=function(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t},t}();t.isrebooting=!1,t.EARTH_RADIUS=6378137,e.Utils=t,__reflect(t.prototype,"xlLib.Utils")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(t){function i(i){void 0===i&&(i="assets");var n=t.call(this)||this;return n.w=0,n.h=0,n.assets=RES.getRes(i),n.w=e.Global.screenWidth,n.h=e.Global.screenHeight,n.initPanel(),n}return __extends(i,t),i.prototype.initPanel=function(){},i.prototype.initData=function(){},i.prototype.onEnter=function(){},i.prototype.onExit=function(){},i.prototype.closePanel=function(){e.PopUpMgr.removePopUp(this)},i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i}(egret.DisplayObjectContainer);e.BasePanel=t,__reflect(t.prototype,"xlLib.BasePanel")}(xlLib||(xlLib={}));var xlLib;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.init(),e}return __extends(i,t),i.prototype.init=function(){this.tipsBg=e.DisplayUtils.createBitmapByName("tipsBg");var t=new egret.Rectangle(190,10,2,2);this.tipsBg.scale9Grid=t,this.addChild(this.tipsBg),this._tips_tf=e.DisplayUtils.createTextLabel("",16777215,22),this.addChild(this._tips_tf)},i.prototype.setTipsText=function(e){this._tips_tf.text=e,this.tipsBg.width=this._tips_tf.width+80,this.width=this.tipsBg.width,this._tips_tf.x=this.width-this._tips_tf.width>>1,this._tips_tf.y=this.height-this._tips_tf.height>>1,this.tipsBg.x=this.width-this.tipsBg.width>>1},i}(egret.DisplayObjectContainer);e.FloatTips=t,__reflect(t.prototype,"xlLib.FloatTips")}(xlLib||(xlLib={}));var DatePickerView=function(e){function t(){var t=e.call(this)||this;return t.skinName="DatePickerViewSkin",t.initEventListener(),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.resize()},t.prototype.resize=function(){this.close_rect&&(this.close_rect.width=xlLib.Global.screenWidth,this.close_rect.height=xlLib.Global.screenHeight)},t.prototype.showDatePicker=function(e,t,i){this.currdate=e,this.cb=t,this.thisArg=i,this.updataDateText(),this.resize()},t.prototype.updataDateText=function(){this.time_txt.text=GlobalFunction.getDateString(this.currdate)+"/08:00:00",this.year_txt.text=this.currdate.getFullYear()+"",this.month_txt.text=this.currdate.getMonth()+1+"",this.date_txt.text=this.currdate.getDate()+""},t.prototype.initEventListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.once(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},t.prototype.onTouchHandler=function(e){e.target==this.close_rect||e.target==this.qx_btn?xlLib.PopUpMgr.removePopUp(this,1):e.target==this.qd_btn?(this.cb&&this.cb.call(this.thisArg,this.currdate),xlLib.PopUpMgr.removePopUp(this,1)):e.target==this.addyear_btn?(this.currdate.setFullYear(this.currdate.getFullYear()+1),this.updataDateText()):e.target==this.addmonth_btn?(this.currdate.setMonth(this.currdate.getMonth()+1),this.updataDateText()):e.target==this.adddate_btn?(this.currdate.setDate(this.currdate.getDate()+1),this.updataDateText()):e.target==this.reyear_btn?(this.currdate.setFullYear(this.currdate.getFullYear()-1),this.updataDateText()):e.target==this.remonth_btn?(this.currdate.setMonth(this.currdate.getMonth()-1),this.updataDateText()):e.target==this.redate_btn&&(this.currdate.setDate(this.currdate.getDate()-1),this.updataDateText())},t.prototype.destroy=function(){this.cb=null,this.thisArg=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this)},t}(eui.Component);__reflect(DatePickerView.prototype,"DatePickerView");var TipsLoading=function(e){function t(){var t=e.call(this)||this;return t.init(),t.once(egret.Event.ADDED_TO_STAGE,t.onAddHandler,t),t.once(egret.Event.REMOVED_FROM_STAGE,t.destroy,t),t}return __extends(t,e),t.prototype.init=function(){var e=xlLib.DisplayUtils.createMask(.5,xlLib.Global.screenWidth,xlLib.Global.screenHeight);e.touchEnabled=!0,this.addChild(e),this._tips_bg=xlLib.DisplayUtils.createBitmapByName("spinner"),this._tips_bg.x=xlLib.Global.screenWidth>>1,this._tips_bg.y=xlLib.Global.screenHeight>>1,this._tips_bg.anchorOffsetX=this._tips_bg.width/2,this._tips_bg.anchorOffsetY=this._tips_bg.height/2,this._tips_bg.scaleX=this._tips_bg.scaleY=.4,this.addChild(this._tips_bg)},t.prototype.onAddHandler=function(e){this.starRotation()},t.prototype.starRotation=function(){egret.Tween.get(this._tips_bg).to({rotation:this._tips_bg.rotation+20},100).call(this.starRotation,this)},t.prototype.destroy=function(){egret.Tween.removeTweens(this._tips_bg),this._tips_bg=null},t}(egret.DisplayObjectContainer);__reflect(TipsLoading.prototype,"TipsLoading");